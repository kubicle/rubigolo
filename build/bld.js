!function t(i,n,r){function e(s,h){if(!n[s]){if(!i[s]){var a="function"==typeof require&&require;if(!h&&a)return a(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[s]={g:{}};i[s][0].call(c.g,function(t){var n=i[s][1][t];return e(n?n:t)},c,c.g,t,i,n,r)}return n[s].g}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)e(r[s]);return e}({1:[function(t,i,n){i.g={".cgos":{h:!0,i:!0},".chinese":{h:!0,i:!0},".japanese":{}}},{}],2:[function(t,i,n){"use strict";function r(t){this.history=[],this.m=[],this.o={},this.p=[],this.q(v),this.s=null,this.t=this.u=this.v=0,this.A=this.C=p,this.D=this.F=null,this.G=this.H=null,t&&this.I(t)}function e(t){switch(t[0]){case"B":return p;case"W":return g;default:return}}function o(t,i){return(i===p?"B-":"W-")+t}var s=t("./constants"),h=t("./Goban"),a=t("./Grid"),u=t("./HandicapSetter"),c=t("./log"),f=(t("./main"),t("./SgfReader")),l=t("../config/rules.json"),p=s.j,g=s.k,v=s.l;i.g=r,r.prototype.J=function(t,i){this.p[t]=i},r.prototype.q=function(t,i){t=t||"unspecified",this.K=t;var n=l["."+t.toLowerCase()];if(!n){if(!i)throw new Error("Invalid rules: "+t+"\nValid values: "+Object.keys(l).map(function(t){return t.substr(1)}).join(", "));n=l["."+v.toLowerCase()]}this.i=n.i||!1,this.h=n.h||!1},r.prototype.I=function(t){this.L(t.C),this.J(p,t.p[p]),this.J(g,t.p[g]),this.q(t.K,!0),this.M(t.s.N,t.t,t.u),this.O(t.history.join(","))},r.prototype.M=function(t,i,n){return this.history.clear(),this.m.clear(),this.v=0,this.F=this.D=!1,this.G=this.H=null,this.s&&t===this.s.N?this.s.clear():this.s=new h(t),this.s.P(this.i),i=void 0!==i?i:0,this.R(i),this.u=void 0!==n?n:i?.5:6.5,this.s.N!==t?this.S("Size could not be set: "+t):this.t!==i?this.S("Handicap could not be set: "+i):!0},r.prototype.L=function(t){this.A=this.C=t},r.prototype.R=function(t){if(this.history.length>0)throw new Error("Handicap cannot be changed during a game");return this.t=u.T(this.s,t),this.L(this.t>0?g:p),!0},r.prototype.U=function(t,i){if(c.error&&c.error(t),!i)throw new Error(t);return i.push(t),!1},r.prototype.O=function(t,i){if(!t)return!0;for(var n=t.split(","),r=0;r<n.length;r++)if(!this.V(n[r]))return this.U("Failed playing loaded move #"+(r+1)+":\n"+this.X().join(", "),i);return!0},r.prototype.Y=function(t,i,n){var r,e=new f;try{this.o=r=e.Z(t,n)}catch(o){return this.U("Failed loading SGF moves:\n"+o,i)}return this.M(r.$,0,r.u),this.J(p,r.playerBlack),this.J(g,r.playerWhite),this.q(r.rules,!0),this.O(e._(),i)},r.prototype.aa=function(t,i){return f.ba(t)?this.Y(t,i):this.O(t,i)},r.prototype.ca=function(t){return"B"!==t[0]&&"W"!==t[0]?t:"-"!==t[1]?t.substr(1):t.substr(2)},r.prototype.V=function(t){if(this.F)return this.S("Game already ended");if(/^[B|W]?-?[a-z][1-2]?[0-9]$/.test(t))return this.da(t);var i=this.ca(t);return i.startsWith("pass")?this.ea():i.startsWith("resi")?this.fa(e(t)):"undo"===i?this.ga():"half_undo"===i?this.ga(!0):i.startsWith("hand")?this.R(i.split(":")[1]):i.startsWith("load:")?this.O(i.slice(5)):this.S("Invalid command: "+i)},r.prototype.da=function(t){var i=this.ha(t);3===i.length&&(this.A=i[2]);var n=i[0],r=i[1];return this.s.ia(n,r,this.A)?(this.s.ja(n,r,this.A),this.ka(t),this.la(),this.v=0,!0):this.S("Invalid move: "+t)},r.prototype.ha=function(t){var i=e(t);void 0!==i&&(t=this.ca(t));var n=a.ma(t,!0);if(!n){if("pass"===t||t.startsWith("resi"))return null;throw new Error("Illegal move parsed: "+t)}return void 0!==i?n.concat(i):n},r.prototype.fa=function(t,i){t=void 0!==t?t:this.A,this.G=t,this.H=i;var n=o("resign",t)+(i?"-"+i:"");return this.ka(n),this.F=!0,this.D=!1,!0},r.prototype.ea=function(){return this.ka(o("pass",this.A)),this.v++,this.v>=2&&(this.D=!0),this.la(),!0},r.prototype.na=function(t,i){return this.D?(this.D=!1,t?(this.F=!0,!0):(i!==this.A&&(this.history.pop(),this.la()),!0)):this.S("The game is not ending yet")},r.prototype.oa=function(){return this.history.length},r.prototype.pa=function(){var t=this.t>0?"handicap:"+this.t+",":"",i=this.history,n=i.length&&2===i[0].length?o("",this.C):"";return t+n+i.join(",")},r.prototype.S=function(t){return this.m.push(t),!1},r.prototype.X=function(){var t=this.m;return this.m=[],t},r.prototype.la=function(){this.A=1-this.A},r.prototype.ka=function(t){return this.history.push(t)},r.prototype.ga=function(t){var i=t?1:2;if(this.history.length<i)return this.S("Nothing to undo");for(var n=i;n>=1;n--){var r=this.history.pop();r.endsWith("pass")||this.s.qa()}return t&&this.la(),this.v=0,!0}},{"../config/rules.json":1,"./Goban":4,"./Grid":5,"./HandicapSetter":7,"./SgfReader":9,"./constants":33,"./log":34,"./main":35}],3:[function(t,i,n){"use strict";function r(t,i,n){this.ra=t||{},this.sa=i||{},this.name=n||"#"+o++}var e=t("./main"),o=1;i.g=r;var s=.05,h=0,a=1;r.prototype.clone=function(t){return new r(e.clone(this.ra),e.clone(this.sa),t)},r.prototype.ta=function(t){this.sa=t},r.prototype.toString=function(){var t="{"+this.name+" - ";for(var i in this.ra)t+=i+":"+this.ra[i].toFixed(2)+", ";return t.ua(", ")+"}"},r.prototype.va=function(t){var i=0;for(var n in this.ra){var r=this.ra[n],e=t.ra[n];0>e!=0>r?0>e?(r-=e,e=0):(e-=r,r=0):(r=Math.abs(r),e=Math.abs(e));var o;o=0===e?r>1?1:r:0===r?e>1?1:e:1-(e>=r?r/e:e/r),i+=o}return i},r.prototype.get=function(t,i,n,r){void 0===n&&(n=null),void 0===r&&(r=null);var e=this.ra[t];if(e)return e;if(this.ra[t]=i,(n||r)&&(this.sa[t]=[n,r]),n&&r&&n>r)throw new Error("Limits are invalid: "+n+" > "+r);return i},r.prototype.wa=function(){return JSON.stringify(this)},r.xa=function(t){var i=JSON.parse(t);this.ra=i.ra,this.sa=i.sa},r.prototype.ya=function(t,i,n,r,e){var o=this.ra,s=t.ra;i.ta(this.sa),n.ta(this.sa);var h=i.ra,a=n.ra,u=~~(Math.random()*o.length),c=~~(Math.random()*u),f=0;for(var l in o)c>f||f>u?(h[l]=o[l],a[l]=s[l]):(h[l]=s[l],a[l]=o[l]),Math.random()<r&&(h[l]=this.za(l,h[l],e)),Math.random()<r&&(a[l]=this.za(l,a[l],e)),f++},r.prototype.za=function(t,i,n){var r,e=this.sa[t];if(e){var o=e[h],u=e[a];if(Math.random()<n)r=o+Math.random()*(u-o);else{var c=1+2*Math.random()*s-s;r=i*c,o&&o>r&&(r=o),u&&r>u&&(r=u)}}else r=i+10*(Math.random()-.5);return r},r.prototype.Aa=function(){for(var t in this.ra)this.ra[t]=this.za(t,this.ra[t],1);return this}},{"./main":35}],4:[function(t,i,n){"use strict";function r(t){if(void 0===t&&(t=19),t!==~~t||3>t)throw new Error("Invalid goban size: "+t);this.N=t,this.Da=new o(t,c),this.Ea=new o(t,a),this.Fa=this.Da.Ga;var i,n;for(n=1;t>=n;n++)for(i=1;t>=i;i++)this.Fa[n][i]=new s(this,i,n,u);for(n=1;t>=n;n++)for(i=1;t>=i;i++)this.Fa[n][i].Ha();r.Ia=new h(this,new s(this,-50,-50,u),-100,0),this.Ja=[r.Ia],this.Ka=[r.Ia],this.La=[],this.Ma=0,this.history=[],this.P(!1)}var e=t("./constants"),o=(t("./main"),t("./Grid")),s=t("./Stone"),h=t("./Group"),a=e.Ba,u=e.EMPTY,c=e.Ca;i.g=r,r.prototype.clear=function(){for(var t=1;t<=this.N;t++)for(var i=1;i<=this.N;i++){var n=this.Fa[t][i];n.group&&n.group.clear()}this.Ja.shift(),this.Ka.shift(),this.La.concat(this.Ja),this.La.concat(this.Ka),this.Ja.clear(),this.Ka.clear(),this.Ja.push(r.Ia),this.Ka.push(r.Ia),this.Ma=0,this.history.clear(),this.P(!1)},r.prototype.Na=function(t,i){var n=++this.Ma,r=this.La.pop();return r?r.Oa(t,i,n):r=new h(this,t,i,n),r},r.prototype.Pa=function(t){t.Qa===this.Ma&&this.Ma--,this.La.push(t)},r.prototype.Ra=function(){return this.Da.Sa()},r.prototype.Ta=function(t){this.Ea.Ta(t);for(var i=this.N;i>=1;i--)for(var n=1;n<=this.N;n++){var r=this.Ea.Ga[i][n];r!==u&&this.ja(n,i,r)}},r.prototype.Ua=function(){for(var t={},i=this.N;i>=1;i--)for(var n=this.N;n>=1;n--){var r=this.Fa[i][n].group;r&&(t[r.Qa]=r)}return t},r.prototype.Va=function(){for(var t,i="Board:\n"+this.toString()+"\nGroups:\n"+this.Da.Wa(function(t){return t.group?""+t.group.Qa:"."})+"\nStones in groups:\n",n={},r=this.Da.Ga,e=0;t=r[e],e<r.length;e++)for(var o,s=t,h=0;o=s[h],h<s.length;h++)o&&o.group&&(n[o.group.Qa]=o.group);for(var a=1;a<=this.Ma;a++)n[a]&&(i+=n[a].Va()+"\n");return i},r.prototype.toString=function(){return this.Da.Wa()},r.prototype.ia=function(t,i,n){if(1>t||t>this.N||1>i||i>this.N)return!1;var r=this.Fa[i][t];if(r.color!==u)return!1;if(r.Xa(n))return!1;if(this.Ya){if(this.Za[this.$a(t,i,n)])return!1}else if(r._a(n))return!1;return!0},r.prototype.ab=function(t,i){return this.Fa[i][t]},r.prototype.bb=function(t,i){var n=this.Fa[i][t];return n?n.color:c},r.prototype.cb=function(t,i){return this.Fa[i][t].cb()},r.prototype.oa=function(){return this.history.length},r.prototype.ja=function(t,i,n){this.eb(t,i,n);var r=this.Fa[i][t];if(r.color!==u)throw new Error("Tried to play on existing stone in "+r);return this.fb(t,i,n)},r.prototype.qa=function(){if(!this.history.length)throw new Error("Extra undo");this.history.pop().gb(),this.eb()},r.prototype.fb=function(t,i,n){var r=this.Fa[i][t];return this.history.push(r),r.hb(n),r},r.prototype.ib=function(){this.history.pop().gb()},r.prototype.jb=function(){return this.Ja[this.Ja.length-1]},r.prototype.kb=function(){return this.history[this.history.length-1]},r.prototype.lb=function(t){t=t||[0,0];for(var i=this.Ja.length-1;i>=0;i--){var n=this.Ja[i];t[n.color]+=n.mb.length}return t},r.prototype.P=function(t){if(this.history.length>0)throw new Error("Superko rule changed during game");this.Ya=t,t?(this.nb=this.ob(),this.pb=[],this.Za={}):(this.nb=null,this.pb=this.Za=null)},r.prototype.eb=function(t,i,n){this.Ya?t?(this.pb.push(this.nb),this.Za[this.nb]=this.history.length,this.nb=this.$a(t,i,n)):(this.nb=this.pb.pop(),this.Za[this.nb]=null):this.nb=null},r.prototype.$a=function(t,i,n){for(var r=this.qb(this.nb,t,i,n),e=this.ab(t,i).rb(1-n),o=e.length-1;o>=0;o--)if(!(e[o].sb>1))for(var s=e[o].mb,h=s.length-1;h>=0;h--){var a=s[h];r=this.qb(r,a.tb,a.ub,u)}return r},r.prototype.vb=function(){return this.Ya?this.nb:(this.nb||(this.nb=this.Ra()),this.nb)};var f=33,l="0".charCodeAt();r.prototype.ob=function(){for(var t="",i="",n=this.N,r=1;n>=r;r++)for(var e=this.Fa[r],o=1;n>=o;o++)t+=String.fromCharCode(l+e[o].color+1),4===t.length&&(i+=String.fromCharCode(parseInt(t,3)+f),t="");return t.length&&(t=(t+"000").substr(0,4),i+=String.fromCharCode(parseInt(t,3)+f)),i},r.prototype.qb=function(t,i,n,r){var e,o=(n-1)*this.N+(i-1),s=~~(o/4),h=o%4;if(r===u){var a=("000"+(t.charCodeAt(s)-f).toString(3)).slice(-4),c=a.substr(0,h)+"0"+a.substr(h+1);e=parseInt(c,3)+f}else e=t.charCodeAt(s)+(1<<r)*Math.pow(3,3-h);return t.substr(0,s)+String.fromCharCode(e)+t.substr(s+1)}},{"./Grid":5,"./Group":6,"./Stone":10,"./constants":33,"./main":35}],5:[function(t,i,n){"use strict";function r(t,i,n){if(void 0===i)throw new Error("Grid init value must be defined");this.N=t,void 0===n?this.Ga=a.wb(t+2,t+2,i):(this.Ga=a.wb(t+2,t+2,n),this.init(i))}function e(t){if(t===u)return"(BORDER)";if(t>=r.Fb)return String.fromCharCode("A".charCodeAt()+t-r.Fb);if(t<r.Hb||t>=r.Db.length)throw new Error("Invalid color "+t);return 0>t&&(t+=r.Db.length),r.Db[t]}function o(t){return e("number"==typeof t?t:t.color)}function s(t){for(var i="",n=t.length-1;n>=0;n--)i+=t[n];return i}var h=t("./constants"),a=t("./main"),u=h.Ba;i.g=r,r.xb=["black","white"],r.yb="+",r.zb="?",r.Ab="@O",r.Bb="&#",r.Cb="-:",r.Db=r.Ab+r.Bb+r.Cb+r.zb+r.yb,r.Eb=r.zb+r.yb+r.Db,r.Fb=100,r.Gb=-1,r.Hb=-2,r.Ib=2,r.Jb=4,r.Kb=[0,0,-1,1,1,-1,-1,1],r.Lb="-'?.:",r.prototype.init=function(t){if(void 0===t)throw new Error("Grid init value must be defined");for(var i=this.N;i>=1;i--)for(var n=this.Ga[i],r=this.N;r>=1;r--)n[r]=t},r.prototype.I=function(t){if(t.N!==this.N)throw new Error("Cannot copy between different sized grids");for(var i=this.N;i>=1;i--)for(var n=this.Ga[i],r=t.Ga[i],e=this.N;e>=1;e--)n[e]=r[e];return this},r.prototype.Mb=function(t){var i=t.Da;if(i.N!==this.N)throw new Error("Cannot copy between different sized grids");for(var n=this.N;n>=1;n--)for(var r=this.Ga[n],e=i.Ga[n],o=this.N;o>=1;o--)r[o]=e[o].color;return this},r.Nb=function(t){return r.xb[t]},r.Ob=function(t){return r.Eb.indexOf(t)+r.Hb},r.prototype.Wa=function(t){return this.Pb(!0,"\n",t||o)},r.prototype.Sa=function(t){return this.Pb(!1,",",t||o)},r.prototype.Pb=function(t,i,n){var e,o,s,h=new r(this.N,"").Ga,a=1;for(o=this.N;o>=1;o--)for(e=1;e<=this.N;e++)s=n(this.Ga[o][e]),null!==s&&(h[o][e]=s,a=Math.max(a,s.length));var u=a,c="          ",f="";for(o=this.N;o>=1;o--){for(t&&(f+="%2d".format(o)+" "),e=1;e<=this.N;e++)s=h[o][e],s.length<u&&(s=c.substr(1,u-s.length)+s),f+=s;f+=i}if(t){for(f+="   ",e=1;e<=this.N;e++)f+=c.substr(1,u-1)+r.Qb(e);f+="\n"}return"\n"!==i&&(f=f.Rb()),f},r.prototype.toString=function(){for(var t="",i=this.N;i>=1;i--){for(var n=1;n<=this.N;n++)t+=e(this.Ga[i][n]);t+="\n"}return t},r.prototype.Ra=function(){return"object"==typeof this.Ga[1][1]?this.Sa(function(t){return e(t.color)}):this.Sa(function(t){return e(t)})},r.prototype.Ta=function(t){var i=t.split(/\"|,/);if(i.length!==this.N)throw new Error("Invalid image: "+i.length+" rows instead of "+this.N);for(var n=this.N;n>=1;n--){var e=i[this.N-n];if(e.length!==this.N)throw new Error("Invalid image: row "+e);for(var o=1;o<=this.N;o++)this.Ga[n][o]=r.Ob(e[o-1])}},r.Sb=function(t){return t.split(",").reverse().join()},r.Tb=function(t){return t.split(",").map(s).join()},r.Ub=function(t){return s(t)},r.Vb=function(t){for(var i="",n=t.split(","),r=n[0].length-1;r>=0;r--){i+=",";for(var e=0;e<n.length;e++)i+=n[e][r]}return i.substr(1)};var c="abcdefghjklmnopqrstuvwxyz";r.ma=function(t,i){var n=c.indexOf(t[0])+1,r=parseInt(t.substr(1,2));if(!n||isNaN(r)){if(i)return null;throw new Error("Illegal move parsed: "+t)}return[n,r]},r.Wb=function(t,i){return c[t-1]+i},r.Qb=function(t){return c[t-1]}},{"./constants":33,"./main":35}],6:[function(t,i,n){"use strict";function r(t,i,n,r){this.s=t,this.mb=[i],this.sb=n,this.color=i.color,this.Xb=null,this.Yb=null,this.Zb=null,this.Qa=r,this.$b=null,this._b=this.ac=0,this.bc=null}var e=t("./constants"),o=t("./Grid"),s=t("./log"),h=e.EMPTY;i.g=r,r.prototype.Oa=function(t,i,n){this.mb.clear(),this.mb.push(t),this.sb=i,this.color=t.color,this.Xb=this.Yb=this.Zb=null,this.Qa=n,this._b=this.ac=0,this.bc=null},r.prototype.clear=function(){for(var t=this.mb.length-1;t>=0;t--)this.mb[t].clear();this.s.Pa(this)},r.prototype.toString=function(t){if(0===t)return"#"+this.Qa;if(1===t)return this.mb[0]+"x"+this.mb.length+"#"+this.Qa;for(var i,n="{group #"+this.Qa+" of "+this.mb.length+" "+o.Nb(this.color)+" stones [",r=this.mb,e=0;i=r[e],e<r.length;e++)n+=i.cc()+",";return n=n.Rb(),n+="], lives:"+this.sb,this.Xb&&(n+=" MERGED with #"+this.Xb.Qa),this.Zb&&(n+=" KILLED by "+this.Zb.cc()),n+="}"},r.prototype.dc=function(){return this.mb.length&&this.mb[0].group===this},r.prototype.Va=function(){return this.toString()},r.prototype.ec=function(){return this.mb.map(function(t){return t.cc()}).sort().join(",")},r.prototype.fc=function(){for(var t,i=[],n=this.mb,r=0;t=n[r],r<n.length;r++)for(var e,o=t.gc,s=0;e=o[s],s<o.length;s++)e.color===h&&i.indexOf(e)<0&&i.push(e);if(i.length!==this.sb)throw new Error("Wrong life count for group");return i},r.prototype.hc=function(){for(var t,i=[],n=1-this.color,r=this.mb,e=0;t=r[e],e<r.length;e++)for(var o,h=t.gc,a=0;o=h[a],a<h.length;a++)o.color===n&&i.indexOf(o.group)<0&&i.push(o.group);return s.ic,i},r.prototype.jc=function(t){for(var i,n=-1,r=t.gc,e=0;i=r[e],e<r.length;e++)if(i.color===h){n++;for(var o,a=i.gc,u=0;o=a[u],u<a.length;u++)if(o.group===this&&o!==t){n--;break}}return s.ic,n},r.prototype.kc=function(t){if(s.ic,this.mb.push(t),this.sb+=this.jc(t),this.sb<0)throw new Error("Unexpected error (lives<0 on connect)");s.ic},r.prototype.lc=function(t){if(s.ic,this.mb.length>1){if(this.sb-=this.jc(t),this.sb<0)throw new Error("Lives<0 on disconnect")}else this.s.Pa(this),s.ic;if(this.mb.pop()!==t)throw new Error("Unexpected error (disconnect order)")},r.prototype.mc=function(t){return this.sb--,this.sb<=0?this.nc(t):void 0},r.prototype.oc=function(t){if(this.sb--,s.ic,this.sb<1)throw new Error("Unexpected error (lives<1 on attack by resucitated)")},r.prototype.pc=function(t){this.sb++,s.ic},r.prototype.qc=function(t,i){if(t.Xb===this||t===this||this.color!==t.color)throw new Error("Invalid merge");s.ic,this.sb+=t.mb.length;for(var n,r=t.mb,e=0;n=r[e],e<r.length;e++)n.rc(this),this.kc(n);t.Xb=this,t.Yb=i,this.s.Ka.push(t),s.ic},r.prototype.sc=function(t){s.ic;for(var i,n=t.mb,r=n.length-1;i=n[r],r>=0;r--)this.lc(i),i.rc(t);this.sb-=t.mb.length,t.Yb=t.Xb=null,s.ic},r.prototype.tc=function(t){for(var i=this.s.Ka,n=i.length-1;n>=0;n--){var r=i[n];if(r.Yb!==t||r.Xb!==this)break;this.sc(r),i.pop()}},r.prototype.nc=function(t){if(s.ic,this.sb<0)throw new Error("Unexpected error (lives<0)");for(var i,n=this.mb,r=0;i=n[r],r<n.length;r++){for(var e,o=i.rb(1-this.color),h=0;e=o[h],h<o.length;h++)e.pc(i);i.uc()}this.Zb=t,this.s.Ja.push(this),s.ic},r.prototype.vc=function(){this.Zb=null,this.sb=1;for(var t,i=this.mb,n=0;t=i[n],n<i.length;n++){t.wc(this);for(var r,e=t.rb(1-this.color),o=0;r=e[o],o<e.length;o++)r.oc(t)}},r.xc=function(t){for(var i=t.s.Ja,n=i.length-1;n>=0;n--){var r=i[n];if(r.Zb!==t)break;i.pop(),s.ic,r.vc()}}},{"./Grid":5,"./constants":33,"./log":34}],7:[function(t,i,n){"use strict";function r(){}var e=t("./constants"),o=t("./Grid"),s=e.j,h=e.k;i.g=r,r.T=function(t,i){if(0===i||"0"===i)return 0;if("number"==typeof i||i.indexOf("=")<0)return r.yc(t,~~i);var n;switch(i[0]){case"B":n=s;break;case"W":n=h;break;default:throw new Error('Invalid "hand" command: '+i)}for(var e,a=i.indexOf("="),u=i.substring(a+1).split("-"),c=u,f=0;e=c[f],f<c.length;f++){var l=o.ma(e);t.ja(l[0],l[1],n)}return u.length},r.yc=function(t,i){var n=t.N;if(i>4&&(9>n||n%2===0)&&(i=4),5>=n)return 0;for(var r=13>n?2:3,e=1+r,o=(1+n)/2,h=n-r,a=0;i>a;a++){switch(i%2===1&&i>4&&a===i-1&&(a=8),a){case 0:var u=e,c=e;break;case 1:u=h,c=h;break;case 2:u=e,c=h;break;case 3:u=h,c=e;break;case 4:u=e,c=o;break;case 5:u=h,c=o;break;case 6:u=o,c=e;break;case 7:u=o,c=h;break;case 8:u=o,c=o}t.ja(u,c,s)}return i}},{"./Grid":5,"./constants":33}],8:[function(t,i,n){"use strict";function r(t){this.zc=t,this.Ac=new s.Cc.Bc(t)}function e(t){return 1!==t?t+" points":"1 point"}var o=t("./constants"),s=t("./main"),h=t("./Grid"),a=o.j,u=o.k;i.g=r,r.prototype.Dc=function(){var t=this.Ec()[0];return t[a]-t[u]},r.prototype.Fc=function(){return this.Gc(this.Ec())},r.prototype.Hc=function(){return this.Ec()},r.prototype.Ic=function(){return this.Ac.Ic()},r.prototype.Ec=function(){var t=this.zc,i=t.s,n=t.u;if(null!==t.G)return["resi",1-t.G,t.H];this.Ac.Jc(i);var r=this.Ac.Kc,e=this.Ac.Lc,o=[r[a]+e[u],r[u]+e[a]+n],s=[[r[a],e[u],0],[r[u],e[a],n]];return[o,s]},r.prototype.Gc=function(t){if("resi"===t[0]){var i,n=h.xb[t[1]],r=h.xb[1-t[1]];switch(t[2]){case"time":i=r+" ran out of time";break;case null:case void 0:i=r+" resigned";break;default:i=r+" disqualified: "+t[2]}return[n+" won ("+i+")"]}if(!t||2!==t.length)throw new Error("Invalid score info: "+t);var o=t[0],s=t[1];if(o.length!==s.length)throw new Error("Invalid score info");var c=[],f=o[a]-o[u];c.push(this.Mc(f));for(var l=a;u>=l;l++){var p=s[l],g=p[0],v=p[1],d=p[2],b=0!==v?" "+(0>v?"-":"+")+" "+Math.abs(v)+" prisoners":"",y=d>0?" + "+d+" komi":"",m=v||d?" ("+g+b+y+")":"";c.push(h.Nb(l)+": "+e(o[l])+m)}return c},r.prototype.Mc=function(t){if(0===t)return"Tie game";var i=t>0?a:u;return h.Nb(i)+" wins by "+e(Math.abs(t))}},{"./Grid":5,"./constants":33,"./main":35}],9:[function(t,i,n){"use strict";function r(){this.text=null,this.Cd=null,this.$=0,this.Dd=null,this.o=null,this.A=a,this.Ed=null,this.oa=0}function e(t){if(t.Id("a","z"))return t.charCodeAt()-97;if(t.Id("A","Z"))return t.charCodeAt()-65;throw new Error("Invalid coordinate value: "+t)}function o(t){for(var i=0;;){var n=t.indexOf("]",i);if(-1===n)return-1;if("\\"!==t[n-1])return n;i=n+1}}var s=t("./constants"),h=t("./log"),a=s.j,u=s.k,c=["B","W"],f=19,l={Nc:["int",null],Oc:["int","fileFormat"],Pc:["int","boardSize"],Qc:["move",null],Rc:["move",null],Sc:["int","handicap"],Tc:["real","komi"],Uc:["text","rules"],Vc:["text","result"],Wc:["text","playerBlack"],Xc:["text","playerWhite"],Yc:["int","blackSpecies"],Zc:["int","whiteSpecies"],$c:["flag","enforceLosingOnTime"],_c:["text","source"],ad:["text","gameId"],bd:["text","application"],dd:["text","blackRank"],ed:["text","whiteRank"],fd:["text","blackTeam"],gd:["text","whiteTeam"],hd:["text","timeLimit"],jd:["text","overtimeMethod"],kd:["text","event"],ld:["text","round"],md:["text","date"],nd:["text","place"],od:["text","gameName"],pd:["text","openingPlayed"],qd:["text","gameComment"],rd:["text","comment"],sd:["text","nodeName"],td:["text","userName"],ud:["text","analyseAuthor"],vd:["text","copyright"],wd:["text","characterSet"],xd:["text",null]},p={B:"move",W:"move",Qc:"move",Rc:"move",yd:null,zd:null,rd:null,Ad:null,Bd:null,sd:null};i.g=r,r.ba=function(t){return t.trim().startsWith("(;")},r.prototype.Z=function(t,i){if(!r.ba(t))throw new Error("Not an SGF file");return this.text=t,this.Cd=[],this.Dd=[[],[]],this.Fd(t),this.Gd(),this.Hd(i),this.o},r.prototype._=function(){return this.Ed};var g="abcdefghjklmnopqrstuvwxyz";r.prototype.Jd=function(t){if(this.$)throw new Error("Size (SZ) set twice or after the first move");this.$=t},r.prototype.Kd=function(t){if(this.$||this.Jd(f),""===t||"tt"===t&&this.$<=19)return"pass";var i=g[e(t[0])],n=this.$-e(t[1]);return i+n},r.prototype.Ld=function(t,i,n){n||this.oa++;var r=t===this.A?"":c[t];this.oa?(this.A=1-t,this.Ed.push(r+i)):this.Dd[t].push(i)},r.prototype.Md=function(t,i){switch(i){case"text":return t;case"int":return parseInt(t);case"real":return parseFloat(t);case"flag":return!0;case"move":return this.Kd(t);default:throw new Error("Invalid tag type: "+i)}},r.prototype.Nd=function(t,i){var n=p[t];if(void 0===n)return h.warn&&h.warn("Unknown property "+t+"["+i+"] ignored");if(n){var r=this.Md(i,n);switch(t){case"B":return this.Ld(a,r);case"W":return this.Ld(u,r);case"AB":return this.Ld(a,r,!0);case"AW":return this.Ld(u,r,!0)}}},r.prototype.Od=function(t){var i=this.Dd[t];return i.length?"hand:"+c[t]+"="+i.join("-")+",":""},r.prototype.Hd=function(t){this.Ed=[],this.oa=0,this.A=null;for(var i=1;i<this.Cd.length;i++)for(var n=this.Cd[i],r=0;r<n.length;r+=2){var e=n[r]||e,o=n[r+1];this.Nd(e,o)}var s=t?t-1:this.Ed.length;this.Ed=(this.Od(a)+this.Od(u)+this.Ed.slice(0,s).join(",")).ua(",")},r.prototype.Pd=function(t,i){var n=l[t];if(void 0===n)return this.o[t]=i,h.info&&h.info("Unknown property in SGF header: "+t+"["+i+"]");var r=n[0],e=n[1],o=this.Md(i,r);return e&&(this.o[e]=o),o},r.prototype.Gd=function(){this.$=null,this.o={$:f,u:0,t:0};for(var t=this.Cd[0],i=0;i<=t.length-1;i+=2){var n=t[i],r=t[i+1],e=this.Pd(n,r);switch(n){case"GM":if(1!==e)throw new Error("SGF game is not a GO game");break;case"FF":(3>e||e>4)&&h.warn;break;case"SZ":this.Jd(e);break;case"AB":this.Ld(a,e,!0);break;case"AW":this.Ld(u,e,!0)}}},r.prototype.Fd=function(t){for(t=this.Qd(t),t=this.Rd("(",t),t=this.Sd(t),this.Td=!1;!this.Td;)t=this.Sd(t);return this.Rd(")",t)},r.prototype.Sd=function(t){if(t=this.Qd(t),";"!==t[0])return this.Td=!0,t;t=this.Rd(";",t);for(var i=[];;){for(var n=0;t[n]&&t[n].Id("A","Z");)n++;var r=t.substr(0,n);for(""===r&&this.Ud("Property name expected",t),i.push(r),t=this.Rd(r,t);;){t=this.Rd("[",t);var e=o(t);0>e&&this.Ud("Missing ']'",t);var s=t.substr(0,e);if(i.push(s),t=this.Rd(s+"]",t),"["!==t[0])break;i.push(null)}if(!t[0]||!t[0].Id("A","Z"))break}return this.Cd.push(i),t},r.prototype.Qd=function(t){return t.trim()},r.prototype.Rd=function(t,i){return i.startsWith(t)||this.Ud(t+" expected",i),i.replace(t,"").trim()},r.prototype.Ud=function(t,i){throw new Error("Syntax error: '"+t+"' at ..."+i.substr(0,20)+"...")}},{"./constants":33,"./log":34}],10:[function(t,i,n){"use strict";function r(t,i,n,r){this.s=t,this.tb=i,this.ub=n,this.color=r,this.group=null,this.gc=[],this.Xd=[]}var e=t("./constants"),o=t("./Grid"),s=t("./Group"),h=e.EMPTY,a=e.Ca,u=e.Vd,c=e.Wd;i.g=r;var f=r.Yd=[[0,1],[1,0],[0,-1],[-1,0]],l=r.Zd=[[1,1],[1,-1],[-1,-1],[-1,1]];r.prototype.clear=function(){this.color=h,this.group=null},r.prototype.Ha=function(){for(var t=this.s.Fa,i=c;i>=u;i--){var n=t[this.ub+f[i][1]][this.tb+f[i][0]];n!==a&&this.gc.push(n),this.Xd.push(n),n=t[this.ub+l[i][1]][this.tb+l[i][0]],this.Xd.push(n)}},r.prototype.toString=function(){return this.color===h?this.cc():(this.color?"W":"B")+"-"+this.cc()},r.prototype.cc=function(){return o.Wb(this.tb,this.ub)},r.prototype.$d=function(){return this._d().map(function(t){return t.cc()}).sort().join(",")},r.prototype.cb=function(){return this.color===h},r.prototype.ae=function(){return 2===this.gc.length},r.prototype.be=function(){var t=this.s,i=t.N-1;return t.ab(1===this.tb?2:i,1===this.ub?2:i)},r.prototype.ce=function(){return this.gc.length<=3},r.prototype.de=function(){var t=this.s.N,i=this.tb,n=this.ub;return Math.min(Math.min(i-1,t-i),Math.min(n-1,t-n))},r.prototype.Xa=function(t){for(var i=this.gc.length-1;i>=0;i--){var n=this.gc[i];if(n.color===h)return!1;if(n.color!==t){if(1===n.group.sb)return!1}else if(n.group.sb>1)return!1}return!0},r.prototype._a=function(t){for(var i=null,n=this.gc.length-1;n>=0;n--){var r=this.gc[n].group;if(r&&r.color===1-t&&1===r.sb){if(i)return!1;i=r}}if(!i)return!1;if(1!==i.mb.length)return!1;var e=i.mb[0];if(this.s.kb()!==e)return!1;var o=this.s.jb();if(!o||o.Zb!==e||1!==o.mb.length)return!1;var s=o.mb[0];return s.tb===this.tb&&s.ub===this.ub},r.prototype.uc=function(){this.color=h,this.group=null},r.prototype.wc=function(t){this.group=t,this.color=t.color},r.prototype.hb=function(t){this.color=t;var i=this.rb(t);0===i.length?this.group=this.s.Na(this,this.ee()):(this.group=i[0],this.group.kc(this));for(var n=this.rb(1-t),r=n.length-1;r>=0;r--)n[r].mc(this);for(var e=1;e<i.length;e++)this.group.qc(i[e],this)},r.prototype.gb=function(){this.group.tc(this),this.group.lc(this);for(var t=this.rb(1-this.color),i=t.length-1;i>=0;i--)t[i].pc(this);this.group=null,this.color=h,s.xc(this)},r.prototype.rc=function(t){this.group=t},r.prototype.rb=function(t){for(var i=[],n=this.gc,r=n.length-1;r>=0;r--){var e=n[r];e.color===t&&i.indexOf(e.group)<0&&i.push(e.group)}return i},r.prototype._d=function(){for(var t=[],i=this.gc,n=i.length-1;n>=0;n--){var r=i[n];r.color===h&&t.push(r)}return t},r.prototype.ee=function(){for(var t=0,i=this.gc,n=i.length-1;n>=0;n--)i[n].color===h&&t++;return t},r.prototype.fe=function(t,i){for(var n=0,r=this.gc,e=r.length-1;e>=0;e--)r[e].color===t&&(i&&i.push(r[e]),n++);return n},r.prototype.ge=function(t){for(var i=this.gc,n=i.length-1;n>=0;n--)if(i[n].group===t)return!0;return!1}},{"./Grid":5,"./Group":6,"./constants":33}],11:[function(t,i,n){"use strict";function r(t){o.call(this,t),this.he=this.ie("infl",.07,.01,.5),this.je=t.me.le.ke.Ga,this.ne=t.me.oe}var e=t("../../constants"),o=(t("../../Grid"),t("./Heuristic")),s=t("util").inherits,h=t("../../log"),a=e.EMPTY,u=e.Ca,c=e.ALWAYS;e.NEVER;s(r,o),i.g=r,r.prototype.pe=function(t,i,n){var r=this.s.ab(t,i);return this.je[i][t]<0&&!this.ne.qe(r)?(h.debug,0):this.re(r,n)+this.re(r,1-n)},r.prototype.re=function(t,i){var n=this.se(t,i);return n?n:this.te(t,i)},r.prototype.te=function(t,i){for(var n=!0,r=null,e=null,o=null,s=!1,h=0,f=0;8>f;f++){var l=t.Xd[f];if(n=!n,l!==u)switch(l.color){case a:continue;case i:if(l.group.ac===c)continue;if(r){if(l.group===r)continue;if(!n&&o&&l.group!==o)return 0;n||o||(o=l.group),e=l.group,s=s||n}else r=l.group,n||(o=l.group),s=n;break;default:if(l.group.ac===c)continue;if(l.group.sb<2)continue;h++}}return e&&s?h>=3?0:this.Ec(t,i,[r,e],h,"diagonal"):0},r.prototype.se=function(t,i){for(var n,r,e,o,s,h=0,u=0,c=t.gc.length-1;c>=0;c--){var f=t.gc[c];switch(f.color){case a:continue;case i:h++,n?e?f.group!==e.group?s=f:o=f:f.group!==n.group?e=f:r=f:n=f;break;default:u++}}if(!e)return 0;if(4===h)return 0;var l=s?3:2,p=s?[n.group,e.group,s.group]:[n.group,e.group];if(3===h)return 0===u&&n.group.sb>1&&e.group.sb>1&&(!s||s.group.sb>1)?this.ue(t,i,n,e,s):this.Ec(t,i,p,u,"direct3");if(2===l&&3===h){if(o){r=o;var g=n;n=e,e=g}n.tb!==e.tb&&n.ub!==e.ub||(n=r)}if(n.tb!==e.tb&&n.ub!==e.ub){if(0===this.ve(n,e,i))return this.ue(t,i,n,e);u++}return this.Ec(t,i,p,u,"direct")},r.prototype.ue=function(t,i,n,r,e){if(i!==this.color)return 0;h.debug;var o=this.ye.xe.we(t);if(o.ze(t)&&!e){if(this.ye.Ae)return.5;var s=this.Ce.Be(n.group.$b);return s>0&&1>s?.5:0}return o.color!==i?0:this.ye.Ae?-.5:-1},r.prototype.Ec=function(t,i,n,r,e){var o=0;return 0===r?(o=this.he/this.De[i][t.ub][t.tb],h.debug):this.Ce.Ee(n,t,1-i),o},r.prototype.Fe=function(t,i){return[this.s.ab(t.tb,i.ub),this.s.ab(i.tb,t.ub)]},r.prototype.ve=function(t,i,n){var r=Math.abs(i.tb-t.tb),e=Math.abs(i.ub-t.ub);if(r+e===1)return 0;var o,s=1-n,h=0;if(1===r&&1===e){var a=this.Fe(t,i),u=a[0],c=a[1];if(u.color===n||c.color===n)return 0;if(u.color===s&&h++,c.color===s&&h++,0===h)return 0;if(2===h)return 99;var f=u.color===s?0:1,l=a[f],p=a[1-f];return t.ce()||i.ce()?1===p.de()?l.group.sb>2?1:0:0!==p.fe(s)?1:0:1===p.de()?0!==p.fe(s)?1:0:1}if(r+e===2){if(o=this.s.ab((t.tb+i.tb)/2,(t.ub+i.ub)/2),o.color===n)return 0;if(o.color===s)return o.group.sb;for(var g=o.gc.length-1;g>=0;g--)o.gc[g].color===s&&h++;return h>=1?1:t.ce()&&i.ce()?0:.5}if(r+e===3&&t.ce()&&i.ce()){for(var v=this.betweenStones(t,i),d=0,b=v.length-1;b>=0;b--)o=v[b],o.color===s&&(d+=o.group.sb),0!==o.fe(s)&&(d+=1);return d}return r+e},r.prototype.Ge=function(t,i){for(var n=[],r=t.gc.length-1;r>=0;r--){var e=t.gc[r];switch(e.color){case a:n.push(e);break;case i:if(e.group.sb>1&&e.group.ac<c)return e;break;default:if(1===e.group.sb)return e.group.hc()[0].mb[0]}}for(var o=2,s=n.length-1;s>=0;s--)for(var h=n[s],u=h.gc.length-1;u>=0;u--){var f=h.gc[u];if(f!==t&&f.color===i&&f.group.ac!==c){var l=this.ve(t,f,i);if(!(l>=2)&&(o-=2-l,.5>=o))return f}}return null}},{"../../Grid":5,"../../constants":33,"../../log":34,"./Heuristic":14,util:47}],12:[function(t,i,n){"use strict";function r(t){e.call(this,t)}var e=t("./Heuristic"),o=t("util").inherits;o(r,e),i.g=r,r.prototype.He=function(){this.ye.xe.Ie(),this.Je()},r.prototype.Je=function(){var t=this.ye.xe.Ke;for(var i in t){var n=~~i,r=t[n],e=r.group;e.bc=r.Le&&r.Le.group}}},{"./Heuristic":14,util:47}],13:[function(t,i,n){"use strict";function r(t){s.call(this,t),this.Da=new o(this.N,a),this.Me=t.me.Ne}var e=t("../../constants"),o=t("../../Grid"),s=t("./Heuristic"),h=t("util").inherits,a=e.Ba;h(r,s),i.g=r,r.prototype.He=function(){var t=this.s;this.ye.xe.Oe(t,this.Da),this.Je()},r.prototype.Je=function(){var t=this.Pe,i=t.Qe,n=t.Re,r=this.ye.xe.Ke;for(var e in r){var o=~~e,s=r[o],h=s.group;h._b=i[o],h.ac=n[o];for(var a=s.Se.length-1;a>=0;a--){var u=s.Se[a];u.ze&&this.Me.Te(u.Ue,h.color)}}}},{"../../Grid":5,"../../constants":33,"./Heuristic":14,util:47}],14:[function(t,i,n){"use strict";function r(t){this.ye=t,this.Xe(),this.s=t.s,this.N=t.s.N,this.ke=new o(this.N,0,a),this.Ye=t.Ye,this.color=this.Ze=null,this.$e()}var e=t("../../constants"),o=t("../../Grid"),s=t("../../log"),h=t("../../main"),a=e.Ba,u=e.Ve,c=e.We;i.g=r,r.prototype.Xe=function(){var t=this.constructor;this.name=t.name||h._e(t),this.name.length<5&&(this.name+=this.ye.af.length)},r.prototype.$e=function(){var t=this.ye.me;this.bf=t.cf,this.Ce=t.Ne,this.Pe=t.df,this.De=t.ef?t.ef.De:null},r.prototype.ff=function(t){this.color=t,this.Ze=1-t},r.prototype.He=function(t,i){for(var n=s.level,r=this.ye.color,e=this.ke.Ga,o=1;o<=this.N;o++)for(var h=1;h<=this.N;h++){var a=t[o][h];if(!(u>a)){a===c&&this.name===this.ye.gf&&s.hf(s["if"]);var f=e[o][h]=this.pe(h,o,r);i[o][h]+=f,a===c&&s.hf(n)}}},r.prototype.jf=function(t,i,n){var r=this.ke.Ga[i][t];r&&(n[this.name]=r)},r.prototype.ie=function(t,i,n,r){return this.ye.kf.get(this.name+"-"+t,i,n,r)}},{"../../Grid":5,"../../constants":33,"../../log":34,"../../main":35}],15:[function(t,i,n){"use strict";function r(t){o.call(this,t),this.lf=null,this.je=t.me.le.ke.Ga}var e=t("../../constants"),o=(t("../../Grid"),t("./Heuristic")),s=t("util").inherits,h=t("../../log"),a=e.ALWAYS,u=e.EMPTY;s(r,o),i.g=r,r.prototype.mf=function(t,i){for(var n=t.hc(),r=n.length-1;r>=0;r--){
var e=n[r];if(!(e.sb>1)){var o=e.mb.length;if(o>=i)return!0;for(var s=e.hc(),h=s.length-1;h>=0;h--)if(o+=s[h].sb-1,o>=i)return!0}}return!1};var c=1,f=1.1;r.prototype.nf=function(t,i){for(var n=0,r=0,e=0,o=t.gc.length-1;o>=0;o--){var s=t.gc[o];switch(s.color){case u:e+=.01;break;case i:e+=.01*(s.group.sb-1),s.group._b===a&&(e+=2),n+=1e-4;break;default:if(s.group.bc)return f;if(s.group.sb>1)break;r+=s.group.mb.length}}return r+e+n},r.prototype.pf=function(t,i,n){for(var r=!1,e=!1,o=i.length-1;o>=0;o--){var s=i[o];1===s.sb&&(n||!this.qf(s,n)||this.mf(s,1)?(e=!0,n||this.Ce.rf(s,t)):this.ye.Ae&&(r=!0))}return r&&this.Ce.sf(t),e},r.prototype.tf=function(t,i,n){if(!i.ge(n))return!1;for(var r=i.rb(n.color),e=r.length-1;e>=0;e--){var o=r[e];if(o.sb>2)return!1;if(!t.ge(o))return!1}return!0},r.prototype.uf=function(t,i,n,r,e,o){for(var s,a=!1,u=t.rb(r),c=i.length-1;c>=0;c--)if(s=i[c],2===s.sb&&!this.mf(s,2)&&(0!==n.length||1!==u.length||2!==u[0].sb)){if(1===n.length&&0===u.length){if(!this.tf(t,n[0],s))continue;a=!0,h.debug}!e&&s.$b.vf()||o.push(s)}return a},r.prototype.wf=function(t,i,n){return n&&i.sb===n.sb&&n.dc()?!(t.ge(n)&&n.jc(t)<1):!1},r.prototype.xf=function(t,i,n,r){for(var e=!1,o=i.length-1;o>=0;o--){var s=i[o],h=s.sb,a=s.bc;h>2&&this.wf(t,s,a)?(n||this.Ce.yf(s,t),e=!0):h>=2&&0===n&&!r&&(n||this.Ce.zf(s,t))}return e},r.prototype.Af=function(){this.lf=[]},r.prototype.pe=function(t,i,n){return this.Bf(t,i,n,0),0},r.prototype.Bf=function(t,i,n,r){var e=this.s.ab(t,i),o=e._d(),s=e.rb(1-n),a=[],u=this.uf(e,s,o,n,r,a);if(0===r&&u&&this.lf.push(e),!u&&o.length<=1){var f=this.nf(e,n);if(f!==c&&(.02>f||f>1&&1.01>f))return!1}var l=this.pf(e,s,r),p=!u&&this.je[i][t]<0,g=this.xf(e,s,r,p);if(!a.length)return l||g;this.s.fb(t,i,n);for(var v=[!1,!1,!1],d=a.length-1;d>=0;d--)if(h.debug,!this.qf(a[d],r)){if(1===a.length){a.pop();break}v[d]=!0}this.s.ib();var b=this.Cf(e,a,v,r);return h.debug&&(l||g||b),l||g||b},r.prototype.Cf=function(t,i,n,r){switch(i.length){case 0:return!1;case 1:return n[0]?!1:(r||this.Ce.rf(i[0],t),!0);case 3:case 2:return r||(n[1]?this.Ce.rf(i[0],t):this.Ce.rf(i[1],t)),!0;default:throw new Error("Unexpected in Hunter#getMultipleChaseThreat")}},r.prototype.qf=function(t,i){var n=t.fc();if(1!==n.length)throw new Error("Unexpected: hunter #1: "+n.length);var r=n[0],e=this.s.fb(r.tb,r.ub,t.color),o=this.Df(e,i);return this.s.ib(),h.debug,o},r.prototype.Ef=function(t){for(var i=1-t.color,n=t.gc,r=n.length-1;r>=0;r--){var e=n[r];if(e.color===i){var o=e.group;if(1===o.sb){var s=o.fc()[0];return s.ge(t.group)?this.qf(o,1)?1:-1:1}}}return 0},r.prototype.Df=function(t,i){var n=t.group;if(n.sb<=1)return!0;if(n.sb>2)return!1;var r=this.Ef(t);if(0!==r)return 0>r;var e=t._d();if(2!==e.length&&(e=n.fc()),2!==e.length)throw new Error("Unexpected: hunter #2");var o=e[0],s=e[1];h.debug;var a=1-n.color;return this.Bf(o.tb,o.ub,a,i+1)||this.Bf(s.tb,s.ub,a,i+1)},r.prototype.Ff=function(t){return this.Df(t,1)},r.prototype.Gf=function(t,i,n){return this.Bf(t,i,n,1)},r.prototype.qe=function(t){return-1!==this.lf.indexOf(t)}},{"../../Grid":5,"../../constants":33,"../../log":34,"./Heuristic":14,util:47}],16:[function(t,i,n){"use strict";function r(t){s.call(this,t),this.Hf=[new o(this.N,a),new o(this.N,a)],this.De=[this.Hf[c].Ga,this.Hf[f].Ga]}var e=t("../../constants"),o=t("../../Grid"),s=t("./Heuristic"),h=t("util").inherits,a=e.Ba,u=e.EMPTY,c=e.j,f=e.k,l=2,p=1;h(r,s),i.g=r,r.prototype.He=function(){this.Hf[c].init(0),this.Hf[f].init(0);for(var t=1;t<=this.N;t++)for(var i=1;i<=this.N;i++){var n=this.s.ab(i,t),r=n.color;if(r!==u)for(var e,o=this.De[r],s=n.gc,h=0;e=s[h],h<s.length;h++)if(e.color===u){o[e.ub][e.tb]+=l;for(var a,g=e.gc,v=0;a=g[v],v<g.length;v++)a.color===u&&a!==n&&(o[a.ub][a.tb]+=p)}}}},{"../../Grid":5,"../../constants":33,"./Heuristic":14,util:47}],17:[function(t,i,n){"use strict";function r(t){a.call(this,t),this.debug=!1,this.Da=new h(this.N,null),this.If=[],this.Jf="",this.Kf=this.ie("spaceInvasion",2,.01,4),this.Lf=this.ie("pressure",1,.01,2),this.Mf=this.ie("eyeCloser",1,.01,1),this.Nf=this.ie("wideSpaceToEye",.5,.01,1),this.Of=this.ie("potEyeCoeff2",.78,.75,.85)}function e(){this.Sf=null,this.Tf=0,this.Uf=[],this.Vf=[],this.Wf=[]}function o(t,i,n){this.name=t,this.Tf=i,this.group=n,this.$f=1/0}var s=t("../../constants"),h=t("../../Grid"),a=t("./Heuristic"),u=t("util").inherits,c=t("../../log"),f=s.ALWAYS,l=.1;u(r,a),i.g=r,r.prototype.He=function(){this.debug=this.ye.Pf,this.Da.init(null),this.If.length=0},r.prototype.Qf=function(t,i){a.prototype.He.call(this,t,i)},r.prototype.pe=function(t,i){var n=this.Da.Ga[i][t];return n?n.Rf():0},r.prototype.jf=function(t,i,n){var r=this.Da.Ga[i][t];r&&r.Rf(n,this.name)},e.prototype.Rf=function(t,i){var n=this.Tf;t&&n&&(t[i+"-base"]=n);var r=this.Uf;if(!r.length)return n;for(var e=r.length-1;e>=0;e--){var o=r[e],s=o.Tf*this.Vf[e];if(n+=s,t){var h=this.Vf[e],a=1!==h?" factor:"+h.toFixed(2):"";t[i+"-"+o+a]=s}}return n},r.prototype.Xf=function(t,i){return this.Da.Ga[i][t]},r.prototype.Yf=function(t,i){var n=this.Da.Ga[i][t];return n?n:(this.Da.Ga[i][t]=n=new e,n)},r.prototype.Te=function(t,i){this.Yf(t.tb,t.ub).Sf=i},r.prototype.Zf=function(t,i){var n=this.Xf(t.tb,t.ub);return n&&n.Sf===i},o.prototype.toString=function(){return this.name+(this.$f!==1/0?" minMoves:"+this.$f:"")+" score:"+this.Tf.toFixed(2)},r.prototype._f=function(t,i,n){this.Jf=t+" on "+i.toString(1),n.tb===this.ye.ag&&n.ub===this.ye.bg?c.hf(c["if"]):c.level===c["if"]&&c.hf(c.cg)},r.prototype.dg=function(t){var i=this.If[t.Qa];if(i)return i;for(var n=2*t.mb.length,r=t.fc(),e=0,s=r.length-1;s>=0;s--)e+=r[s].ee();return n+=this.Kf*Math.max(0,e-1),this.If[t.Qa]=i=new o("death of "+t.toString(1),n,t),i},r.prototype.eg=function(t,i,n,r){if(!i)throw new Error("Unexpected");n=n||1,r=r||1,c.debug;var e=this.Yf(i.tb,i.ub),o=e.Uf,s=e.Vf,h=e.Wf,a=o.indexOf(t);return 0>a?(o.push(t),s.push(n),h.push(r)):(s[a]=Math.max(s[a],n),h[a]=Math.min(h[a],r)),t.$f=Math.min(t.$f,r),t},r.prototype.fg=function(t){for(var i=0,n=t.color,r=this.De[1-n],e=t.fc(),o=e.length-1;o>=0;o--){var s=e[o];if(!(r[s.ub][s.tb]>0)){var h=this.ye.xe.we(s);void 0===h.color&&i++}}return i},r.prototype.gg=function(t){return t>=2.5?1:1.5>t?0:2>t?.5:this.Of},r.prototype.Be=function(t){var i=t.hg;return this.ig(i?i.jg:[t])},r.prototype.ig=function(t,i){if(1===t.length){var n=t[0].group;if(n._b===f)return 1;if(n.xDEAD===f)return 0}for(var r=i||0,e=t.length-1;e>=0;e--)r+=t[e].kg();var o=this.gg(r);if(1===o)return c.debug,1;var s=0;for(e=t.length-1;e>=0;e--)s+=this.fg(t[e].group);return s*=this.Nf,this.gg(r+s)},r.prototype.lg=function(t,i,n,r,e,o){r=r||1;var s=this.ig(t,o);if(r*=1-s,l>r)return void c.debug;for(var h=e||0,a=t.length-1;a>=0;a--)h+=t[a].group.sb;for(a=t.length-1;a>=0;a--)this.mg(t[a].group,i,n,r,h)},r.prototype.mg=function(t,i,n,r,e){if(!(l>r)){var o=this.dg(t);return n||this.ng(t,i,r,e),this.eg(o,i,r,e)}},r.prototype.ng=function(t,i,n,r){if(!(1===t.mb.length&&t.mb[0].ae()||0===i.ee()&&t.mb.length<3)){r=r||1;for(var e=t.hc(),o=e.length-1;o>=0;o--){var s=e[o];s._b!==f&&s.sb===r&&(1===s.sb&&this.mg(s,i,!0,n,r),this.og(s,i,n,r))}}},r.prototype.og=function(t,i,n,r){for(var e=t.$b.pg(i),o=e.length-1;o>=0;o--)this.lg(e[o],i,!0,n,r)},r.prototype.zf=function(t,i){var n=1/(t.sb+1)*this.Lf;if(t.ac===f){if(!this.ye.Ae)return 0;n=this.Ye}this.Yf(i.tb,i.ub).Tf+=n,this.debug&&i.tb===this.ye.ag&&i.ub===this.ye.bg&&c.qg("MoveInfo "+h.Nb(1-t.color)+" - pressure at "+i+": "+n.toFixed(2))},r.prototype.sf=function(t){this.Yf(t.tb,t.ub).Tf+=this.Ye},r.prototype.yf=function(t,i){this.debug&&this._f("race",t,i);var n=t.$b,r=n.hg?n.hg.jg:[n];this.lg(r,i,!1)},r.prototype.rg=function(t,i,n,r){this.debug&&this._f("eye threat",t,i);var e=t.$b,o=e.hg?e.hg.jg:[e];return this.lg(o,i,n===t.color,void 0,void 0,-r),!0},r.prototype.Ee=function(t,i,n){var r=t[0];this.debug&&this._f("cut",r,i);for(var e=n===r.color,o=r.$b.sg(t,i),s=o.length-1;s>=0;s--)this.lg(o[s],i,e,void 0,1)},r.prototype.rf=function(t,i){this.debug&&this._f("kill",t,i);for(var n=t.$b.pg(i),r=n.length-1;r>=0;r--)this.lg(n[r],i,!1);this.mg(t,i,!1,1,t.sb)},r.prototype.tg=function(t,i){this.debug&&this._f("rescue",t,i),this.og(t,i),this.mg(t,i,!0)}},{"../../Grid":5,"../../constants":33,"../../log":34,"./Heuristic":14,util:47}],18:[function(t,i,n){"use strict";function r(t){o.call(this,t),this.ne=null}var e=t("../../Grid"),o=t("./Heuristic"),s=t("util").inherits,h=t("../../log");s(r,o),i.g=r,r.prototype.Af=function(){this.ne||(this.ne=this.ye.me.oe)},r.prototype.pe=function(t,i,n){if(this.De[1-n][i][t]<2&&this.De[n][i][t]<2&&0===this.s.ab(t,i).fe(n))return 0;var r,o=this.s.fb(t,i,n),s=o.group,a=0;return h.debug&&(r=e.Wb(t,i)),1===s.sb?1===s.mb.length&&o._d()[0]._a(this.Ze)?h.debug:(a-=2*s.mb.length,h.debug):2===s.sb&&(h.debug,this.ne.Ff(o)&&(a-=2*s.mb.length,h.debug)),this.s.ib(),a}},{"../../Grid":5,"../../log":34,"./Heuristic":14,util:47}],19:[function(t,i,n){"use strict";function r(t){s.call(this,t),this.wg=[new o(this.N,u),new o(this.N,u)],this.Me=t.me.Ne}var e=t("../../constants"),o=t("../../Grid"),s=t("./Heuristic"),h=t("util").inherits,a=t("../../log"),u=e.Ba,c=e.EMPTY,f=e.j,l=e.k,p=e.ug,g=e.vg;h(r,s),i.g=r,r.prototype.He=function(){this.xg()},r.prototype.xg=function(){this.wg[p].init(c),this.wg[g].init(c);for(var t=this.N;t>=1;t--)for(var i=this.N;i>=1;i--){var n=this.s.ab(i,t);if(n.color===c){var r=this.yg(i,t,n);if(null!==r){var e=this.ye.xe.we(n);if(!e.zg&&!this.Me.Zf(n,r)){for(var o=n.gc,s=null,h=this.De[1-r],u=1,f=o.length-1;f>=0;f--){var l=o[f];l.color===r&&(s=l.group),1!==u||l.ce()||0!==h[l.ub][l.tb]||l.ee()!==l.gc.length||(u=2)}if(!s){if(!n.ae())continue;if(s=n.be().group,!s)continue}var v=(i+t)%2,d=this.wg[v].Ga;d[t][i]=r,s.$b.Ag(v,u),a.debug}}}}},r.prototype.yg=function(t,i,n){var r=this.De[f][i][t],e=this.De[l][i][t],o=r>e?f:l,s=Math.max(r,e),h=Math.min(r,e);if(h>1)return null;var a=0,u=this.N;if(1===h){if(this.bf.Ge(n,1-o)&&n.ee()>1)return null;n.ae()&&n.be().color===c&&a++}return 1!==t&&t!==u&&1!==i&&i!==u||a++,0>s+a-3-h?null:o}},{"../../Grid":5,"../../constants":33,"../../log":34,"./Heuristic":14,util:47}],20:[function(t,i,n){"use strict";function r(t){h.call(this,t),this.Fg=new s(this.N,f),this.Gg=this.Fg.Ga,this.Hg=new s(this.N,f),this.Hf=[new s(this.N,f),new s(this.N,f)],this.Ig=new s(this.N,f),this.Jg(),this.Kg=null,this.Qe=[],this.Re=[]}function e(t,i,n){switch(t){case d:return[i,1];case b:return[1,i];case y:return[i,n];case m:return[n,i]}}var o=t("../../constants"),s=t("../../Grid"),h=t("./Heuristic"),a=t("util").inherits,u=t("../../log"),c=t("../../Stone"),f=o.Ba,l=o.EMPTY,p=o.j,g=o.k,v=o.NEVER,d=o.Bg,b=o.Cg,y=o.Dg,m=o.Eg,k=o.Vd,w=o.Wd,x=s.Lb,j=s.Kb,G=c.Yd,N=c.Zd;a(r,h),i.g=r,r.prototype.He=function(){this.Lg(),this.Fg.Mb(this.s),this.Mg(p),this.Mg(g),this.Ng()},r.prototype.Lg=function(){this.Kg=this.s.Ua(),this.Qe.length=0,this.Re.length=0;for(var t in this.Kg){var i=~~t;this.Qe[i]=this.Re[i]=v}},r.prototype.Og=function(){for(var t in this.Kg){for(var i=this.Kg[~~t],n=i;n.Xb;)n=n.Xb;n.Zb||n.$b.Pg?this.Re[i.Qa]++:n.$b.Qg&&this.Qe[i.Qa]++}},r.prototype.Rg=function(t,i,n){var r=n===p?-1:1,e=v;return s.Kb[2+this.Hf[p].Ga[i][t]]===r&&e++,s.Kb[2+this.Hf[g].Ga[i][t]]===r&&e++,e},r.prototype.Sg=function(t,i,n){return this.Ig.Ga[i][t]*(n===p?1:-1)},r.prototype.Tg=function(t,i,n){var r=s.Kb[2+this.Hf[1-n].Ga[i][t]];return r*(n===p?1:-1)},r.prototype.toString=function(){return"\n+1=white, -1=black, 0=no one or both\n"+this.Ig.Wa(function(t){return 0===t?"    0":"%+.1f".format(t)})+this.Ig.Wa(function(t){return x[2+2*t]})},r.prototype.Ra=function(){return this.Ig.Sa(function(t){return x[2+2*t]})},r.prototype.Ug=function(t){return this.Hf[t]},r.prototype.Mg=function(t){var i=this.s.oa(),n=this.Hf[t];for(this.Vg(n,t),this.ye.xe.Wg(this.s,n,t),this.Og(),i=this.s.oa()-i;i-- >0;)this.s.ib()},r.prototype.Ng=function(){for(var t=this.Hf[p].Ga,i=this.Hf[g].Ga,n=this.Ig.Ga,r=this.N;r>=1;r--)for(var e=this.N;e>=1;e--)n[r][e]=(j[2+t[r][e]]+j[2+i[r][e]])/2;u.debug},r.prototype.Vg=function(t,i){this.Xg=null,this.Yg(this.Fg,t.I(this.Fg),i),u.debug,this.Zg(t.Ga,i),u.debug,this.reduce(this.Hg.I(t)),this.Xg=this.Hg.Ga,u.debug,this.Yg(this.Fg,t.I(this.Fg),i),u.debug,this.Zg(t.Ga,i),u.debug},r.prototype.Yg=function(t,i,n){u.debug;for(var r=t.Ga,e=i.Ga,o=this.N;o>=1;o--)for(var s=r[o],h=this.N;h>=1;h--)s[h]===l&&this.$g(r,e,h,o,n,1-n)},r.prototype.reduce=function(t){for(var i=t.Ga,n=1;n<=this.N;n++)for(var r=1;r<=this.N;r++)if(this.Gg[n][r]===l){var e=i[n][r];if(e!==l){var o=this._g(i,r,n,1-e);0===o&&(i[n][r]=l)}}},r.prototype.$g=function(t,i,n,r,e,o){switch(this._g(t,n,r,e)){case 0:if(!this.ah(t,n,r,e,o))return;break;case 4:return;case 3:if(0===this._g(t,n,r,o))return}return this.bh(i,n,r,e)},r.prototype.bh=function(t,i,n,r,e){if(this.Xg){if(!e&&this.Xg[n][i]===l)return;var o=this.s.ab(i,n);if(o.Xa(r))return;this.s.fb(i,n,r)}t[n][i]=r},r.prototype._g=function(t,i,n,r){for(var e=0,o=k;w>=o;o++){var s=G[o];t[n+s[1]][i+s[0]]===r&&e++}return e},r.prototype.ah=function(t,i,n,r,e){for(var o=k;w>=o;o++){var s=N[o];if(t[n+s[1]][i+s[0]]===r)return!0}return!1},r.prototype.Jg=function(){for(var t=[],i=k;w>=i;i++)for(var n=G[i][0],r=G[i][1],o=this.N-1;o>=2;o--){var s=e(i,o,this.N);t.push([s[0],s[1],n,r])}this.dh=t},r.prototype.Zg=function(t,i){for(var n,r,e,o,s,h,a=this.dh,u=a.length-1;u>=0;u--){var c=a[u],f=c[0],p=c[1];if(t[p][f]===l){var g=c[2],v=c[3],d=f+g,b=p+v,y=t[b][d];if(y===l){var m=d+g,k=b+v;if(y=t[k][m],y===l){var w=m+g,x=k+v;if(y=t[x][w],y===l);else{if(y!==i)continue;if(n=t[p-g][f-v],r=t[p+g][f+v],e=t[b-g][d-v],o=t[b+g][d+v],s=t[k-g][m-v],h=t[k+g][m+v],n===y&&e===y&&s===y)continue;if(r===y&&o===y&&h===y)continue;if(this.bh(t,m,k,y,!0),n===y&&e===y)continue;if(r===y&&o===y)continue;if(this.bh(t,d,b,y,!0),n===y||r===y)continue;this.bh(t,f,p,y,!0)}}else{if(y!==i)continue;if(n=t[p-g][f-v],r=t[p+g][f+v],e=t[b-g][d-v],o=t[b+g][d+v],n!==1-y&&e===y)continue;if(r!==1-y&&o===y)continue;if(this.bh(t,d,b,y,!0),n===y||r===y)continue;this.bh(t,f,p,y,!0)}}else{if(y!==i)continue;if(n=t[p-g][f-v],r=t[p+g][f+v],e=t[b-g][d-v],o=t[b+g][d+v],n===y&&e!==1-y)continue;if(r===y&&o!==1-y)continue;this.bh(t,f,p,y,!0)}}}}},{"../../Grid":5,"../../Stone":10,"../../constants":33,"../../log":34,"./Heuristic":14,util:47}],21:[function(t,i,n){"use strict";function r(t){o.call(this,t),this.eh=[],this.fh=this.ie("allyInfl",.03,.01,1),this.gh=this.ie("enemyInfl",.13,.01,1),this.je=t.me.le.ke.Ga}var e=t("../../constants"),o=(t("../../Grid"),t("./Heuristic")),s=t("util").inherits,h=t("../../log"),a=t("../../Stone"),u=e.EMPTY,c=e.Ca,f=a.Yd,l=e.Vd,p=e.Wd;s(r,o),i.g=r,r.prototype.He=function(t,i){var n=this.eh;n.length=0,o.prototype.He.call(this,t,i);for(var r=n.length-1;r>=0;r--)this.hh(n[r],i)},r.prototype.pe=function(t,i,n){return this.ih(t,i,1-n,!0),this.ih(t,i,n)},r.prototype.jh=function(t,i,n,r,e){if(!(this.je[t.ub][t.tb]<0)){var o=1-n.group.color,s=this.bf.Ge(t,o);s&&(this.Ce.Be(s.group.$b)<.5||(h.debug,e[t.ub][t.tb]+=r,this.ke.Ga[t.ub][t.tb]+=r))}},r.prototype.hh=function(t,i){for(var n=t[0],r=t[1],e=t[2],o=r.group,s=0;8>s;s++){var h=n.Xd[s];h!==c&&h.color===u&&h.ge(o)&&this.jh(h,n,r,e,i)}this.jh(n,n,r,e,i)},r.prototype.ih=function(t,i,n,r){var e=this.De[1-n][i][t];if(0===e)return 0;var o=this.De[n][i][t];if(o>6)return 0;if(!r&&this.je[i][t]<0)return 0;var s=this.s.ab(t,i);if(0===s.ee())return 0;var a=this.bf.Ge(s,n);if(!a)return 0;if(!r&&!this.bf.Ge(s,1-n))return 0;var u=this.kh(t,i,n),c=u+this.gh*e-this.fh*o;return c*=this.Ce.Be(a.group.$b),r?c?(h.debug,this.eh.push([s,a,c])):0:(h.debug,c)},r.prototype.lh=function(t,i,n,r,e){var o=this.s.ab(t,i);if(o===c||o.color!==u)return 0;var s=this.Pe.Tg(t,i,r);if(o.ce()&&(s/=2),0>=s)return 0;if(0===--e)return s;var h=f[n][0],a=f[n][1],l=f[(n+3)%4],p=l[0],g=l[1];return s+=this.lh(t+h+p,i+a+g,n,r,e),s+=this.lh(t+h-p,i+a-g,n,r,e)};var g=1;r.prototype.kh=function(t,i,n){for(var r=Math.max(0,this.Pe.Tg(t,i,n)),e=l;p>=e;e++)r+=this.lh(t+f[e][0],i+f[e][1],e,n,g);var o=this.s.ab(t,i);return o.ae()?r=Math.max(r-1,0):o.ce()&&(r=Math.max(r-.85,0)),r}},{"../../Grid":5,"../../Stone":10,"../../constants":33,"../../log":34,"./Heuristic":14,util:47}],22:[function(t,i,n){"use strict";function r(t){o.call(this,t),this.ne=null}var e=t("../../constants"),o=(t("../../Grid"),t("./Heuristic")),s=t("util").inherits,h=t("../../log"),a=e.ALWAYS,u=e.EMPTY,c=e.Ca;s(r,o),i.g=r,r.prototype.Af=function(){this.ne||(this.ne=this.ye.me.oe)},r.prototype.pe=function(t,i){var n=this.s.ab(t,i);return this.mh(t,i,n),0},r.prototype.mh=function(t,i,n){for(var r,e,o=[],s=0,u=n.rb(this.color),c=0;e=u[c],c<u.length;c++)1===e.sb?o.push(e):2===e.sb?o.push(e):e.ac<a&&(s+=e.sb-1);if(!o.length)return!1;if(s+=n.ee(),h.debug,!this.ne.Gf(t,i,this.Ze))return!1;if(2===s)for(var f=n._d(),l=o.length-1;l>=0;l--)for(e=o[l],r=f.length-1;r>=0;r--)f[r].ge(e)&&s--;var p=s>2;if(2===s){if(1===o.length&&n.ce()){h.debug;var g=this.nh(o[0],t,i);void 0!==g&&(p=!!g)}p||(h.debug,this.s.fb(t,i,this.color),p=!this.ne.Ff(n),this.s.ib())}if(!p)return h.debug,!1;for(r=o.length-1;r>=0;r--)e=o[r],this.Ce.tg(e,n),h.debug;return!0},r.prototype.nh=function(t,i,n){var r=0,e=0,o=this.N;if(1===i||i===o)e=1;else{if(1!==n&&n!==o)throw new Error("not along border");r=1}var s=e,h=r;if(this.s.ab(i+s,n+h)===c&&(s=-s,h=-h),this.s.ab(i+s,n+h).group!==t){var a=t.color,f=this.s.ab(i+r,n+e);for(f!==c&&f.group===t&&(r=-r,e=-e);;){if(i+=r,n+=e,f=this.s.ab(i,n),f===c)return null;switch(f.color){case a:return f.group.sb>2?f.group:null;case u:var l=this.s.ab(i+s,n+h);if(l.color===u)continue;return l.color===1-a?null:l.group.sb>2?l.group:null;default:return null}}}}},{"../../Grid":5,"../../constants":33,"../../log":34,"./Heuristic":14,util:47}],23:[function(t,i,n){"use strict";function r(t){o.call(this,t),this.wg=t.me.ph.wg,this.je=t.me.le.ke.Ga}var e=t("../../constants"),o=(t("../../Grid"),t("./Heuristic")),s=t("util").inherits,h=t("../../log"),a=e.EMPTY,u=e.NEVER,c=e.oh,f=e.ALWAYS,l=e.ug,p=e.vg;s(r,o),i.g=r,r.prototype.He=function(t,i){o.prototype.He.call(this,t,i);var n=this.Pe.Kg;for(var r in n){var e=n[~~r];e.ac!==f&&e._b!==f&&this.qh(i,e)}},r.prototype.qh=function(t,i){var n=[],r=i.$b.rh(n);if(r===c){var e=this.s.ab(n[0],n[1]),o=e.ee();h.debug,this.Ce.rg(i,e,this.color,o)}},r.prototype.pe=function(t,i,n){var r=this.s.ab(t,i);return this.sh(r,n),this.sh(r,1-n),0},r.prototype.sh=function(t,i){if(this.Pe.Rg(t.tb,t.ub,i)!==u&&this.bf.Ge(t,1-i)){var n=this.ye.xe.we(t);n.zg&&n.zg.group.color===i?this.th(t,i,n):this.uh(t,i)}},r.prototype.th=function(t,i,n){if(!(n.vh>2))for(var r=t.gc.length-1;r>=0;r--){var e=t.gc[r];if(e.color===i&&1===e.group.sb){h.debug,this.Ce.rg(e.group,t,i,1);break}}},r.prototype.uh=function(t,i){for(var n=this.wg[l].Ga,r=this.wg[p].Ga,e=null,o=null,s=0,h=t.gc.length-1;h>=0;h--){var u=t.gc[h];switch(u.color){case a:n[u.ub][u.tb]!==i&&r[u.ub][u.tb]!==i||(e=u,s++);break;case i:o||(o=u.group)}}if(e){if(!o){if(this.je[t.ub][t.tb]<0)return;o=this.ye.xe.we(e).wh[i][0]}o._b!==f&&o.ac!==f&&this.Ce.rg(o,t,i,s)}}},{"../../Grid":5,"../../constants":33,"../../log":34,"./Heuristic":14,util:47}],24:[function(t,i,n){"use strict";function r(t){o.call(this,t),this.he=this.ie("infl",.07,.01,.5),this.xh=this.ie("border",10,0,20),this.yh=this.N<=9?[0,.2,.8,.95,1]:[0,.2,.8,1,.95,.8]}var e=t("../../constants"),o=t("./Heuristic"),s=t("util").inherits,h=e.EMPTY;s(r,o),i.g=r,r.prototype.pe=function(t,i){var n=0,r=0,e=this.s.ab(t,i),o=this.De[this.Ze],s=this.De[this.color];n+=o[i][t],r+=s[i][t];for(var a=e.gc.length-1;a>=0;a--){var u=e.gc[a];if(u.color!==h)return 0;n+=o[u.ub][u.tb],r+=s[u.ub][u.tb]}var c=1+this.he*Math.max(n+r-3,0)*(this.N/9),f=this.yh.length-1,l=Math.min(this.de(t),f),p=Math.min(this.de(i),f),g=this.yh[l]*this.yh[p]*this.xh,v=0;return this.ye.Ae||(v=this.Pe.Sg(t,i,this.color),v>0&&(v=0)),v+g/c},r.prototype.de=function(t){return Math.min(t-1,this.N-t)}},{"../../constants":33,"./Heuristic":14,util:47}],25:[function(t,i,n){"use strict";function r(t){this.zh=t.group.Qa,this.jg=[t],t.hg=this}function e(t){return"#"+t.group.Qa}var o=t("../../../log");i.g=r,r.prototype.toString=function(){return this.jg.map(e).toString()},r.prototype.Ah=function(t){if(!t.hg)return o.debug,this.jg.push(t),void(t.hg=this);if(t.hg.zh!==this.zh){o.debug;for(var i=t.hg.jg,n=i.length-1;n>=0;n--)this.jg.push(i[n]),i[n].hg=this}},r.prototype.remove=function(t){var i=this.jg.indexOf(t);if(0>i)throw new Error("Band.remove on wrong Band");this.jg.splice(i,1),t.hg=null,o.debug},r.Bh=function(t){if(1===t.length)throw new Error("add Band of 1");for(var i=null,n=0;n<t.length;n++)if(t[n].$b.hg){i=t[n].$b.hg;break}var e=0;for(i||(i=new r(t[e++].$b)),n=e;n<t.length;n++)i.Ah(t[n].$b)}},{"../../../log":34}],26:[function(t,i,n){"use strict";function r(t){this.zc=t,this.version="chuckie",this.mode=null,this.Ae=!1,this.s=null,this.Gh=null,this.ke=null,this.Hh=[],this.Ke=null,this.Kc=[0,0],this.Lc=[0,0],this.Ih=null}function e(t){return t>1&&2>t?t-1:t}function o(t){return t[b]===t[y]||t[b]>=m&&t[y]>=m?void 0:(t[b]=e(t[b]),t[y]=e(t[y]),t[b]>t[y]?b:y)}function s(t,i){for(var n=0;n<i.length;n++){var r=i[n];l.debug,r.bi()!==k&&(i[n]=null)}var e=0;for(n=0;n<i.length;n++)i[n]&&(i[n].ci(t.name+": liveliness="+i[n].di.toFixed(4)),e++);return e}function h(t,i){for(var n=0;n<i.length;n++)i[n].ci(t.name);return i.length}function a(){return 0}var u=t("../../../constants"),c=t("../../../Grid"),f=t("./GroupInfo"),l=t("../../../log"),p=t("./Void"),g=t("./ZoneFiller"),v=u.EMPTY,d=u.Ba,b=u.j,y=u.k,m=f.Ch,k=f.Dh,w=f.Eh,x=f.Fh,j=0,G=1,N=2;i.g=r,r.prototype.Jc=function(t){l.debug,this.Kc[b]=this.Kc[y]=0,this.Lc[b]=this.Lc[y]=0,this.ke&&this.ke.N===t.N||(this.ke=new c(t.N,d)),this.Jh(j,t,this.ke)&&(this.Kh(),this.Ae||t.lb(this.Lc))},r.prototype.Ic=function(){return this.ke},r.prototype.we=function(t){return this.Gh.Ga[t.ub][t.tb]},r.prototype.Oe=function(t,i){this.Jh(N,t,i)},r.prototype.Ie=function(){this.Kh()},r.prototype.Wg=function(t,i,n){this.Jh(G,t,i)&&this.Kh(n)},r.prototype.Ra=function(){return this.Gh.Ra()},r.prototype.Va=function(){for(var t,i="Grid:\n"+this.Gh.Wa()+"Voids:\n",n=this.Hh,r=0;t=n[r],r<n.length;r++)i+=t.toString()+"\n";i+="Groups:\n";for(var e in this.Ke)i+=this.Ke[~~e].toString()+"\n";return this.Kc&&(i+="Score:"+this.Kc.map(function(t,i){return" player "+i+": "+t+" points"})),i},r.prototype.Jh=function(t,i,n){return this.mode=t,this.Ae=this.zc.h&&t===j,this.s=i,this.Gh=n,this.Ih=new g(i,n),0===i.oa()?!1:(n.Mb(i),this.Lh(),this.Mh(),this.Nh(),!0)},r.prototype.Kh=function(t){this.mode===N?this.Oh():(this.Ph(),this.Oh(t),this.Qh(),this.Rh())},r.prototype.Sh=function(t,i){var n=this.Ke[t.Qa];n||(t.$b&&t.$b.xe===this?t.$b.Th():t.$b=new f(t,this),n=this.Ke[t.Qa]=t.$b),n.Uh.push(i)},r.prototype.Lh=function(){l.debug;var t=c.Fb;this.Ke={},this.Hh.clear();for(var i,n,r=this.s,e=new p(r,t++),o=1;o<=r.N;o++)for(var s=1;s<=r.N;s++){var h=this.Ih.Vh(s,o,v,e);if(0!==h){this.Hh.push(e);for(var a=b;y>=a;a++)for(n=e.wh[a],i=n.length-1;i>=0;i--)this.Sh(n[i],e);e=new p(r,t++)}}},r.prototype.Mh=function(){for(var t in this.Ke)this.Ke[~~t].Wh()},r.prototype.Nh=function(){l.debug;for(var t=this.Hh,i=t.length,n=i-1;n>=0;n--)t[n].Xh();for(var r;;){for(r=!1,n=i-1;n>=0;n--)t[n].Yh()&&(r=!0);if(!r)break}for(n=i-1;n>=0;n--)t[n].Zh()},r.prototype.Ph=function(){if(!this.Ae){var t=this.s;if(!(t.oa()<2*t.N))for(var i=[0,0],n=[0,0];;){for(var r=!1,e=this.Hh.length-1;e>=0;e--){var s=this.Hh[e];if(void 0===s.color&&!(s.vh>2*t.N)){i[b]=i[y]=n[b]=n[y]=0;for(var h=b;y>=h;h++)for(var a=s.wh[h].length-1;a>=0;a--){var u=s.wh[h][a].$b;i[h]+=u.$h(),n[h]+=u._h()}if(!(n[b]>4&&n[y]>4)){var c=o(i);void 0!==c?(l.debug,s.ai(c),r=!0):l.debug}}}if(!r)break}}};var S={name:"brothers",ei:f.prototype.fi},E={name:"singleEye",ei:f.prototype.gi,hi:s},D={name:"race",ei:f.prototype.bi,hi:a},A={name:"atari",ei:function(){return this.group.sb<=1?k:x}},z={name:"final",ei:function(){return this.ii(2)}},M=[];M[j]=[S,A,E,z],M[G]=[S,E],M[N]=[S,E,D],r.prototype.ji=function(t,i){l.debug;var n=0,r=0,e=[];for(var o in this.Ke){var s=this.Ke[~~o];if(!s.Qg&&!s.Pg)switch(r++,t.ei.call(s,i)){case k:e.push(s);break;case w:n++}}return e.length&&(n+=t.hi?t.hi(t,e):h(t,e)),l.debug&&n,n===r?0:0===n?r:-n},r.prototype.Oh=function(t){if(!this.Ae){for(var i,n=M[this.mode],r=0;r<n.length;){if(i=this.ji(n[r++],t),0===i)return void this.Nh();0>i&&(r=0,this.Nh())}l.debug&&i>0}},r.prototype.Qh=function(){for(var t=[],i=this.Hh.length-1;i>=0;i--){var n=this.Hh[i];t[b]=t[y]=!1;for(var r=b;y>=r;r++)for(var e,o=n.wh[r],s=0;e=o[s],s<o.length;s++)if(this.Ae||e.$b.$h()>=2){t[r]=!0;break}t[b]&&t[y]?n.ki():this.Ae&&(n.color=t[b]?b:y)}},r.prototype.Rh=function(){this.li(),this.mi(),this.ni()},r.prototype.li=function(){if(this.Ae)for(var t in this.Ke){var i=this.Ke[~~t].group;this.Kc[i.color]+=i.mb.length}},r.prototype.mi=function(){if(!this.Ae)for(var t in this.Ke){var i=this.Ke[~~t];if(i.Pg){for(var n=!1,r=i.oi.length-1;r>=0;r--)if(!i.oi[r].$b.Pg){n=!0;break}var e=i.group.color;if(!i.oi.length||n){var o=i.group.mb[0],s=this.Ih.Vh(o.tb,o.ub,e,c.Ib+e);this.Lc[e]+=s,this.Kc[1-e]+=s}else for(var h=i.Uh.length-1;h>=0;h--)i.Uh[h].ai(e)}}},r.prototype.ni=function(){for(var t=this.Gh.Ga,i=[],n=this.Hh.length-1;n>=0;n--){var r=this.Hh[n],e=r.pi(this.Ae?null:i);if(e){this.Kc[r.color]+=e-i.length,this.Ih.Vh(r.tb,r.ub,r,c.Jb+r.color);for(var o=i.length-1;o>=0;o--){var s=i[o];t[s.ub][s.tb]=c.Hb}}else this.Ih.Vh(r.tb,r.ub,r,c.Hb)}}},{"../../../Grid":5,"../../../constants":33,"../../../log":34,"./GroupInfo":28,"./Void":29,"./ZoneFiller":30}],27:[function(t,i,n){"use strict";function r(t,i){this.Ue=t,this.wh=[],this.color=i[0].color,this.ze=!1,this.qi(i)}i.g=r,r.prototype.qi=function(t){for(var i=this.wh,n=t.length-1;n>=0;n--){var r=t[n];i.indexOf(r)<0&&i.push(r)}}},{}],28:[function(t,i,n){"use strict";function r(t,i){this.xe=i,this.ri=[],this.Uh=[],this.si=[],this.oi=[],this.ti=[0,0],this.Se=[],this.ui=[],this.vi=[],this.group=t,this.Th()}function e(t,i,n){for(var r=i.length-1;r>=0;r--)for(var e=i[r].$b,o=t.length-1;o>=0;o--)if(!(t[o].indexOf(e)<0)){-1!==n&&n!==o?(t[n]=t[n].concat(t[o]),t.splice(o,1),n>o&&n--):n=o;break}return n}function o(t,i,n,r){var o=-1;o=e(t,n,o),o=e(t,r,o),0>o?t.push([i]):t[o].push(i)}var s=t("../../../constants"),h=t("./Band"),a=t("../../../log"),u=s.EMPTY,c=s.NEVER,f=s.oh,l=s.ALWAYS,p=s.ug,g=s.vg;i.g=r;var v=r.Dh=-1,d=r.Eh=1,b=r.Fh=0,y=r.Ch=1e3;r.prototype.Th=function(){this.wi=this.di=0,this.ri.length=0,this.Uh.length=0,this.hg=null,this.Qg=this.Pg=!1,this.Le=null,this.si.length=0,this.oi.length=0,this.ti[p]=this.ti[g]=0,this.Se.length=0,this.ui.length=0,this.vi.length=0,this.xi=0},r.yi=function(t){return"#"+t.group.Qa},r.prototype.toString=function(){var t=this.hg?this.hg.toString():"";return this.group.toString()+" (isAlive:"+this.Qg+" isDead:"+this.Pg+" voids:"+this.ri.length+" brothers:["+t+"] deadEnemies:["+this.si.map(r.yi)+"])"},r.prototype.zi=function(t,i){return a.debug,this.ri.push(t),this.wi++,this},r.prototype.Ai=function(t){var i=this.ri.indexOf(t);if(-1===i)throw new Error("remove unknown void");a.debug,this.ri.splice(i,1),this.wi--},r.prototype.Wh=function(){for(var t=this.group,i=t.color,n=[],r=[],e=[],o=t.fc(),s=o.length-1;s>=0;s--)for(var a=o[s],u=a.gc,c=null,f=u.length-1;f>=0;f--){var l=u[f];if(l.color===i&&l.group!==t){c=l.group;var p=n.indexOf(c);p>=0?e[p]!==a&&(r[p]=!1):(n.push(c),r.push(!0),e.push(a))}}if(n.length){for(var g=n.length-1;g>=0;g--)if(r[g]){var v=e[g],d=this.xe.we(v).Bi(v,[t,n[g]]);this.Se.push(d),this.ui.push(n[g])}else this.vi.push(n[g]);n.push(t),h.Bh(n)}},r.prototype.Ci=function(t){for(var i=[],n=this.ui.length-1;n>=0;n--)this.Se[n].Ue!==t&&i.push(this.ui[n]);return i},r.prototype.sg=function(t,i){for(var n=[],r=t.length-1;r>=0;r--){var e=t[r].$b,s=e.hg;if(s)for(var h=s.jg.length-1;h>=0;h--){var a=s.jg[h];o(n,a,a.vi,a.Ci(i))}else n.push([e])}return n},r.prototype.pg=function(t){var i=this.hg;if(!i)return[];for(var n=[],r=i.jg.length-1;r>=0;r--){var e=i.jg[r];e!==this&&o(n,e,e.vi,e.Ci(t))}return n},r.prototype.Di=function(){if(this.wi>=2)return c;var t=this.kg();return t>=3?c:0===t?l:f},r.prototype.Ei=function(){if(this.Di()===c)return!1;if(this.vi.length)return!1;for(var t=this.group.color,i=0,n=0,r=this.Uh.length-1;r>=0;r--){var e=this.Uh[r];e.color===t&&0!==e.Fi&&(i++,e.Fi>=3&&n++,this.si.length&&n++)}return!(i+n>=2)},r.prototype.ci=function(t){this.Pg=!0;for(var i=this.oi=this.group.hc(),n=i.length-1;n>=0;n--)i[n].$b.si.push(this);a.debug},r.prototype.$h=function(t,i){if(this.Qg||this.wi>=2)return y;for(var n,r=0,e=this.group.color,o=this.group.sb,s=this.Uh.length-1;s>=0;s--){var h=this.Uh[s],a=Math.min(o,h.vh);if(h.zg)h.zg===this&&(r+=a);else{var u=h.wh[e];if(1===u.length)r+=a;else{var c=this.group.Qa,f=c;for(n=u.length-1;n>=0;n--)f=Math.min(u[n].Qa,f);c===f&&(r+=a)}}}if(r/=100,i||(r+=o/1e4),this.Pg)return 0+r;var l=0;if(!i&&this.hg){var p=this.hg.jg;for(n=p.length-1;n>=0;n--)p[n]!==this&&(l+=p[n].$h(t,!0))}var g=t?this.Gi():this.si.length;return this.wi+g+l+r},r.prototype.rh=function(t){if(this.wi>1)return l;if(0===this.wi)return c;var i=this.ri[0],n=i.vh;if(n>6)return l;a.debug;for(var r,e=this.group,o=e.color,s=null,h=0,p=0,g=0,v=null,d=null,b=0,y=i.Hi,m=!1,k=[0,0,0,0,0],w=0;n>w;w++){for(var x=y[w],j=0,G=0,N=0,S=x.gc.length-1;S>=0;S--){var E=x.gc[S];switch(E.color){case u:N++;break;case o:G++;break;default:if(1===E.group.sb){N++,b+=2;break}j++,v?E.group!==v&&(d=E.group):v=E.group}}if(j){if(2>N+(G?1:0))continue}else{if(b++,r=x,2>N)continue;k[N]++}if(a.debug,g++,x.ae()&&(m=!0),s&&!s.ae()){if(p>j)continue;if(h+p>=N+j)continue}s=x,p=j,h=N}if(m&&g>1&&g--,a.debug,!s)return c;if(1===b&&!d&&v&&v.mb.length<3&&this.Ii(v,r,s))return c;if(g>=2){var D=5===n&&0===p&&1===k[3]&&3===k[2],A=6===n&&0===p&&2===k[3]&&4===k[2];if(!D&&!A)return l}return t[0]=s.tb,t[1]=s.ub,f},r.prototype.Ii=function(t,i,n){for(var r=i.gc.length-1;r>=0;r--){var e=i.gc[r];if(e.color===u&&e!==n&&e.ge(t))return!0}return!1},r.prototype.Gi=function(){for(var t=this.si.length,i=t-1;i>=0;i--)for(var n=this.si[i].Uh,r=n.length-1;r>=0;r--)if(n[r].zg===this){t--;break}return t},r.prototype.fi=function(){if(!this.hg)return b;for(var t=this.hg.jg,i=0,n=!1,r=t.length-1;r>=0;r--){var e=t[r];e!==this&&(n||e.Qg?n=e.Qg=!0:(i+=e.wi,i>=2&&(n=e.Qg=!0)))}return n?(a.debug,this.Qg=!0,d):b},r.prototype.Ji=function(){if(this.hg)return!1;if(this.group.mb.length>=6)return!1;for(var t=this.Uh.length-1;t>=0;t--)if(this.Uh[t].color===this.group.color)return!1;return!0},r.prototype.gi=function(t){if(this.wi>=2)return this.Qg=!0,a.debug,d;if(this.Ji())return v;var i=[],n=this.rh(i);if(n===f){if(this.xi=.5,void 0===t)return b;t!==this.group.color&&(n=c)}return n===c?(this.xi=0,this.hg||this.si.length?b:this.Ki()>=1.5?b:(this.di=this.$h(),v)):(this.Qg=!0,this.xi=1,a.debug,d)},r.prototype.bi=function(){for(var t=this.di||this.$h(),i=this.group.hc(),n=null,r=0;r<i.length;r++){var e=i[r].$b,o=t-e.$h();if(a.debug,o>0)return a.debug,b;0===o&&(a.debug,n=e)}return n?(this.Le=n,n.Le=this,b):v},r.prototype.ii=function(t){var i=this.di=this.$h(!0);return i>=2?(this.Qg=!0,a.debug,d):t>i?(this.di=i,v):b},r.prototype.Li=function(t,i){if(this.hg){for(var n=this.hg.jg,r=0,e=n.length-1;e>=0;e--)r+=t.call(n[e],i);return r}return t.call(this,i)},r.prototype.Ag=function(t,i){this.ti[t]+=i},r.prototype.vf=function(){for(var t=1-this.group.color,i=this.Uh.length-1;i>=0;i--){var n=this.Uh[i];if(n.color!==t)return!1}return!0},r.prototype.Mi=function(){for(var t=this.group.color,i=this.Uh.length-1;i>=0;i--){var n=this.Uh[i];if(void 0===n.color){for(var r=n.wh[1-t],e=!0,o=r.length-1;o>=0;o--){var s=r[o];if(s.mb.length>=6||s._b===l){e=!1;break}}if(e)return 1}}return 0},r.prototype.kg=function(){return this.wi+this.xi+this.Mi()+(this.ti[p]+this.ti[g])/2},r.prototype.Ki=function(){return this.Li(this.kg)},r.prototype.Ni=function(){return this.group.mb.length},r.prototype._h=function(){return this.Li(this.Ni)}},{"../../../constants":33,"../../../log":34,"./Band":25}],29:[function(t,i,n){"use strict";function r(t,i){this.s=t,this.code=i,this.tb=this.ub=0,
this.vh=0,this.wh=null,this.Hi=null,this.Oi=void 0,this.color=void 0,this.zg=void 0,this.Pi=!1,this.Qi=!1,this.Fi=-1,this.Se=null,this.Ri=!1}function e(t){return t?d[t]:d[0]}function o(t){for(var i=t.length-1;i>=0;i--)if(!t[i].$b.Pg)return!1;return!0}function s(t){return"#"+t.Qa}var h=t("../../../constants"),a=t("./FakeSpot"),u=t("../../../Grid"),c=t("../../../log"),f=h.j,l=h.k,p=1,g=2,v=3,d=["void","eye","fake","dame"];i.g=r,r.prototype.Si=function(t,i){return this.tb=t,this.ub=i,this.Se=[],this.wh=[[],[]],this.Hi=[],this.wh},r.prototype.Ti=function(t,i){this.vh++,this.Hi.push(this.s.ab(t,i))},r.prototype.Bi=function(t,i){c.debug,this.Qi=!0;var n=this.Hi.indexOf(t),r=this.Se[n];return r?r.qi(i):r=this.Se[n]=new a(t,i),r},r.prototype.Xh=function(){var t=this.wh[f],i=this.wh[l],n=o(t),r=o(i);if(n&&r)return this.Pi||void 0===this.color?!1:this.Ui();if(this.Oi===p)return!1;if(!n&&!r)return!1;var e=n?l:f;return this.Ri=!t.length||!i.length,this.Qi?this.Vi(e):(this.Fi=this.vh,this.Wi(e))},r.prototype.Vi=function(t){this.Oi=g,this.color=t,this.zg&&(this.zg.Ai(this),this.zg=null);for(var i=this.Se.length-1;i>=0;i--){var n=this.Se[i];n&&(n.ze=!1)}return!0},r.prototype.Yh=function(){if(this.Oi!==g)return!1;var t=this.Fi,i=this.Fi=this.vh-this.Xi();return c.debug,i!==t},r.prototype.Xi=function(t){t||(t=[]);for(var i=this.Se.length-1;i>=0;i--){var n=this.Se[i];if(n&&n.color===this.color)for(var r=n.wh,e=r.length-1;e>=0;e--)if(r[e].$b.Ei()){c.debug&&!n.ze,n.ze=!0,t.push(n.Ue);break}}return t.length},r.prototype.ze=function(t){for(var i=this.Se.length-1;i>=0;i--){var n=this.Se[i];if(n&&n.color===this.color&&n.Ue===t)return n.ze}return!1},r.prototype.Zh=function(){if(this.Oi===g){if(0===this.Fi){if(this.zg)throw new Error("NEVER HAPPENS");return void c.debug}c.debug;var t=this.color;return this.color=this.Oi=void 0,this.Wi(t)}},r.prototype.Wi=function(t){return this.Ri?this.Yi(t):this.ai(t)},r.prototype.Yi=function(t){c.debug,this.Oi=p,this.color=t;var i=this.wh[t];return this.zg=i[0].$b.zi(this,i),!0},r.prototype.ai=function(t){if(t===this.color)return!1;c.debug,this.zg&&(this.zg.Ai(this),this.zg=null),this.color=t;for(var i=this.wh[1-t],n=i.length-1;n>=0;n--)for(var r=i[n].$b.Uh,e=r.length-1;e>=0;e--)if(r[e]!==this&&r[e].color===t)return!0;var o=this.wh[t];return this.zg=o[0].$b.zi(this,o),!0},r.prototype.ki=function(){c.debug,this.zg&&(this.zg.Ai(this),this.zg=null),this.Oi=v,this.color=void 0},r.prototype.Ui=function(){c.debug;var t=this.color;if(void 0===t)throw new Error("dead group's eye of undefined owner");this.Pi=!0,this.Qi=!1,this.zg&&(this.zg.Ai(this),this.zg=null),this.Oi=p,this.color=1-t;for(var i=this.wh[t],n=i.length-1;n>=0;n--){var r=i[n].$b;if(r.oi.length)return this.zg=r.oi[0].$b.zi(this),!0}return!0},r.prototype.pi=function(t){return void 0===this.color?0:(t&&(t.length=0,this.Qi&&this.Xi(t)),this.vh)},r.prototype.Zi=function(t){var i=t.group;return this.wh[i.color].indexOf(i)>-1},r.prototype.toString=function(){return"{"+e(this.Oi)+"-"+u.Wb(this.tb,this.ub)+" vcount:"+this.vh+" black:"+(this.wh[f].map(s).toString()||"-")+" white:"+(this.wh[l].map(s).toString()||"-")+"}"}},{"../../../Grid":5,"../../../constants":33,"../../../log":34,"./FakeSpot":27}],30:[function(t,i,n){"use strict";function r(t,i){this.s=t,this.Ga=i.Ga,this.wh=null,this.$i=null}var e=t("../../../constants"),o=e.Ba,s=e.Ca;i.g=r,r.prototype.Vh=function(t,i,n,r){if(this.Ga[i][t]!==n)return 0;this.$i=n;var e="number"!=typeof r?r:null;this.wh=e&&e.Si(t,i);for(var o,s,h,a=0,u=this.Ga,c=[[t,i,i]];o=c.pop();)if(s=o[0],i=o[1],h=o[2],u[i][s]===n){for(;this._i(s,i-1);)i--;for(;this._i(s,h+1);)h++;a+=h-i+1;for(var f=s-1;s+1>=f;f+=2){for(var l=null,p=i;h>=p;p++)s>f&&(u[p][s]=r,e&&e.Ti(s,p)),this._i(f,p)?l||(l=p):l&&(c.push([f,l,p-1]),l=null);l&&c.push([f,l,h])}}return a},r.prototype._i=function(t,i){var n=this.Ga[i][t];if(n===o||n===s)return!1;if(n===this.$i)return!0;if(!this.wh)return!1;if("number"!=typeof n)return!1;var r=this.s.ab(t,i).group;if(!r)throw new Error("Unexpected: ZoneFiller replacing a group");var e=this.wh[n];return-1===e.indexOf(r)&&e.push(r),!1}},{"../../../constants":33}],31:[function(t,i,n){"use strict";function r(t,i,n){this.name="Chuckie",this.zc=t,this.xe=new o(t),this.bj(n),this.setColor(i)}function e(t,i){return i[1]-t[1]}var o=t("./boan/BoardAnalyser"),s=t("../../constants"),h=t("../../Genes"),a=t("../../Grid"),u=t("../../log"),c=t("../../main"),f=t("./boan/ZoneFiller"),l=t("./Connector"),p=t("./GroupAnalyser"),g=t("./GroupsAndVoids"),v=t("./Hunter"),d=t("./Influence"),b=t("./MoveInfo"),y=t("./NoEasyPrisoner"),m=t("./PotentialEyes"),k=t("./PotentialTerritory"),w=t("./Pusher"),x=t("./Savior"),j=t("./Shaper"),G=t("./Spacer"),N=s.Ba,S=s.Ve,E=s.aj,D=s.We,A=-1;i.g=r,r.cj="Chuckie",r.dj="0.1",r.Bc=o,r.ej=f,r.prototype.fj=function(t){var i=new t(this);return this.af.push(i),i},r.prototype.gj=function(){var t=this.me={};this.af=[],t.Ne=this.fj(b),t.df=this.fj(k),t.hj=this.fj(g),t.ef=this.fj(d),t.ph=this.fj(m),t.ij=this.fj(p),t.le=this.fj(y),t.jj=this.fj(x),t.oe=this.fj(v),t.cf=this.fj(l),t.kj=this.fj(G),t.lj=this.fj(w),t.mj=this.fj(j);for(var i=0;i<this.af.length;i++)this.af[i].$e()},r.prototype.setColor=function(t){this.color=t;for(var i=0;i<this.af.length;i++)this.af[i].ff(t)},r.prototype.bj=function(t){this.kf=t||this.kf||new h,this.Ye=this.ie("smallerMove",.03,.01,.1),this.s!==this.zc.s&&(this.s=this.zc.s,this.N=this.s.N,this.Ae=this.zc.h,this.nj=new a(this.N,N),this.ke=new a(this.N,0,N),this.gj()),this.oj=this.pj=0,this.qj=this.rj=this.sj=0,this.tj=!1,this.ag=this.bg=A,this.gf=null},r.prototype.uj=function(t){for(var i=0;i<this.af.length;i++){var n=this.af[i];if(n.name===t)return n}return null},r.prototype.ie=function(t,i,n,r){return void 0===n&&(n=null),void 0===r&&(r=null),this.kf.get(this.name+"-"+t,i,n,r)},r.prototype.vj=function(t,i,n){this.qj=n,this.rj=t,this.sj=i,this.tj=1!==this.wj},r.prototype.xj=function(t,i,n){if(n>this.qj)this.wj=1,this.vj(t,i,n);else{if(this.wj++,Math.random()*this.wj>=1)return;this.vj(t,i,n)}},r.prototype.yj=function(){this.oj++;var t=this.nj.Ga,i=this.ke.Ga;this.zj(),this.Aj(t,i),this.Bj(t,i);var n=this.Cj(t,i);return u.hf(this.Pf?u["if"]:u.cg),n},r.prototype.zj=function(){this.qj=this.Ye-.001,this.rj=A,this.Pf=!!u.debug,u.hf(u.cg)},r.prototype.Aj=function(t,i){for(var n=1;n<=this.N;n++)for(var r=1;r<=this.N;r++)this.s.ia(r,n,this.color)?(t[n][r]=S,i[n][r]=0):t[n][r]=E;if(this.ag!==A){if(t[this.bg][this.ag]===E)throw new Error("Invalid test move: "+this.ag+","+this.bg);t[this.bg][this.ag]=D}},r.prototype.Bj=function(t,i){for(var n=0;n<this.af.length;n++){var r=this.af[n];u.hf(this.Pf&&this.gf===r.name?u["if"]:u.cg);var e=Date.now();r.Af&&r.Af(),r.He(t,i);var o=Date.now()-e;o>=3&&!c.Dj&&u.Ej("Slowness: "+r.name+" took "+o+"ms")}this.me.Ne.Qf(t,i)},r.prototype.Cj=function(t,i){for(var n=1;n<=this.N;n++)for(var r=1;r<=this.N;r++)t[n][r]<S||i[n][r]<this.qj||this.xj(r,n,i[n][r]);return this.qj<this.Ye?"pass":(this.tj&&this.pj++,a.Wb(this.rj,this.sj))},r.prototype.Fj=function(){var t=this.me.df;return t.He(),t.Ig.Ga},r.prototype.Gj=function(t,i){this.ag=t,this.bg=i,this.yj(),this.ag=A},r.prototype.Hj=function(t,i){for(var n={},r=0;r<this.af.length;r++)this.af[r].jf(t,i,n);return n},r.prototype.Ij=function(t,i){return this.Gj(t,i),this.ke.Ga[i][t]},r.prototype.Jj=function(t,i,n){this.Gj(t,i);var r=this.uj(n);return r.ke.Ga[i][t]},r.prototype.Kj=function(t){this.gf=t},r.prototype.Lj=function(t,i){var n=this.zc.ha(t);if(!n)return"";var r=n[0],o=n[1];if(i){if(!this.s.ia(r,o,this.zc.A))return"Invalid move: "+t;this.Gj(r,o)}var s=this.Hj(r,o),h=this.ke.Ga[o][r],a=[];for(var u in s)0!==s[u]&&a.push([u,s[u]]);a.sort(e);for(var c=t+" ("+h.toFixed(2)+")\n",f=0;f<a.length;f++)c+="- "+a[f][0]+": "+a[f][1].toFixed(2)+"\n";return c}},{"../../Genes":3,"../../Grid":5,"../../constants":33,"../../log":34,"../../main":35,"./Connector":11,"./GroupAnalyser":12,"./GroupsAndVoids":13,"./Hunter":15,"./Influence":16,"./MoveInfo":17,"./NoEasyPrisoner":18,"./PotentialEyes":19,"./PotentialTerritory":20,"./Pusher":21,"./Savior":22,"./Shaper":23,"./Spacer":24,"./boan/BoardAnalyser":26,"./boan/ZoneFiller":30}],32:[function(t,i,n){"use strict";var r=t("./main"),e=[{name:"Chuckie",Mj:t("./ai/chuckie")}];r.Nj(e),t("./ui/style.less");var o=t("./ui/Ui"),s=new o;s.Oj()},{"./ai/chuckie":31,"./main":35,"./ui/Ui":40,"./ui/style.less":41}],33:[function(t,i,n){"use strict";function r(){this.ug=0,this.vg=1,this.Ca=null,this.Ba=-99,this.EMPTY=-1,this.j=0,this.k=1,this.Ve=0,this.We=1,this.aj=-1,this.NEVER=0,this.oh=1,this.ALWAYS=2,this.Vd=0,this.Wd=3,this.Bg=0,this.Cg=1,this.Dg=2,this.Eg=3,this.l="Japanese",this.Pj="Chinese"}i.g=new r},{}],34:[function(t,i,n){"use strict";function r(){this.level=NaN,this.Qj=null,this["if"]=0,this.cg=1,this.Rj=2,this.ERROR=3,this.Sj=4,this.Tj=!1,this.ic=!1}var e=console,o=0,s=1,h=2,a=3,u=4;r.prototype.hf=function(t){t!==this.level&&(this.level=t,this.debug=o>=t?this.Uj:null,this.info=s>=t?this.qg:null,this.warn=h>=t?this.Ej:null,this.error=a>=t?this.Vj:null,this.fatal=u>=t?this.Wj:null)},r.prototype.Xj=function(t){this.Qj=t},r.prototype.Yj=function(t,i){var n=this;return function(r){n.level>t||n.Qj&&!n.Qj(t,r)||i.call(e,r)}};var c=i.g=new r;r.prototype.Uj=c.Yj(o,e.debug),r.prototype.qg=c.Yj(s,e.info),r.prototype.Ej=c.Yj(h,e.warn),r.prototype.Vj=c.Yj(a,e.error),r.prototype.Wj=c.Yj(u,e.error),c.hf(s)},{}],35:[function(t,i,n){"use strict";function r(){this.appName=o.name,this.appVersion=o.version,this.debug=!1,this.Zj=this.Dj=!1,this.$j=null,this.Cc=this._j=this.ak=this.bk=null,this.ck=null,this.dk=null,this.ek=null,this.fk=null}function e(t){return"\n"!==t.slice(-1)?0:"\r\n"!==t.slice(-2)?1:2}var o=t("../package.json"),s=new r;i.g=s,r.prototype.Nj=function(t){this.$j={};for(var i=0;i<t.length;i++){var n=t[i];this.$j[n.name]=n.Mj}var r=t.length-1;this.Cc=this._j=t[r].Mj,this.ak=r>=1?t[r-1].Mj:null,this.bk=r>=2?t[r-2].Mj:null},r.prototype.gk=function(t,i){this.ek=new t,i(this.ek)},s._e=function(t){return t.name||t.toString().split(/ |\(/,2)[1]},s.clone=function(t){if(null===t||void 0===t)return t;var i;if(t instanceof Array){i=[];for(var n=0,r=t.length;r>n;n++)i[n]=t[n]}else{if("object"!=typeof t)throw new Error("main.clone called on "+typeof t);if("function"==typeof t.clone)return t.clone();i={};for(var e in t){var o=t[e];"function"!=typeof o&&(i[e]=o)}}return i},String.prototype.ua=function(t){if(void 0===t)return this.substr(0,this.length-e(this));var i=this.length-t.length;return this.substr(i)===t?this.substr(0,i):this.toString()},String.prototype.Rb=function(t){if(void 0===t)t=e(this)||1;else if("number"!=typeof t)throw new Error("Invalid parameter type for String.count: "+typeof t);return this.substr(0,this.length-t)},String.prototype.startsWith||(String.prototype.startsWith=function(t){return this.substr(0,t.length)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(t){return this.substr(this.length-t.length)===t}),String.prototype.format=function(t){if("%"!==this[0])throw new Error("Invalid format: "+this.toString());var i,n=this.slice(1,-1),r=0,e=this.slice(-1);switch(e){case"d":case"x":var o=" ";"0"===n[r]&&(r++,o="0");var s=parseInt(n.substr(r));i=t.toString("x"===e?16:10);for(var h=s-i.length;h>0;h--)i=o+i;return i;case"f":var a="";if("+"===n[r]&&(r++,t>0&&(a="+")),"."!==n[r++])break;var u=parseInt(n.substr(r));return a+t.toFixed(u)}throw new Error("Unknown format: "+this.toString())},String.prototype.Id=function(t,i){return this>=t&&i>=this},s.hk=function(t,i){for(var n=new Array(t),r=t-1;r>=0;r--)n[r]=i;return n},s.wb=function(t,i,n){for(var r=new Array(t),e=r[0]=s.hk(i,n),o=t-1;o>=1;o--)r[o]=e.concat();return r},Array.ik=function(t,i){if(void 0===t)return[];if(void 0===i)return new Array(t);var n,r=[];if("function"==typeof i)for(n=0;t>n;n++)r[n]=i(n);else for(n=0;t>n;n++)r[n]=i;return r},Array.prototype.jk=function(t){for(var i=this.length,n=0;n<t.length;n++){var r=t[n];-1===this.indexOf(r)&&this.push(r)}return this.length-i},Array.prototype.clear=function(){this.length=0}},{"../package.json":50}],36:[function(t,i,n){"use strict";function r(){this.kk=null,this.lk=null,this.s=null,this.N=0,this.mk=null,this.cursor={type:"CR",x:0,y:0},this.nk=!1,this.pk={type:null,x:0,y:0}}function e(t){switch(t){case-1:return{type:"mini",c:f.B};case-.5:return{type:"outline",c:f.B};case 0:return null;case.5:return{type:"outline",c:f.W};case 1:return{type:"mini",c:f.W};default:return null}}function o(t){switch(t){case a.Jb+p:case a.Ib+l:return{type:"mini",c:f.B};case a.Jb+l:case a.Ib+p:return{type:"mini",c:f.W};case a.Hb:return{type:"SL",c:"grey"};default:return null}}function s(t){if(null===t)return null;var i=1,n=0,r=2,e=0;if(void 0!==y&&(n=y),void 0!==m&&(r=m),void 0!==k&&(e=k),t===e)return null;for(var o=t.toFixed(r),s=n;r>s;s++)o=o.ua("0");if(o=o.ua("."),"0."===o.substr(0,2)&&(o=o.slice(1)),0===e){if("0"===o||".0"===o)return null;i=1>t?.6:1}return{type:"LB",text:o,scale:i}}var h=t("../constants"),a=t("../Grid"),u=t("../log"),c=t("./touchManager.js"),f=window.WGo,l=h.k,p=h.j,g=h.EMPTY,v=window.devicePixelRatio||1,d={};d[f.B]=p,d[f.W]=l;var b={};b[g]=null,b[p]=f.B,b[l]=f.W,i.g=r,r.prototype.create=function(t,i,n,r){var e=n.N;if(this.s=n,!this.kk||this.N!==e){this.N=e,r=r||{};var o=r.noCoords?0:-.23,s={size:e,width:i,section:{top:o,left:o,right:o,bottom:o},coordFontSize:.6};switch(r.background){case"wood":s.background=(window.rootDir||".")+"/lib/wood1.jpg";break;default:s.background="#c75"}t.clear(),this.kk=new f.Board(t.qk(),s),this.rk=60+this.kk.stoneRadius,r.noCoords||this.kk.addCustomObject(f.Board.coordinates),this.sk()}},r.prototype.sk=function(){var t=this;c.tk(this.kk.element,function(i,n,r){if("dragCancel"===i)return t.uk(-1,-1);"drag"===i.substr(0,4)&&(r-=t.rk);var e=t.vk(n,r);switch(n=e[0],r=e[1],i){case"dragStart":return t.uk(n,r);case"drag":return t.uk(n,r);case"dragEnd":return t.uk(-1,-1),t.wk(n,r);case"tap":return t.wk(n,r)}})},r.prototype.xk=function(t){this.yk=b[t]},r.prototype.uk=function(t,i){var n=this.zk(t,i);if(this.nk){if(t===this.cursor.x&&i===this.cursor.y)return;this.kk.removeObject(this.cursor)}this.nk=n,n&&(this.cursor.x=t,this.cursor.y=i,this.kk.obj_arr[t][i][0]?(this.cursor.type="CR",this.cursor.c=void 0):(this.cursor.type=void 0,this.cursor.c=this.yk),this.kk.addObject(this.cursor))},r.prototype.Ak=function(t,i,n){this.pk.type&&this.kk.removeObject(this.pk),this.pk.type=t,t&&(this.pk.x=i-1,this.pk.y=this.N-n,this.kk.addObject(this.pk))},r.prototype.zk=function(t,i){return t>=0&&i>=0&&t<this.N&&i<this.N},r.prototype.wk=function(t,i){var n=t+1,r=this.N-i;if(!this.zk(t,i))return this.lk("!"+(n>=1&&n<=this.N?a.Qb(n):r));if(this.s.bb(n,r)===g){var e=a.Wb(n,r);this.lk(e)}},r.prototype.Bk=function(t){this.lk=t},r.prototype.vk=function(t,i){var n=this.kk;return t=Math.round((t*v-n.left)/n.fieldWidth),i=Math.round((i*v-n.top)/n.fieldHeight),[t,i]},r.prototype.refresh=function(){var t=!1;"regular"!==this.mk&&(this.mk="regular",t=!0);for(var i=0;i<this.N;i++)for(var n=0;n<this.N;n++){var r=this.s.bb(n+1,this.N-i),e=b[r],o=this.kk.obj_arr[n][i][0];t&&(o=null,this.kk.removeObjectsAt(n,i)),null===e?o&&this.kk.removeObjectsAt(n,i):o&&o.c===e||this.kk.addObject({x:n,y:i,c:e})}},r.prototype.show=function(t,i,n){this.refresh(),this.mk=t;for(var r=0;r<this.N;r++)for(var e=0;e<this.N;e++){var o=n(i[this.N-r][e+1]);o&&(o.x=e,o.y=r,this.kk.addObject(o))}};var y,m,k;r.prototype.Ck=function(t,i,n){y=t,m=i,k=n};var w={Ig:e,Dk:o,value:s};r.prototype.Ek=function(t,i){var n=w[t];return n?void this.show(t,i,n):u.error&&u.error("invalid display type:",t)},r.prototype.Fk=function(t){this.show("scoring",t,o)}},{"../Grid":5,"../constants":33,"../log":34,"./touchManager.js":42}],37:[function(t,i,n){"use strict";function r(t,i,n,e){this.type=i,t instanceof r&&(t=t.Gk);var s=this.Gk=t.appendChild(document.createElement(i));e&&"#"===e[0]&&(o.add(e.substr(1),this),"#"===n[0]&&(n=n.substr(1))),n&&(s.className=n)}function e(){this.$k={}}var o=null,s=1;i.g=r,r.prototype.Hk=function(t){return this.Gk.textContent=t,this},r.prototype.Ik=function(t){return this.Gk.innerHTML=t,this},r.prototype.setAttribute=function(t,i){return this.Gk.setAttribute(t,i),this},r.prototype.Jk=function(t,i){return this.Gk.style[t]=i,this},r.prototype.Kk=function(t){return this.Gk.style.display=t?"":"none",this},r.prototype.Lk=function(t){return this.Gk.disabled=!t,this.Mk("disabled",!t),this},r.prototype.text=function(){return this.Gk.textContent},r.prototype.Nk=function(){return this.Gk.innerHTML},r.prototype.value=function(){return this.Gk.value},r.prototype.Ok=function(){return this.Gk.checked},r.prototype.qk=function(){return this.Gk},r.prototype.clear=function(){this.Gk.innerHTML=""},r.prototype.Pk=function(t,i){var n=this;this.Gk.addEventListener(t,function(t){i.call(n,t)})},r.prototype.Mk=function(t,i){var n=this.Gk,r=n.className.split(" "),e=r.indexOf(t);if(i){if(e>=0)return;n.className+=" "+t}else{if(0>e)return;r.splice(e,1),n.className=r.join(" ")}},r.prototype.Qk=function(){this.Gk.scrollTop=this.Gk.scrollHeight},r.Rk=function(t,i,n){return new r(t,"div",i,n||i)},r.prototype.Rk=function(t,i){return new r(this,"div",t,i||t)},r.removeChild=function(t,i){t instanceof r&&(t=t.Gk),t.removeChild(i.Gk)},r.prototype.removeChild=function(t){this.Gk.removeChild(t.Gk)},r.Sk=function(t,i,n,e){var o=new r(t,"button",i+"Button",i);return o.Gk.innerText=n,o.Pk("click",e),o},r.Tk=function(t,i,n,e){var o=new r(t,"a",i+"Link",i);return o.setAttribute("href",e),o.Hk(n),o},r.Uk=function(t,i,n){return new r(t,"span",i,i).Hk(n)},r.Vk=function(t,i,n,e){var o=i+"Label";r.Uk(t,o+" inputLbl",n,o);var s=new r(t,"input",i+"Input inputBox",i);return void 0!==e&&(s.Gk.value=e),s},r.Wk=function(t,i,n,e,o){var h=new r(t,"div",i+"Div chkBoxDiv"),a=new r(h,"input",i+"ChkBox chkBox",i),u=a.Gk;return u.type="checkbox",u.name=i,void 0!==e&&(u.value=e),u.id=i+"ChkBox"+(void 0!==e?e:s++),o&&(u.checked=!0),new r(h,"label",i+"ChkLabel chkLbl",i).Hk(n).setAttribute("for",u.id),a},r.Xk=function(t,i,n,e,o){e||(e=n);for(var s=[],h=0;h<n.length;h++){var a=s[h]=new r(t,"input",i+"RadioBtn radioBtn",i),u=a.Gk;u.type="radio",u.name=i,u.value=e[h],u.id=i+"Radio"+e[h],e[h]===o&&(u.checked=!0),new r(t,"label",i+"RadioLabel radioLbl",i).Hk(n[h]).setAttribute("for",u.id)}return s},r.Yk=function(t){for(var i=0;i<t.length;i++)if(t[i].Gk.checked)return t[i].Gk.value},r.Zk=function(t,i,n,e,o){e||(e=n);var s=new r(t,"select",i+"DropDwn dropDwn",i);s.values=e;for(var h=0,a=0;a<n.length;a++){var u=new r(s,"option").Gk;u.value=e[a],u.textContent=n[a],e[a]===o&&(h=a)}return s.Gk.selectedIndex=h,s},r.prototype.select=function(t){var i=this.values.indexOf(t);-1!==i&&(this.Gk.selectedIndex=i)},r.Na=function(){return o=new e},e.prototype.add=function(t,i){this.$k[t]=i},e.prototype.get=function(t){return this.$k[t]},e.prototype.Lk=function(t,i,n){"ALL"===t&&(t=Object.keys(this.$k));for(var r=0;r<t.length;r++)if(!n||-1===n.indexOf(t[r])){var e=this.$k[t[r]];e?e.Lk(i):console.error("Invalid control name:",t[r])}},e.prototype.Kk=function(t,i,n){"ALL"===t&&(t=Object.keys(this.$k));for(var r=0;r<t.length;r++)if(!n||-1===n.indexOf(t[r])){var e=this.$k[t[r]];e?e.Kk(i):console.error("Invalid control name:",t[r])}},r._k=function(t){document.head.getElementsByTagName("title")[0].textContent=t},r.al=function(){var t=window.getSelection();if(!t.rangeCount)return null;var i=t.getRangeAt(0),n=i.startContainer.data;return n?n.substring(i.startOffset,i.endOffset):null}},{}],38:[function(t,i,n){"use strict";function r(t,i){var n=o.Rk(document.body,"newGameBackground"),r=n.Rk("newGameDialog dialog");r.Rk("dialogTitle").Hk("Start a new game");var s=new o(r,"form").setAttribute("action"," "),h=s.Rk();o.Uk(h,"inputLbl","Size:");var a=o.Xk(h,"size",[5,7,9,13,19],null,t.N);o.Uk(s,"inputLbl","Handicap:");var u=o.Zk(s,"handicap",[0,2,3,4,5,6,7,8,9],null,t.t),c=s.Rk();o.Uk(c,"inputLbl","AI plays:");var f=o.Xk(c,"aiColor",["white","black","both","none"],null,t.bl),l=o.Vk(s,"moves","Moves to load:",t.Ed),p=s.Rk();o.Uk(p,"inputLbl","Black AI:");var g=o.Zk(p,"defaultAi",Object.keys(e.$j),null,e.Cc.name);o.Uk(p,"defAiInfo","(White AI always uses latest AI version)"),o.Uk(s,"inputLbl","Rules:");var v=o.Zk(s,"rules",["Japanese","Chinese"],["jp","ch"],t.rules),d=o.Sk(s.Rk("btnDiv"),"start","Play",function(r){return r.preventDefault(),t.N=~~o.Yk(a),t.t=~~u.value(),t.bl=o.Yk(f),t.Ed=l.value(),e.Cc=e.$j[g.value()],t.rules=v.value(),i(t)?o.removeChild(document.body,n):void 0});d.setAttribute("type","submit")}var e=t("../main"),o=t("./Dome");i.g=r},{"../main":35,"./Dome":37}],39:[function(t,i,n){"use strict";function r(){var t=this.cl;t.options&&(t.options.dl=this.id),s.removeChild(t.parent,t.el),t.fl&&t.fl(t.options)}function e(t,i,n,e){var o=s.Sk(t,"popupDlg",n,r);o.cl=i,o.id=e}function o(t,i,n,r,o){this.parent=t||document.body,this.options=r,this.fl=o,this.el=s.Rk(this.parent,"popupBackground");var h=this.el.Gk.parentElement;this.el.Jk("left",h.offsetLeft+"px"),this.el.Jk("top",h.offsetTop+"px"),this.el.Jk("width",h.scrollWidth+"px"),this.el.Jk("height",h.scrollHeight+"px");var a=this.el.Rk("popupDlg dialog");a.Rk("dialogTitle").Hk(n||"Problem");var u=a.Rk("content");s.Uk(u,"message",i);for(var c=r&&r.buttons||["OK"],f=a.Rk("btnDiv"),l=0;l<c.length;l++)e(f,this,c[l],l)}var s=t("./Dome");i.g=o},{"./Dome":37}],40:[function(t,i,n){"use strict";function r(t){this.N=this.t=0,this.bl="",this.zc=new u(t),this.gl=new p(this.zc),this.kk=null,this.initDev?this.initDev():this.hl=!0}function e(t,i,n){var r=this.Gk=t.Rk("oneMove "+i);r.Rk("label").Hk(n);var e=r.Rk("icon");this.text=e.Rk("text")}var o=t("../constants"),s=t("../main"),h=t("./Board"),a=t("./Dome"),u=t("../GameLogic"),c=t("../Grid"),f=t("./NewGameDlg"),l=t("./PopupDlg"),p=t("../ScoreAnalyser"),g=t("../userPreferences"),v=o.k,d=o.j,b=document.documentElement.clientWidth;i.g=r,r.prototype.Oj=function(){window.addEventListener("beforeunload",this.il.bind(this)),this.N=g.jl("lastGameSize",9),this.t=g.jl("lastGameHandicap",0),this.bl=g.jl("lastGameAiPlays","white"),this.rules=g.jl("lastGameRules","jp");var t=g.jl("lastGameHistory");this.kl(t)},r.prototype.ll=function(){g.ml("lastGameSize",this.N),g.ml("lastGameHandicap",this.t),g.ml("lastGameAiPlays",this.bl),g.ml("lastGameRules",this.rules),g.ml("lastGameHistory",this.zc.history)},r.prototype.il=function(){this.ll(),g.close()},r.prototype.nl=function(){this.kk.refresh(),this.inDevMode&&this.devDisplay()},r.prototype.ol=function(t,i,n){this.pl("compact",t,i,n),this.bl="both",this.ql(null,!0),this.zc.D&&this.rl()},r.prototype.pl=function(t,i,n,r){var e=this.sl="compact"===t,o=this.tl=a.Rk(i,"gameUi");n&&o.Rk(e?"testTitle":"pageTitle").Hk(n),this.ul=o.Rk("board"),r&&(this.vl=o.Rk("boardDesc").Ik(r)),this.wl(o),this.xl(o),this.hl||this.createDevControls();var s=this.zc.s.N+2;this.yl=e?28*s:Math.min(60*s+10,b-15);var u=this;this.kk=new h,this.kk.Bk(function(t){return"!"===t[0]?!u.hl&&u.onDevKey(t.substr(1)):u.inEvalMode||u.zl?u.showDevData(t,null,!0):void u.Al(t)})},r.prototype.Bl=function(){this.tl&&(a.removeChild(document.body,this.tl),this.tl=null,this.kk=null)},r.prototype.kl=function(t){a._k(s.appName),this.Bl();var i={N:this.N,t:this.t,bl:this.bl,Ed:t,rules:this.rules},n=this;new f(i,function(t){return n.N=t.N,n.t=t.t,n.bl=t.bl,n.rules=t.rules,n.zc.q("jp"===n.rules?o.l:o.Pj),n.ql(t.Ed)})},e.prototype.Cl=function(t,i){this.Gk.Kk(null!==t),this.Gk.Mk("black",i===d),this.Gk.Mk("white",i===v),this.text.Hk(t)},r.prototype.wl=function(t){var i=this.Dl=t.Rk("statusBar");this.El=new e(i,"lastMove","Last:"),this.Fl=i.Rk("gameInfo"),this.Gl=i.Rk("message"),this.Hl=new e(i,"nextPlayer","Next:")},r.prototype.Il=function(){var t=this.zc.p[v]+" VS "+this.zc.p[d]+" (B)";t+=", komi: "+this.zc.u,this.t&&(t+=", hand: "+this.t),this.zc.K&&(t+=", rules: "+this.zc.K),this.Fl.Hk(t)},r.prototype.Jl=function(){var t=this.zc.history;if(t.length){var i=this.zc.ca(t[t.length-1]);this.El.Cl(i,1-this.zc.A);var n=this.zc.ha(i);n?this.kk.Ak("CR",n[0],n[1]):this.kk.Ak(null)}else this.El.Cl(null);this.Kl(),this.Gl.Hk("")},r.prototype.Kl=function(t){return null===t?this.Hl.Cl(null):(t=this.zc.ca(t||""),void this.Hl.Cl(t,this.zc.A))},r.prototype.statusMessage=function(t){this.Gl.Hk(t),this.Kl(),this.Ll.Kk(!1)},r.prototype.Ml=function(t){this.Ll.Ik(t),this.Ll.Kk(!0)},r.prototype.xl=function(t){var i=t.Rk("mainControls"),n=this;this.Nl=a.Na(),a.Sk(i,"#review","Review",function(){n.Ol()}),a.Sk(i,"#back10","<<",function(){n.Pl(-10)}),a.Sk(i,"#back1","<",function(){n.Pl(-1)}),a.Sk(i,"#forw1",">",function(){n.Pl(1)}),a.Sk(i,"#forw10",">>",function(){n.Pl(10)}),this.controls=a.Na(),a.Sk(i,"#pass","Pass",function(){n.Al("pass")}),a.Sk(i,"#next","Next",function(){n.Ql(1)}),a.Sk(i,"#next10","Next 10",function(){n.Ql(10)}),a.Sk(i,"#nextAll","Finish",function(){n.Ql()}),a.Sk(i,"#undo","Undo",function(){n.Rl()}),a.Sk(i,"#accept","Accept",function(){n.Sl(!0)}),a.Sk(i,"#refuse","Refuse",function(){n.Sl(!1)}),a.Sk(i,"#newg","New game",function(){n.kl()}),this.Ll=i.Rk("logBox outputBox").Kk(!1),a.Sk(i,"#resi","Resign",function(){n.Tl()}),this.Ul=i.Rk("#aiVsAiFlags"),this.Vl=a.Wk(this.Ul,"animated","Animated")},r.prototype.Ol=function(){this.zl=!this.zl,this.Nl.get("review").Mk("toggled",this.zl),this.Wl(),this.zl?(this.Xl=this.zc.history.concat(),this.Yl=this.Xl.length,this.Pl(0)):(this.Pl(this.Xl.length-this.Yl),this.Kl())},r.prototype.Wl=function(){var t=this.zl,i=this.zc.F,n=this.zc.D,r=!(i||n||t),e="both"===this.bl;this.Dl.Kk(!i),this.Nl.Kk(["review"],r||t),this.Nl.Kk(["back1","back10","forw1","forw10"],t),this.controls.Kk(["accept","refuse"],n),this.controls.Kk(["undo","pass","resi"],r&&!e),this.controls.Kk(["next","next10","nextAll","aiVsAiFlags"],r&&e),this.controls.Kk(["newg"],i&&!this.sl),this.hl||this.toggleDevControls(r,t,e)},r.prototype.Zl=function(t){this.$l=[],this._l=[!1,!1];for(var i=d;v>=i;i++)if(this.bl===c.xb[i]||"both"===this.bl){var n=this.am(i).constructor;this._l[i]=!0,t||this.zc.J(i,n.cj+"-"+n.dj)}else t||this.zc.J(i,"human")},r.prototype.am=function(t){var i=this.$l[t];if(i)return i;var n=t===d?s.Cc:s._j;return i=this.$l[t]=new n(this.zc,t)},r.prototype.bm=function(){this.Il(),this.Jl(),this.Kl(),this.Wl(),this.nl()},r.prototype.O=function(t){var i=[];return this.zc.aa(t,i)?!0:(new l(this.tl,i.join("\n")),!1)},r.prototype.ql=function(t,i){var n=this.zc;if(i||n.M(this.N,this.t),this.Zl(i),t&&!this.O(t))return!1;this.N=n.s.N,this.t=n.t,this.hl||this.initDev(),this.tl||this.pl("main",document.body);var r=this.sl?void 0:{background:"wood"};return this.kk.create(this.ul,this.yl,n.s,r),this.bm(),i||(t||this.statusMessage("Game started. Your turn..."),this.cm()||this.dm()),!0},r.prototype.cm=function(){return this.zc.D?(this.rl(),!0):this.zc.F?(this.Rf(),this.em(),!0):!1},r.prototype.Rf=function(){var t=this.gl.Fc();this.fm=t.join("<br>")},r.prototype.rl=function(){this.Rf(),this.statusMessage("Do you accept this score?"),this.Ml(this.fm),this.Wl(),this.kk.Fk(this.gl.Ic().Ga)},r.prototype.Sl=function(t){var i=this.zc.A;return this._l[i]&&!this._l[1-i]&&(i=1-i),this.zc.na(t,i),t?this.em():(this.statusMessage("Score in dispute. Continue playing..."),this.Wl(),this.nl(),void("both"!==this.bl&&this.dm()))},r.prototype.em=function(){this.Ml(this.fm+"<br><br>"+this.zc.pa()),this.Wl()},r.prototype.gm=function(t){var i=this.hm=this.$l[this.zc.A];this.im=i.pj;var n=i.yj();return this.zc.V(n),t||(this.Jl(),this.inDevMode&&this.showDevData(n,i,!1)),this.cm()?n:(t||this.nl(),n)},r.prototype.Al=function(t){return this.zc.V(t)?void(this.cm()||(this.nl(),this.Jl(),this.dm())):this.statusMessage(this.zc.X().join(". "))},r.prototype.Tl=function(){var t=this,i={buttons:["YES","NO"]};new l(this.tl,"Do you really want to resign?","Confirm",i,function(i){0===i.dl&&(t.zc.V("resi"),t.cm())})},r.prototype.Rl=function(){var t="undo";return("none"===this.bl||"both"===this.bl||this.inEvalMode)&&(t="half_undo"),this.zc.V(t)?(this.nl(),this.Jl(),void this.statusMessage('Performed "'+t+'"')):this.statusMessage(this.zc.X().join(". "))},r.prototype.jm=function(){this.kk.xk(this.zc.A);var t=c.Nb(this.zc.A);return"("+t+"'s turn)"},r.prototype.dm=function(t){this._l[this.zc.A]?this.gm(t):t||this.Kl()},r.prototype.Ql=function(t){var i=1===t,n=this.Vl.Ok(),r=!i&&!n;if(this.dm(r),!i&&!this.zc.D){var e=this;window.setTimeout(function(){e.Ql(t-1)},n?100:0)}},r.prototype.Pl=function(t){for(var i=this.Xl,n=this.Yl,r=0;t>r&&n!==i.length;r++)this.zc.V(i[n]),n++;for(r=0;r>t&&0!==n;r--)this.zc.V("half_undo"),n--;if(this.Yl=n,this.nl(),this.Nl.Lk(["forw1","forw10"],n!==i.length),this.Nl.Lk(["back1","back10"],0!==n),this.Jl(),n<i.length?this.Kl(i[n]):this.Kl(null),this.inEvalMode){var e=n>0?i[n-1]:null;e&&e.length<=3&&this.afterReplay(e)}}},{"../GameLogic":2,"../Grid":5,"../ScoreAnalyser":8,"../constants":33,"../main":35,"../userPreferences":43,"./Board":36,"./Dome":37,"./NewGameDlg":38,"./PopupDlg":39}],41:[function(t,i,n){var r='body {\n  background-color: #AB8274;\n  font-family: "Arial";\n  margin: 0px;\n}\n::-webkit-scrollbar {\n  -webkit-appearance: none;\n  width: 7px;\n  height: 7px;\n}\n::-webkit-scrollbar-track {\n  -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.2);\n  -webkit-border-radius: 10px;\n  border-radius: 7px;\n  margin: 1px;\n}\n::-webkit-scrollbar-thumb {\n  border-radius: 7px;\n  background-color: rgba(0, 0, 0, 0.5);\n  -webkit-box-shadow: 0 0 1px rgba(255, 255, 255, 0.5);\n}\n.pageTitle {\n  margin-top: 7px;\n  margin-bottom: 7px;\n  font-size: 40px;\n  font-weight: bold;\n}\n.subTitle {\n  font-size: 30px;\n  margin-top: 0.5em;\n  margin-bottom: 5px;\n}\n.logBox {\n  font-size: 28px;\n  font-family: "Arial";\n  background-color: white;\n  border: solid #cca 1px;\n  border-radius: 8px;\n  padding: 5px;\n  overflow-y: auto;\n  word-wrap: break-word;\n}\n.inputLbl {\n  margin-left: 10px;\n  font-size: 28px;\n}\n.inputBox {\n  margin: 17px 13px 17px 13px;\n  min-height: 1cm;\n  text-align: left;\n  font-size: 42px;\n}\nbutton {\n  margin-right: 10px;\n  margin-bottom: 10px;\n  border-radius: 13px;\n  width: 160px;\n  height: 80px;\n  font-size: 28px;\n  border-color: #987;\n  background-color: #765;\n  color: #fed;\n}\nbutton.toggled {\n  background-color: #AD4343;\n}\nbutton.disabled {\n  color: #888;\n  opacity: 0.6;\n}\n.chkBoxDiv {\n  display: inline-block;\n  margin-right: 10px;\n}\n.chkBox {\n  margin: 5px 3px 14px 2px;\n  width: 29px;\n  height: 1.5em;\n}\n.chkLbl {\n  font-size: 28px;\n}\n.dropDwn {\n  font-size: 42px;\n  margin: 17px 13px 17px 13px;\n}\n.radioBtn {\n  margin: 17px 0px 17px 13px;\n  width: 29px;\n  height: 1.5em;\n}\n.radioLbl {\n  margin-right: 13px;\n}\n.dialog {\n  z-index: 1000;\n  position: relative;\n  margin: 0 auto;\n  top: 200px;\n  width: 45%;\n  padding: 10px;\n  background-color: #ffe;\n  border: solid #cca 1px;\n  border-radius: 10px;\n  font-family: Arial;\n  font-size: 42px;\n}\n.dialogTitle {\n  font-size: 50px;\n  background-color: #ffebce;\n  border: solid 1px rgba(195, 50, 50, 0.2);\n  border-radius: 10px;\n  margin: -6px;\n  margin-bottom: 15px;\n  padding: 10px 0px 10px 12px;\n}\n.popupBackground {\n  z-index: 2000;\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.5);\n}\n.popupDlg {\n  position: relative;\n  top: 150px;\n  margin: 0 auto;\n  width: 50%;\n}\n.popupDlg .content {\n  padding: 20px;\n  white-space: pre-wrap;\n}\n.popupDlg .btnDiv {\n  width: 100%;\n  display: inline-block;\n}\n.popupDlg .btnDiv .popupDlgButton {\n  min-width: 220px;\n  height: 100%;\n  min-height: 80px;\n  font-size: 30px;\n  float: right;\n  margin-right: 0;\n  margin-left: 10px;\n}\n.gameUi {\n  padding: 2px;\n}\n.gameUi .board {\n  background-color: #402F23;\n  border-radius: 7px;\n}\n.gameUi .board .wgo-board {\n  margin: 0 auto;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n  /* disables grey shade on long-tap for Safari */\n  /* Below avoid issues when tap-hold on Android */\n  -webkit-user-select: none;\n  -webkit-touch-callout: none;\n}\n.gameUi .boardDesc {\n  margin-top: 3px;\n  font-weight: bold;\n  font-style: italic;\n}\n.gameUi button {\n  min-width: 160px;\n  height: 80px;\n}\n.gameUi a {\n  color: #a63;\n}\n.gameUi .statusBar {\n  position: relative;\n  box-sizing: border-box;\n  margin-top: 7px;\n  background-color: #B9A698;\n  border: rgba(0, 0, 0, 0.35) 1px solid;\n  border-radius: 5px;\n}\n.gameUi .statusBar .gameInfo {\n  display: inline-block;\n  box-sizing: border-box;\n  margin: 4px 5px 0 10px;\n  padding: 1px 3px;\n  width: 280px;\n  height: 44px;\n  overflow-y: auto;\n  font-size: 16px;\n  font-family: tahoma;\n  background-color: #EDDDCE;\n  border-radius: 7px;\n  border: rgba(0, 0, 0, 0.35) 1px solid;\n}\n.gameUi .statusBar .message {\n  display: inline-block;\n  position: relative;\n  top: 4px;\n  vertical-align: top;\n  width: calc(100% - 495px);\n  overflow-y: auto;\n  font-size: 20px;\n}\n.gameUi .statusBar .oneMove {\n  height: 44px;\n}\n.gameUi .statusBar .oneMove .icon .text {\n  color: #C12A04;\n}\n.gameUi .statusBar .oneMove.black .icon {\n  background-image: url("js/ui/stoneBlack.png");\n}\n.gameUi .statusBar .oneMove.black .text {\n  color: white;\n}\n.gameUi .statusBar .oneMove.white .icon {\n  background-image: url("js/ui/stoneWhite.png");\n}\n.gameUi .statusBar .oneMove.white .text {\n  color: black;\n}\n.gameUi .statusBar .oneMove .label {\n  display: inline-block;\n  position: relative;\n  top: -12px;\n  font-size: 20px;\n  margin-right: 2px;\n}\n.gameUi .statusBar .oneMove .icon {\n  display: inline-block;\n  position: relative;\n  top: 3px;\n  background-repeat: no-repeat;\n  background-size: 100%;\n  width: 42px;\n  height: 42px;\n}\n.gameUi .statusBar .oneMove .icon .text {\n  position: absolute;\n  width: 100%;\n  text-align: center;\n  top: 8px;\n  font-size: 20px;\n  font-weight: bold;\n}\n.gameUi .statusBar .lastMove {\n  display: inline-block;\n  position: relative;\n  top: -1px;\n  padding-left: 3px;\n}\n.gameUi .statusBar .nextPlayer {\n  position: absolute;\n  right: 10px;\n  top: 3px;\n}\n.gameUi .mainControls {\n  margin-top: 10px;\n}\n.gameUi .mainControls .outputBox {\n  width: 410px;\n  min-width: 200px;\n  font-size: 22px;\n  font-weight: bold;\n  margin-right: 10px;\n  margin-bottom: 10px;\n}\n.gameUi .devDiv {\n  min-width: 600px;\n  border: #755;\n  border-width: 1px 2px 2px 1px;\n  border-style: solid;\n  border-radius: 10px;\n  background-color: #FAEBD7;\n  padding: 7px;\n}\n.gameUi .devDiv .devControls {\n  font-size: 24px;\n}\n.gameUi .devDiv .options {\n  display: inline-block;\n  vertical-align: top;\n  max-width: 252px;\n  margin-right: 5px;\n}\n.gameUi .devDiv .options .emailGameLink {\n  display: inline-block;\n  margin-right: 10px;\n}\n.gameUi .devDiv .options .dropDwn {\n  font-size: 24px;\n  margin: 0px 10px 5px 0px;\n}\n.gameUi .devDiv .devLogBox {\n  display: inline-block;\n  height: 102px;\n  width: 460px;\n  font-size: 20px;\n  font-weight: bold;\n}\n.testTitle {\n  margin-top: 40px;\n  margin-bottom: 10px;\n  font-size: 20px;\n  font-weight: bold;\n}\n.debugDiv {\n  margin-left: 20px;\n}\n.patternDiv {\n  display: flex;\n}\n.patternDiv .namePatternLabel {\n  position: relative;\n  top: 30px;\n}\n.patternDiv .namePatternInput {\n  flex: 1;\n  min-width: 100px;\n  max-width: 600px;\n}\n.testOutputBox {\n  height: 160px;\n  font-size: 14px;\n}\n.testErrorBox {\n  word-wrap: break-word;\n  height: 250px;\n  font-size: 14px;\n  font-family: \'Courier\';\n}\n.boardDesc {\n  font-family: \'Courier\';\n}\n.newGameBackground {\n  background-image: url("js/ui/photo.jpg");\n  background-repeat: repeat-y;\n  background-size: cover;\n  height: 1500px;\n}\n.newGameDialog {\n  min-width: 800px;\n}\n.newGameDialog .handicapInput {\n  width: 20px;\n  text-align: center;\n}\n.newGameDialog .movesInput {\n  width: 50%;\n}\n.newGameDialog .defAiInfo {\n  font-size: 50%;\n  font-style: italic;\n  width: 400px;\n  display: inline-block;\n}\n.newGameDialog .btnDiv {\n  width: 100%;\n  height: 100px;\n}\n.newGameDialog .btnDiv .startButton {\n  width: 240px;\n  height: 100%;\n  font-size: 30px;\n  float: right;\n  margin-right: 0;\n}\n';
t("lessify")(r),i.g=r},{lessify:49}],42:[function(t,i,n){"use strict";function r(){this.km=this.lm=0,this.mm=this.nm=!1,this.target=null,this.om=this.startTime=this.pm=0}function e(t){var i=t.currentTarget;return d.om+=t.changedTouches.length,d.om>1?d.qm(i):void d.rm(t.changedTouches[0],i)}function o(t){return d.om-=t.changedTouches.length,d.om>0?console.warn("Extra touchend count?",t):void(d.sm(t.changedTouches[0],d.target)&&t.preventDefault())}function s(t){return t.changedTouches.length>1?d.qm(d.target):void(d.tm(t.changedTouches[0],d.target)&&t.preventDefault())}function h(t){d.om-=t.changedTouches.length,d.qm(d.target)}function a(t){t.button===v&&d.rm(t,t.currentTarget)}function u(t){t.button===v&&d.sm(t,d.target)&&t.preventDefault()}function c(t){d.tm(t,d.target)&&t.preventDefault()}var f=10,l=50,p=300,g=500,v=0,d=i.g=new r;r.prototype.um=function(t,i){if(i)null!==this.target&&console.error("Forgot to stop listening on",this.target),this.mm=!0,this.target=t,t.addEventListener("touchmove",s),t.addEventListener("touchend",o),t.addEventListener("touchcancel",h),document.addEventListener("mousemove",c),document.addEventListener("mouseup",u);else{if(null===this.target)return console.warn("Not listening anyway");this.mm=!1,this.target=null,t.removeEventListener("touchmove",s),t.removeEventListener("touchend",o),t.removeEventListener("touchcancel",h),document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",u)}},r.prototype.rm=function(t,i){this.um(i,!0),this.mm=!0,this.km=t.clientX,this.lm=t.clientY,this.startTime=Date.now();var n=this;this.vm&&window.clearTimeout(this.vm),this.vm=window.setTimeout(function(){n.vm=null,n.mm&&!n.nm&&n.wm(t,i)},p)},r.prototype.wm=function(t,i){this.nm=!0,this.startTime=Date.now(),i.xm("dragStart",t.pageX-i.offsetLeft,t.pageY-i.offsetTop)},r.prototype.qm=function(t){return this.om=0,this.um(t,!1),this.nm&&(this.nm=!1,t.xm("dragCancel")),!0},r.prototype.tm=function(t,i){var n=Date.now();return n-this.pm<l?!0:(this.pm=n,this.nm?(i.xm("drag",t.pageX-i.offsetLeft,t.pageY-i.offsetTop),!0):Math.abs(t.clientX-this.km)+Math.abs(t.clientY-this.lm)<f?!1:n-this.startTime<p?(this.um(i,!1),!1):this.wm(t,i))},r.prototype.sm=function(t,i){if(this.nm&&Date.now()-this.startTime<g)return this.qm(i);var n=this.nm?"dragEnd":"tap";return i.xm(n,t.pageX-i.offsetLeft,t.pageY-i.offsetTop),this.um(i,!1),this.nm=!1,!0},r.prototype.tk=function(t,i){t.xm=i,t.addEventListener("touchstart",e),t.addEventListener("mousedown",a)}},{}],43:[function(t,i,n){"use strict";function r(){this.ym=null,this.zm=0,this.Am=null,this.Bm={},this.Cm()}var e=t("./log"),o=t("./main"),s=o.appName,h=180,a="all";r.prototype.close=function(){this.Dm(null)},r.prototype.Dm=function(t){this.ym&&this.Em(),this.Am=t},r.prototype.Cm=function(){try{var t=window.localStorage.getItem(s);t&&(this.Bm=JSON.parse(t))}catch(i){e.warn}},r.prototype.Fm=function(t){var i=this;t||(t=h);var n=Date.now()+1e3*t;this.ym&&this.zm<=n||(this.ym&&window.clearTimeout(this.ym),this.zm=n,this.ym=window.setTimeout(function(){i.ym=null,i.Em()},1e3*t))},r.prototype.Em=function(){try{this.ym&&(window.clearTimeout(this.ym),this.ym=null),window.localStorage.setItem(s,JSON.stringify(this.Bm))}catch(t){e.warn}},r.prototype.jl=function(t,i,n){t=(this.Am&&!n?this.Am:a)+"#"+t;var r=this.Bm[t];return void 0===r?i:r},r.prototype.ml=function(t,i,n){t=(this.Am?this.Am:a)+"#"+t,this.Bm[t]=i,this.Fm(n)};var u=new r;i.g=u},{"./log":34,"./main":35}],44:[function(t,i,n){"function"==typeof Object.create?i.g=function(t,i){t.Gm=i,t.prototype=Object.create(i.prototype,{constructor:{value:t,Hm:!1,Im:!0,Jm:!0}})}:i.g=function(t,i){t.Gm=i;var n=function(){};n.prototype=i.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],45:[function(t,i,n){function r(){c=!1,h.length?u=h.concat(u):f=-1,u.length&&e()}function e(){if(!c){var t=setTimeout(r);c=!0;for(var i=u.length;i;){for(h=u,u=[];++f<i;)h[f].ei();f=-1,i=u.length}h=null,c=!1,clearTimeout(t)}}function o(t,i){this.Lm=t,this.Mm=i}function s(){}var h,a=i.g={},u=[],c=!1,f=-1;a.Km=function(t){var i=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)i[n-1]=arguments[n];u.push(new o(t,i)),1!==u.length||c||setTimeout(e,0)},o.prototype.ei=function(){this.Lm.apply(null,this.Mm)},a.title="browser",a.Nm=!0,a.Om={},a.Pm=[],a.version="",a.Qm={},a.Pk=s,a.addListener=s,a.Rm=s,a.Sm=s,a.removeListener=s,a.Tm=s,a.Um=s,a.Vm=function(t){throw new Error("process.binding is not supported")},a.Wm=function(){return"/"},a.Xm=function(t){throw new Error("process.chdir is not supported")},a.Ym=function(){return 0}},{}],46:[function(t,i,n){i.g=function(t){return t&&"object"==typeof t&&"function"==typeof t.I&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],47:[function(t,i,n){(function(i,r){function e(t,i){var r={_m:[],an:s};return arguments.length>=3&&(r.bn=arguments[2]),arguments.length>=4&&(r.cn=arguments[3]),v(i)?r.dn=i:i&&n.en(r,i),w(r.dn)&&(r.dn=!1),w(r.bn)&&(r.bn=2),w(r.cn)&&(r.cn=!1),w(r.fn)&&(r.fn=!0),r.cn&&(r.an=o),a(r,t,r.bn)}function o(t,i){var n=e.pn[i];return n?"["+e.cn[n][0]+"m"+t+"["+e.cn[n][1]+"m":t}function s(t,i){return t}function h(t){var i={};return t.forEach(function(t,n){i[t]=!0}),i}function a(t,i,r){if(t.fn&&i&&S(i.gn)&&i.gn!==n.gn&&(!i.constructor||i.constructor.prototype!==i)){var e=i.gn(r,t);return m(e)||(e=a(t,e,r)),e}var o=u(t,i);if(o)return o;var s=Object.keys(i),v=h(s);if(t.dn&&(s=Object.getOwnPropertyNames(i)),N(i)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return c(i);if(0===s.length){if(S(i)){var d=i.name?": "+i.name:"";return t.an("[Function"+d+"]","special")}if(x(i))return t.an(RegExp.prototype.toString.call(i),"regexp");if(G(i))return t.an(Date.prototype.toString.call(i),"date");if(N(i))return c(i)}var b="",y=!1,k=["{","}"];if(g(i)&&(y=!0,k=["[","]"]),S(i)){var w=i.name?": "+i.name:"";b=" [Function"+w+"]"}if(x(i)&&(b=" "+RegExp.prototype.toString.call(i)),G(i)&&(b=" "+Date.prototype.toUTCString.call(i)),N(i)&&(b=" "+c(i)),0===s.length&&(!y||0==i.length))return k[0]+b+k[1];if(0>r)return x(i)?t.an(RegExp.prototype.toString.call(i),"regexp"):t.an("[Object]","special");t._m.push(i);var j;return j=y?f(t,i,r,v,s):s.map(function(n){return l(t,i,r,v,n,y)}),t._m.pop(),p(j,b,k)}function u(t,i){if(w(i))return t.an("undefined","undefined");if(m(i)){var n="'"+JSON.stringify(i).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.an(n,"string")}return y(i)?t.an(""+i,"number"):v(i)?t.an(""+i,"boolean"):d(i)?t.an("null","null"):void 0}function c(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,i,n,r,e){for(var o=[],s=0,h=i.length;h>s;++s)M(i,String(s))?o.push(l(t,i,n,r,String(s),!0)):o.push("");return e.forEach(function(e){e.match(/^\d+$/)||o.push(l(t,i,n,r,e,!0))}),o}function l(t,i,n,r,e,o){var s,h,u;if(u=Object.getOwnPropertyDescriptor(i,e)||{value:i[e]},u.get?h=u.set?t.an("[Getter/Setter]","special"):t.an("[Getter]","special"):u.set&&(h=t.an("[Setter]","special")),M(r,e)||(s="["+e+"]"),h||(t._m.indexOf(u.value)<0?(h=d(n)?a(t,u.value,null):a(t,u.value,n-1),h.indexOf("\n")>-1&&(h=o?h.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+h.split("\n").map(function(t){return"   "+t}).join("\n"))):h=t.an("[Circular]","special")),w(s)){if(o&&e.match(/^\d+$/))return h;s=JSON.stringify(""+e),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.an(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.an(s,"string"))}return s+": "+h}function p(t,i,n){var r=0,e=t.reduce(function(t,i){return r++,i.indexOf("\n")>=0&&r++,t+i.replace(/\u001b\[\d\d?m/g,"").length+1},0);return e>60?n[0]+(""===i?"":i+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+i+" "+t.join(", ")+" "+n[1]}function g(t){return Array.isArray(t)}function v(t){return"boolean"==typeof t}function d(t){return null===t}function b(t){return null==t}function y(t){return"number"==typeof t}function m(t){return"string"==typeof t}function k(t){return"symbol"==typeof t}function w(t){return void 0===t}function x(t){return j(t)&&"[object RegExp]"===D(t)}function j(t){return"object"==typeof t&&null!==t}function G(t){return j(t)&&"[object Date]"===D(t)}function N(t){return j(t)&&("[object Error]"===D(t)||t instanceof Error)}function S(t){return"function"==typeof t}function E(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function D(t){return Object.prototype.toString.call(t)}function A(t){return 10>t?"0"+t.toString(10):t.toString(10)}function z(){var t=new Date,i=[A(t.getHours()),A(t.getMinutes()),A(t.getSeconds())].join(":");return[t.getDate(),O[t.getMonth()],i].join(" ")}function M(t,i){return Object.prototype.hasOwnProperty.call(t,i)}var C=/%[sdj%]/g;n.format=function(t){if(!m(t)){for(var i=[],n=0;n<arguments.length;n++)i.push(e(arguments[n]));return i.join(" ")}for(var n=1,r=arguments,o=r.length,s=String(t).replace(C,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(i){return"[Circular]"}default:return t}}),h=r[n];o>n;h=r[++n])s+=d(h)||!j(h)?" "+h:" "+e(h);return s},n.Zm=function(t,e){function o(){if(!s){if(i.throwDeprecation)throw new Error(e);i.traceDeprecation?console.trace(e):console.error(e),s=!0}return t.apply(this,arguments)}if(w(r.process))return function(){return n.Zm(t,e).apply(this,arguments)};if(i.noDeprecation===!0)return t;var s=!1;return o};var B,H={};n.$m=function(t){if(w(B)&&(B=i.Om.NODE_DEBUG||""),t=t.toUpperCase(),!H[t])if(new RegExp("\\b"+t+"\\b","i").test(B)){var r=i.pid;H[t]=function(){var i=n.format.apply(n,arguments);console.error("%s %d: %s",t,r,i)}}else H[t]=function(){};return H[t]},n.gn=e,e.cn={bold:[1,22],hn:[3,23],"in":[4,24],inverse:[7,27],jn:[37,39],kn:[90,39],ln:[30,39],blue:[34,39],mn:[36,39],green:[32,39],nn:[35,39],red:[31,39],on:[33,39]},e.pn={qn:"cyan",number:"yellow",rn:"yellow",undefined:"grey",sn:"bold",tn:"green",un:"magenta",vn:"red"},n.isArray=g,n.wn=v,n.xn=d,n.yn=b,n.zn=y,n.An=m,n.Bn=k,n.Cn=w,n.Dn=x,n.En=j,n.Fn=G,n.Gn=N,n.Hn=S,n.In=E,n.isBuffer=t("./support/isBuffer");var O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",z(),n.format.apply(n,arguments))},n.inherits=t("inherits"),n.en=function(t,i){if(!i||!j(i))return t;for(var n=Object.keys(i),r=n.length;r--;)t[n[r]]=i[n[r]];return t}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":46,_process:45,inherits:44}],48:[function(t,i,n){i.g=function(t,i){var n=i||document;if(n.createStyleSheet){var r=n.createStyleSheet();return r.cssText=t,r.ownerNode}var e=n.getElementsByTagName("head")[0],o=n.createElement("style");return o.type="text/css",o.styleSheet?o.styleSheet.cssText=t:o.appendChild(n.createTextNode(t)),e.appendChild(o),o},i.g.Jn=function(t){if(document.createStyleSheet)return document.createStyleSheet(t).ownerNode;var i=document.getElementsByTagName("head")[0],n=document.createElement("link");return n.rel="stylesheet",n.href=t,i.appendChild(n),n}},{}],49:[function(t,i,n){i.g=t("cssify")},{cssify:48}],50:[function(t,i,n){i.g={name:"rubigolo",version:"0.2.0",description:"",Kn:"Olivier Lombart (kubicle)",Ln:"MIT",scripts:{Mn:"browserify js/app.js -t lessify | uglifyjs -o build/bld.js -m --mangle-props --reserved-file build/reserved.json --reserve-domprops --mangle-regex=\"/^[^.]/\" -c pure_funcs=['log.debug','log.warn']",Nn:"watchify js/test/testApp.js -o build/devBuild.js -t lessify -v",test:"node js/test/ciTestMain.js --ci"},On:"js/app.js",Pn:{type:"git",url:"https://github.com/kubicle/rubigolo"},Qn:{url:"https://github.com/kubicle/rubigolo/issues"},Rn:["baduk","go","igo","weiqi"],Sn:{Tn:"=1.2.1"},Un:{Vn:"~0.3.22",Wn:"~0.1.1",Xn:"~10.2.4",lessify:"~1.0.1",Yn:"~3.2.2",Zn:"~2.6.2"}}},{}]},{},[32]);