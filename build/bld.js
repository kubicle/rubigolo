!function t(i,n,r){function e(s,h){if(!n[s]){if(!i[s]){var a="function"==typeof require&&require;if(!h&&a)return a(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[s]={g:{}};i[s][0].call(c.g,function(t){var n=i[s][1][t];return e(n?n:t)},c,c.g,t,i,n,r)}return n[s].g}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)e(r[s]);return e}({1:[function(t,i,n){"function"==typeof Object.create?i.g=function(t,i){t.h=i,t.prototype=Object.create(i.prototype,{constructor:{value:t,i:!1,j:!0,k:!0}})}:i.g=function(t,i){t.h=i;var n=function(){};n.prototype=i.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],2:[function(t,i,n){function r(){c=!1,h.length?u=h.concat(u):f=-1,u.length&&e()}function e(){if(!c){var t=setTimeout(r);c=!0;for(var i=u.length;i;){for(h=u,u=[];++f<i;)h[f].l();f=-1,i=u.length}h=null,c=!1,clearTimeout(t)}}function o(t,i){this.o=t,this.p=i}function s(){}var h,a=i.g={},u=[],c=!1,f=-1;a.m=function(t){var i=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)i[n-1]=arguments[n];u.push(new o(t,i)),1!==u.length||c||setTimeout(e,0)},o.prototype.l=function(){this.o.apply(null,this.p)},a.title="browser",a.q=!0,a.s={},a.t=[],a.version="",a.u={},a.v=s,a.addListener=s,a.A=s,a.C=s,a.removeListener=s,a.D=s,a.F=s,a.G=function(t){throw new Error("process.binding is not supported")},a.H=function(){return"/"},a.I=function(t){throw new Error("process.chdir is not supported")},a.J=function(){return 0}},{}],3:[function(t,i,n){i.g=function(t){return t&&"object"==typeof t&&"function"==typeof t.K&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],4:[function(t,i,n){(function(i,r){function e(t,i){var r={N:[],O:s};return arguments.length>=3&&(r.P=arguments[2]),arguments.length>=4&&(r.R=arguments[3]),d(i)?r.S=i:i&&n.T(r,i),k(r.S)&&(r.S=!1),k(r.P)&&(r.P=2),k(r.R)&&(r.R=!1),k(r.U)&&(r.U=!0),r.R&&(r.O=o),a(r,t,r.P)}function o(t,i){var n=e.da[i];return n?"["+e.R[n][0]+"m"+t+"["+e.R[n][1]+"m":t}function s(t,i){return t}function h(t){var i={};return t.forEach(function(t,n){i[t]=!0}),i}function a(t,i,r){if(t.U&&i&&D(i.V)&&i.V!==n.V&&(!i.constructor||i.constructor.prototype!==i)){var e=i.V(r,t);return m(e)||(e=a(t,e,r)),e}var o=u(t,i);if(o)return o;var s=Object.keys(i),d=h(s);if(t.S&&(s=Object.getOwnPropertyNames(i)),C(i)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return c(i);if(0===s.length){if(D(i)){var v=i.name?": "+i.name:"";return t.O("[Function"+v+"]","special")}if(x(i))return t.O(RegExp.prototype.toString.call(i),"regexp");if(E(i))return t.O(Date.prototype.toString.call(i),"date");if(C(i))return c(i)}var b="",y=!1,w=["{","}"];if(g(i)&&(y=!0,w=["[","]"]),D(i)){var k=i.name?": "+i.name:"";b=" [Function"+k+"]"}if(x(i)&&(b=" "+RegExp.prototype.toString.call(i)),E(i)&&(b=" "+Date.prototype.toUTCString.call(i)),C(i)&&(b=" "+c(i)),0===s.length&&(!y||0==i.length))return w[0]+b+w[1];if(0>r)return x(i)?t.O(RegExp.prototype.toString.call(i),"regexp"):t.O("[Object]","special");t.N.push(i);var j;return j=y?f(t,i,r,d,s):s.map(function(n){return l(t,i,r,d,n,y)}),t.N.pop(),p(j,b,w)}function u(t,i){if(k(i))return t.O("undefined","undefined");if(m(i)){var n="'"+JSON.stringify(i).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.O(n,"string")}return y(i)?t.O(""+i,"number"):d(i)?t.O(""+i,"boolean"):v(i)?t.O("null","null"):void 0}function c(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,i,n,r,e){for(var o=[],s=0,h=i.length;h>s;++s)B(i,String(s))?o.push(l(t,i,n,r,String(s),!0)):o.push("");return e.forEach(function(e){e.match(/^\d+$/)||o.push(l(t,i,n,r,e,!0))}),o}function l(t,i,n,r,e,o){var s,h,u;if(u=Object.getOwnPropertyDescriptor(i,e)||{value:i[e]},u.get?h=u.set?t.O("[Getter/Setter]","special"):t.O("[Getter]","special"):u.set&&(h=t.O("[Setter]","special")),B(r,e)||(s="["+e+"]"),h||(t.N.indexOf(u.value)<0?(h=v(n)?a(t,u.value,null):a(t,u.value,n-1),h.indexOf("\n")>-1&&(h=o?h.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+h.split("\n").map(function(t){return"   "+t}).join("\n"))):h=t.O("[Circular]","special")),k(s)){if(o&&e.match(/^\d+$/))return h;s=JSON.stringify(""+e),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.O(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.O(s,"string"))}return s+": "+h}function p(t,i,n){var r=0,e=t.reduce(function(t,i){return r++,i.indexOf("\n")>=0&&r++,t+i.replace(/\u001b\[\d\d?m/g,"").length+1},0);return e>60?n[0]+(""===i?"":i+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+i+" "+t.join(", ")+" "+n[1]}function g(t){return Array.isArray(t)}function d(t){return"boolean"==typeof t}function v(t){return null===t}function b(t){return null==t}function y(t){return"number"==typeof t}function m(t){return"string"==typeof t}function w(t){return"symbol"==typeof t}function k(t){return void 0===t}function x(t){return j(t)&&"[object RegExp]"===X(t)}function j(t){return"object"==typeof t&&null!==t}function E(t){return j(t)&&"[object Date]"===X(t)}function C(t){return j(t)&&("[object Error]"===X(t)||t instanceof Error)}function D(t){return"function"==typeof t}function S(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function X(t){return Object.prototype.toString.call(t)}function R(t){return 10>t?"0"+t.toString(10):t.toString(10)}function M(){var t=new Date,i=[R(t.getHours()),R(t.getMinutes()),R(t.getSeconds())].join(":");return[t.getDate(),z[t.getMonth()],i].join(" ")}function B(t,i){return Object.prototype.hasOwnProperty.call(t,i)}var G=/%[sdj%]/g;n.format=function(t){if(!m(t)){for(var i=[],n=0;n<arguments.length;n++)i.push(e(arguments[n]));return i.join(" ")}for(var n=1,r=arguments,o=r.length,s=String(t).replace(G,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(i){return"[Circular]"}default:return t}}),h=r[n];o>n;h=r[++n])s+=v(h)||!j(h)?" "+h:" "+e(h);return s},n.L=function(t,e){function o(){if(!s){if(i.throwDeprecation)throw new Error(e);i.traceDeprecation?console.trace(e):console.error(e),s=!0}return t.apply(this,arguments)}if(k(r.process))return function(){return n.L(t,e).apply(this,arguments)};if(i.noDeprecation===!0)return t;var s=!1;return o};var A,O={};n.M=function(t){if(k(A)&&(A=i.s.NODE_DEBUG||""),t=t.toUpperCase(),!O[t])if(new RegExp("\\b"+t+"\\b","i").test(A)){var r=i.pid;O[t]=function(){var i=n.format.apply(n,arguments);console.error("%s %d: %s",t,r,i)}}else O[t]=function(){};return O[t]},n.V=e,e.R={bold:[1,22],X:[3,23],Y:[4,24],inverse:[7,27],Z:[37,39],$:[90,39],_:[30,39],blue:[34,39],aa:[36,39],green:[32,39],ba:[35,39],red:[31,39],ca:[33,39]},e.da={ea:"cyan",number:"yellow",fa:"yellow",undefined:"grey",ga:"bold",ha:"green",ia:"magenta",ja:"red"},n.isArray=g,n.ka=d,n.la=v,n.ma=b,n.na=y,n.oa=m,n.pa=w,n.qa=k,n.ra=x,n.sa=j,n.ta=E,n.ua=C,n.va=D,n.wa=S,n.isBuffer=t("./support/isBuffer");var z=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",M(),n.format.apply(n,arguments))},n.inherits=t("inherits"),n.T=function(t,i){if(!i||!j(i))return t;for(var n=Object.keys(i),r=n.length;r--;)t[n[r]]=i[n[r]];return t}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":3,_process:2,inherits:1}],5:[function(t,i,n){i.g={xa:{ya:!0,za:!0},Aa:{ya:!0,za:!0},Ba:{}}},{}],6:[function(t,i,n){"use strict";function r(t){this.history=[],this.Fa=[],this.Ga={},this.Ha=[],this.Ia(p),this.Ja=null,this.Ka=this.La=this.Ma=0,this.Na=this.Oa=f,this.Pa=this.Qa=null,this.Ra=this.Sa=null,t&&this.K(t)}var e=t("./constants"),o=t("./main"),s=t("./Goban"),h=t("./Grid"),a=t("./HandicapSetter"),u=t("./SgfReader"),c=t("../config/rules.json"),f=e.Ca,l=e.Da,p=e.Ea;i.g=r,r.prototype.Ta=function(t,i){this.Ha[t]=i},r.prototype.Ia=function(t,i){this.Ua=t;var n=c[t.toLowerCase()];if(!n){if(!i)throw new Error("Invalid rules: "+t+"\nValid values: "+Object.keys(c));n=c[p.toLowerCase()]}this.za=n.za||!1,this.ya=n.ya||!1},r.prototype.K=function(t){this.Va(t.Oa),this.Ta(f,t.Ha[f]),this.Ta(l,t.Ha[l]),this.Ia(t.Ua),this.Wa(t.Ja.Xa,t.Ka,t.La),this.Ya(t.history.join(","))},r.prototype.Wa=function(t,i,n){return this.history.clear(),this.Fa.clear(),this.Ma=0,this.Qa=this.Pa=!1,this.Ra=this.Sa=null,this.Ja&&t===this.Ja.Xa?this.Ja.clear():this.Ja=new s(t),this.Ja.Za(this.za),i=void 0!==i?i:0,this.$a(i),this.La=void 0!==n?n:i?.5:6.5,this.Ja.Xa!==t?this._a("Size could not be set: "+t):this.Ka!==i?this._a("Handicap could not be set: "+i):!0},r.prototype.Va=function(t){this.Na=this.Oa=t},r.prototype.$a=function(t){if(this.history.length>0)throw new Error("Handicap cannot be changed during a game");return this.Ka=a.ab(this.Ja,t),this.Va(this.Ka>0?l:f),!0},r.prototype.bb=function(t,i){if(o.log.error(t),!i)throw new Error(t);return i.push(t),!1},r.prototype.Ya=function(t,i){if(!t)return!0;for(var n=t.split(","),r=0;r<n.length;r++)if(!this.cb(n[r]))return this.bb("Failed playing loaded move #"+(r+1)+":\n"+this.eb().join(", "),i);return!0},r.prototype.fb=function(t,i,n){var r,e=new u;try{this.Ga=r=e.gb(t,n)}catch(o){return this.bb("Failed loading SGF moves:\n"+o,i)}return this.Wa(r.hb,0,r.La),this.Ta(f,r.playerBlack),this.Ta(l,r.playerWhite),this.Ia(r.rules,!0),this.Ya(e.ib(),i)},r.prototype.jb=function(t,i){return u.kb(t)?this.fb(t,i):this.Ya(t,i)},r.prototype.cb=function(t){return this.Qa?this._a("Game already ended"):/^[B|W]?[a-z][1-2]?[0-9]$/.test(t)?this.lb(t):"undo"===t?this.mb():"half_undo"===t?this.mb(!0):t.startsWith("resi")?this.nb():"pass"===t?this.ob():t.startsWith("hand")?this.$a(t.split(":")[1]):t.startsWith("load:")?this.Ya(t.slice(5)):t.startsWith("log")?this.pb(t.split(":")[1]):this._a("Invalid command: "+t)},r.prototype.lb=function(t){var i=this.qb(t);3===i.length&&(this.Na=i[2]);var n=i[0],r=i[1];return this.Ja.rb(n,r,this.Na)?(this.Ja.sb(n,r,this.Na),this.tb(t),this.ub(),this.Ma=0,!0):this._a("Invalid move: "+t)},r.prototype.qb=function(t){var i=t[0];if("B"===i||"W"===i)return h.vb(t.substr(1)).concat("B"===i?f:l);var n=h.vb(t,!0);if(!n){if("pass"===t||"resi"===t.substr(0,4))return null;throw new Error("Illegal move parsed: "+t)}return n},r.prototype.nb=function(t,i){t=void 0!==t?t:this.Na,this.Ra=t,this.Sa=i;var n=(t===f?"B":"W")+"resign"+(i?"-"+i:"");return this.tb(n),this.Qa=!0,this.Pa=!1,!0},r.prototype.ob=function(){return this.tb("pass"),this.Ma+=1,this.Ma>=2&&(this.Pa=!0),this.ub(),!0},r.prototype.wb=function(t,i){return this.Pa?(this.Pa=!1,t?(this.Qa=!0,!0):(i!==this.Na&&(this.history.pop(),this.ub()),!0)):this._a("The game is not ending yet")},r.prototype.xb=function(){return this.history.length},r.prototype.yb=function(){var t=this.Ka>0?"handicap:"+this.Ka+",":"",i=this.history,n=i.length&&2===i[0].length?this.Oa===f?"B":"W":"";return t+n+i.join(",")+" ("+i.length+" moves)"},r.prototype._a=function(t){return this.Fa.push(t),!1},r.prototype.eb=function(){var t=this.Fa;return this.Fa=[],t},r.prototype.pb=function(t){var i=t.split("="),n=0!==parseInt(i[1]);switch(i[0]){case"group":o.zb=n;break;case"ai":o.Ab=n;break;case"all":o.debug=o.zb=o.Ab=n;break;default:return this._a("Invalid log command: "+t)}return!0},r.prototype.ub=function(){this.Na=1-this.Na},r.prototype.tb=function(t){return this.history.push(t)},r.prototype.mb=function(t){var i=t?1:2;if(this.history.length<i)return this._a("Nothing to undo");for(var n=i;n>=1;n--){var r=this.history.pop();r.endsWith("pass")||this.Ja.Bb()}return t&&this.ub(),this.Ma=0,!0}},{"../config/rules.json":5,"./Goban":8,"./Grid":9,"./HandicapSetter":11,"./SgfReader":14,"./constants":37,"./main":38}],7:[function(t,i,n){"use strict";function r(t,i,n){this.Cb=t||{},this.Db=i||{},this.name=n||"#"+o++}var e=t("./main"),o=1;i.g=r;var s=.05,h=0,a=1;r.prototype.clone=function(t){return new r(e.clone(this.Cb),e.clone(this.Db),t)},r.prototype.Eb=function(t){this.Db=t},r.prototype.toString=function(){var t="{"+this.name+" - ";for(var i in this.Cb)t+=i+":"+this.Cb[i].toFixed(2)+", ";return t.Fb(", ")+"}"},r.prototype.Gb=function(t){var i=0;for(var n in this.Cb){var r=this.Cb[n],e=t.Cb[n];0>e!=0>r?0>e?(r-=e,e=0):(e-=r,r=0):(r=Math.abs(r),e=Math.abs(e));var o;o=0===e?r>1?1:r:0===r?e>1?1:e:1-(e>=r?r/e:e/r),i+=o}return i},r.prototype.get=function(t,i,n,r){void 0===n&&(n=null),void 0===r&&(r=null);var e=this.Cb[t];if(e)return e;if(this.Cb[t]=i,(n||r)&&(this.Db[t]=[n,r]),n&&r&&n>r)throw new Error("Limits are invalid: "+n+" > "+r);return i},r.prototype.Hb=function(){return JSON.stringify(this)},r.Ib=function(t){var i=JSON.parse(t);this.Cb=i.Cb,this.Db=i.Db},r.prototype.Jb=function(t,i,n,r,e){var o=this.Cb,s=t.Cb;i.Eb(this.Db),n.Eb(this.Db);var h=i.Cb,a=n.Cb,u=~~(Math.random()*o.length),c=~~(Math.random()*u),f=0;for(var l in o)c>f||f>u?(h[l]=o[l],a[l]=s[l]):(h[l]=s[l],a[l]=o[l]),Math.random()<r&&(h[l]=this.Kb(l,h[l],e)),Math.random()<r&&(a[l]=this.Kb(l,a[l],e)),f++},r.prototype.Kb=function(t,i,n){var r,e=this.Db[t];if(e){var o=e[h],u=e[a];if(Math.random()<n)r=o+Math.random()*(u-o);else{var c=1+2*Math.random()*s-s;r=i*c,o&&o>r&&(r=o),u&&r>u&&(r=u)}}else r=i+10*(Math.random()-.5);return r},r.prototype.Lb=function(){for(var t in this.Cb)this.Cb[t]=this.Kb(t,this.Cb[t],1);return this}},{"./main":38}],8:[function(t,i,n){"use strict";function r(t){if(void 0===t&&(t=19),t!==~~t||3>t)throw new Error("Invalid goban size: "+t);this.Xa=t,this.Ob=new o(t,c),this.Pb=new o(t,a),this.Qb=this.Ob.Rb;var i,n;for(n=1;t>=n;n++)for(i=1;t>=i;i++)this.Qb[n][i]=new s(this,i,n,u);for(n=1;t>=n;n++)for(i=1;t>=i;i++)this.Qb[n][i].Sb();r.Tb=new h(this,new s(this,-50,-50,u),-100,0),this.Ub=[r.Tb],this.Vb=[r.Tb],this.Wb=[],this.Xb=0,this.history=[],this.Za(!1)}var e=t("./constants"),o=(t("./main"),t("./Grid")),s=t("./Stone"),h=t("./Group"),a=e.Mb,u=e.EMPTY,c=e.Nb;i.g=r,r.prototype.clear=function(){for(var t=1;t<=this.Xa;t++)for(var i=1;i<=this.Xa;i++){var n=this.Qb[t][i];n.group&&n.group.clear()}this.Ub.shift(),this.Vb.shift(),this.Wb.concat(this.Ub),this.Wb.concat(this.Vb),this.Ub.clear(),this.Vb.clear(),this.Ub.push(r.Tb),this.Vb.push(r.Tb),this.Xb=0,this.history.clear(),this.Za(!1)},r.prototype.Yb=function(t,i){var n=++this.Xb,r=this.Wb.pop();return r?r.Zb(t,i,n):r=new h(this,t,i,n),r},r.prototype.$b=function(t){t._b===this.Xb&&this.Xb--,this.Wb.push(t)},r.prototype.ac=function(){return this.Ob.bc()},r.prototype.cc=function(t){this.Pb.cc(t);for(var i=this.Xa;i>=1;i--)for(var n=1;n<=this.Xa;n++){var r=this.Pb.Rb[i][n];r!==u&&this.sb(n,i,r)}},r.prototype.dc=function(){for(var t={},i=this.Xa;i>=1;i--)for(var n=this.Xa;n>=1;n--){var r=this.Qb[i][n].group;r&&(t[r._b]=r)}return t},r.prototype.ec=function(){for(var t,i="Board:\n"+this.toString()+"\nGroups:\n"+this.Ob.fc(function(t){return t.group?""+t.group._b:"."})+"\nStones in groups:\n",n={},r=this.Ob.Rb,e=0;t=r[e],e<r.length;e++)for(var o,s=t,h=0;o=s[h],h<s.length;h++)o&&o.group&&(n[o.group._b]=o.group);for(var a=1;a<=this.Xb;a++)n[a]&&(i+=n[a].ec()+"\n");return i},r.prototype.toString=function(){return this.Ob.fc()},r.prototype.rb=function(t,i,n){if(1>t||t>this.Xa||1>i||i>this.Xa)return!1;var r=this.Qb[i][t];if(r.color!==u)return!1;if(r.gc(n))return!1;if(this.hc){if(this.ic[this.jc(t,i,n)])return!1}else if(r.kc(n))return!1;return!0},r.prototype.lc=function(t,i){return this.Qb[i][t]},r.prototype.mc=function(t,i){var n=this.Qb[i][t];return n?n.color:c},r.prototype.nc=function(t,i){return this.Qb[i][t].nc()},r.prototype.xb=function(){return this.history.length},r.prototype.sb=function(t,i,n){this.oc(t,i,n);var r=this.Qb[i][t];if(r.color!==u)throw new Error("Tried to play on existing stone in "+r);return this.pc(t,i,n)},r.prototype.Bb=function(){if(!this.history.length)throw new Error("Extra undo");this.history.pop().qc(),this.oc()},r.prototype.pc=function(t,i,n){var r=this.Qb[i][t];return this.history.push(r),r.rc(n),r},r.prototype.sc=function(){this.history.pop().qc()},r.prototype.tc=function(){return this.Ub[this.Ub.length-1]},r.prototype.uc=function(){return this.history[this.history.length-1]},r.prototype.vc=function(t){t=t||[0,0];for(var i=this.Ub.length-1;i>=0;i--){var n=this.Ub[i];t[n.color]+=n.wc.length}return t},r.prototype.Za=function(t){if(this.history.length>0)throw new Error("Superko rule changed during game");this.hc=t,t?(this.xc=this.yc(),this.zc=[],this.ic={}):(this.xc=null,this.zc=this.ic=null)},r.prototype.oc=function(t,i,n){this.hc?t?(this.zc.push(this.xc),this.ic[this.xc]=this.history.length,this.xc=this.jc(t,i,n)):(this.xc=this.zc.pop(),this.ic[this.xc]=null):this.xc=null},r.prototype.jc=function(t,i,n){for(var r=this.Ac(this.xc,t,i,n),e=this.lc(t,i).Bc(1-n),o=e.length-1;o>=0;o--)if(!(e[o].Cc>1))for(var s=e[o].wc,h=s.length-1;h>=0;h--){var a=s[h];r=this.Ac(r,a.Dc,a.Ec,u)}return r},r.prototype.Fc=function(){return this.hc?this.xc:(this.xc||(this.xc=this.ac()),this.xc)};var f=33,l="0".charCodeAt();r.prototype.yc=function(){for(var t="",i="",n=this.Xa,r=1;n>=r;r++)for(var e=this.Qb[r],o=1;n>=o;o++)t+=String.fromCharCode(l+e[o].color+1),4===t.length&&(i+=String.fromCharCode(parseInt(t,3)+f),t="");return t.length&&(t=(t+"000").substr(0,4),i+=String.fromCharCode(parseInt(t,3)+f)),i},r.prototype.Ac=function(t,i,n,r){var e,o=(n-1)*this.Xa+(i-1),s=~~(o/4),h=o%4;if(r===u){var a=("000"+(t.charCodeAt(s)-f).toString(3)).slice(-4),c=a.substr(0,h)+"0"+a.substr(h+1);e=parseInt(c,3)+f}else e=t.charCodeAt(s)+(1<<r)*Math.pow(3,3-h);return t.substr(0,s)+String.fromCharCode(e)+t.substr(s+1)}},{"./Grid":9,"./Group":10,"./Stone":15,"./constants":37,"./main":38}],9:[function(t,i,n){"use strict";function r(t,i,n){if(void 0===i)throw new Error("Grid init value must be defined");this.Xa=t,void 0===n?this.Rb=h.Gc(t+2,t+2,i):(this.Rb=h.Gc(t+2,t+2,n),this.init(i))}function e(t){if(t===u)return"(BORDER)";if(t>=r.Pc)return String.fromCharCode("A".charCodeAt()+t-r.Pc);if(t<r.Rc||t>=r.Nc.length)throw new Error("Invalid color "+t);return 0>t&&(t+=r.Nc.length),r.Nc[t]}function o(t){return e("number"==typeof t?t:t.color)}function s(t){for(var i="",n=t.length-1;n>=0;n--)i+=t[n];return i}var h=t("./main"),a=t("./constants"),u=a.Mb;i.g=r,r.Hc=["black","white"],r.Ic="+",r.Jc="?",r.Kc="@O",r.Lc="&#",r.Mc="-:",r.Nc=r.Kc+r.Lc+r.Mc+r.Jc+r.Ic,r.Oc=r.Jc+r.Ic+r.Nc,r.Pc=100,r.Qc=-1,r.Rc=-2,r.Sc=2,r.Tc=4,r.Uc=[0,0,-1,1,1,-1,-1,1],r.Vc="-'?.:",r.prototype.init=function(t){if(void 0===t)throw new Error("Grid init value must be defined");for(var i=this.Xa;i>=1;i--)for(var n=this.Rb[i],r=this.Xa;r>=1;r--)n[r]=t},r.prototype.K=function(t){if(t.Xa!==this.Xa)throw new Error("Cannot copy between different sized grids");for(var i=this.Xa;i>=1;i--)for(var n=this.Rb[i],r=t.Rb[i],e=this.Xa;e>=1;e--)n[e]=r[e];return this},r.prototype.Wc=function(t){var i=t.Ob;if(i.Xa!==this.Xa)throw new Error("Cannot copy between different sized grids");for(var n=this.Xa;n>=1;n--)for(var r=this.Rb[n],e=i.Rb[n],o=this.Xa;o>=1;o--)r[o]=e[o].color;return this},r.Xc=function(t){return r.Hc[t]},r.Yc=function(t){return r.Oc.indexOf(t)+r.Rc},r.prototype.fc=function(t){return this.Zc(!0,"\n",t||o)},r.prototype.bc=function(t){return this.Zc(!1,",",t||o)},r.prototype.Zc=function(t,i,n){var e,o,s,h=new r(this.Xa,"").Rb,a=1;for(o=this.Xa;o>=1;o--)for(e=1;e<=this.Xa;e++)s=n(this.Rb[o][e]),null!==s&&(h[o][e]=s,a=Math.max(a,s.length));var u=a,c="          ",f="";for(o=this.Xa;o>=1;o--){for(t&&(f+="%2d".format(o)+" "),e=1;e<=this.Xa;e++)s=h[o][e],s.length<u&&(s=c.substr(1,u-s.length)+s),f+=s;f+=i}if(t){for(f+="   ",e=1;e<=this.Xa;e++)f+=c.substr(1,u-1)+r.$c(e);f+="\n"}return"\n"!==i&&(f=f._c()),f},r.prototype.toString=function(){for(var t="",i=this.Xa;i>=1;i--){for(var n=1;n<=this.Xa;n++)t+=e(this.Rb[i][n]);t+="\n"}return t},r.prototype.ac=function(){return"object"==typeof this.Rb[1][1]?this.bc(function(t){return e(t.color)}):this.bc(function(t){return e(t)})},r.prototype.cc=function(t){var i=t.split(/\"|,/);if(i.length!==this.Xa)throw new Error("Invalid image: "+i.length+" rows instead of "+this.Xa);for(var n=this.Xa;n>=1;n--){var e=i[this.Xa-n];if(e.length!==this.Xa)throw new Error("Invalid image: row "+e);for(var o=1;o<=this.Xa;o++)this.Rb[n][o]=r.Yc(e[o-1])}},r.ad=function(t){return t.split(",").reverse().join()},r.bd=function(t){return t.split(",").map(s).join()},r.dd=function(t){return s(t)};var c="abcdefghjklmnopqrstuvwxyz";r.vb=function(t,i){var n=c.indexOf(t[0])+1,r=parseInt(t.substr(1,2));if(!n||isNaN(r)){if(i)return null;throw new Error("Illegal move parsed: "+t)}return[n,r]},r.ed=function(t,i){return c[t-1]+i},r.$c=function(t){return c[t-1]}},{"./constants":37,"./main":38}],10:[function(t,i,n){"use strict";function r(t,i,n,r){this.Ja=t,this.wc=[i],this.Cc=n,this.color=i.color,this.fd=null,this.gd=null,this.hd=null,this._b=r,this.jd=null,this.kd=this.ld=0,this.md=null}var e=t("./constants"),o=t("./main"),s=t("./Grid"),h=e.EMPTY;i.g=r,r.prototype.Zb=function(t,i,n){this.wc.clear(),this.wc.push(t),this.Cc=i,this.color=t.color,this.fd=this.gd=this.hd=null,this._b=n,this.kd=this.ld=0,this.md=null},r.prototype.clear=function(){for(var t=this.wc.length-1;t>=0;t--)this.wc[t].clear();this.Ja.$b(this)},r.prototype.toString=function(){for(var t,i="{group #"+this._b+" of "+this.wc.length+" "+s.Xc(this.color)+" stones [",n=this.wc,r=0;t=n[r],r<n.length;r++)i+=t.nd()+",";return i=i._c(),i+="], lives:"+this.Cc,this.fd&&(i+=" MERGED with #"+this.fd._b),this.hd&&(i+=" KILLED by "+this.hd.nd()),i+="}"},r.prototype.od=function(){return this.wc.length&&this.wc[0].group===this},r.prototype.ec=function(){return this.toString()},r.prototype.pd=function(){return this.wc.map(function(t){return t.nd()}).sort().join(",")},r.prototype.qd=function(){for(var t,i=[],n=this.wc,r=0;t=n[r],r<n.length;r++)for(var e,o=t.rd,s=0;e=o[s],s<o.length;s++)e.color===h&&i.indexOf(e)<0&&i.push(e);if(i.length!==this.Cc)throw new Error("Wrong life count for group");return i},r.prototype.sd=function(){for(var t,i=[],n=1-this.color,r=this.wc,e=0;t=r[e],e<r.length;e++)for(var s,h=t.rd,a=0;s=h[a],a<h.length;a++)s.color===n&&i.indexOf(s.group)<0&&i.push(s.group);return o.zb,i},r.prototype.td=function(t){for(var i,n=-1,r=t.rd,e=0;i=r[e],e<r.length;e++)if(i.color===h){n++;for(var s,a=i.rd,u=0;s=a[u],u<a.length;u++)if(s.group===this&&s!==t){n--;break}}return o.zb,n},r.prototype.ud=function(t){if(o.zb,this.wc.push(t),this.Cc+=this.td(t),this.Cc<0)throw new Error("Unexpected error (lives<0 on connect)");o.zb},r.prototype.vd=function(t){if(o.zb,this.wc.length>1){if(this.Cc-=this.td(t),this.Cc<0)throw new Error("Lives<0 on disconnect")}else this.Ja.$b(this),o.zb;if(this.wc.pop()!==t)throw new Error("Unexpected error (disconnect order)")},r.prototype.wd=function(t){return this.Cc--,this.Cc<=0?this.xd(t):void 0},r.prototype.yd=function(t){if(this.Cc--,o.zb,this.Cc<1)throw new Error("Unexpected error (lives<1 on attack by resucitated)")},r.prototype.zd=function(t){this.Cc++,o.zb},r.prototype.Ad=function(t,i){if(t.fd===this||t===this||this.color!==t.color)throw new Error("Invalid merge");o.zb,this.Cc+=t.wc.length;for(var n,r=t.wc,e=0;n=r[e],e<r.length;e++)n.Bd(this),this.ud(n);t.fd=this,t.gd=i,this.Ja.Vb.push(t),o.zb},r.prototype.Cd=function(t){o.zb;for(var i,n=t.wc,r=n.length-1;i=n[r],r>=0;r--)this.vd(i),i.Bd(t);this.Cc-=t.wc.length,t.gd=t.fd=null,o.zb},r.prototype.Dd=function(t){for(var i=this.Ja.Vb,n=i.length-1;n>=0;n--){var r=i[n];if(r.gd!==t||r.fd!==this)break;this.Cd(r),i.pop()}},r.prototype.xd=function(t){if(o.zb,this.Cc<0)throw new Error("Unexpected error (lives<0)");for(var i,n=this.wc,r=0;i=n[r],r<n.length;r++){for(var e,s=i.Bc(1-this.color),h=0;e=s[h],h<s.length;h++)e.zd(i);i.Ed()}this.hd=t,this.Ja.Ub.push(this),o.zb},r.prototype.Fd=function(){this.hd=null,this.Cc=1;for(var t,i=this.wc,n=0;t=i[n],n<i.length;n++){t.Gd(this);for(var r,e=t.Bc(1-this.color),o=0;r=e[o],o<e.length;o++)r.yd(t)}},r.Hd=function(t){for(var i=t.Ja.Ub,n=i.length-1;n>=0;n--){var r=i[n];if(r.hd!==t)break;i.pop(),o.zb,r.Fd()}}},{"./Grid":9,"./constants":37,"./main":38}],11:[function(t,i,n){"use strict";function r(){}var e=t("./main"),o=t("./Grid"),s=e.Ca,h=e.Da;i.g=r,r.ab=function(t,i){if(0===i||"0"===i)return 0;if("number"==typeof i||i.indexOf("=")<0)return r.Id(t,~~i);var n;switch(i[0]){case"B":n=s;break;case"W":n=h;break;default:throw new Error('Invalid "hand" command: '+i)}for(var e,a=i.indexOf("="),u=i.substring(a+1).split("-"),c=u,f=0;e=c[f],f<c.length;f++){var l=o.vb(e);t.sb(l[0],l[1],n)}return u.length},r.Id=function(t,i){var n=t.Xa;if(i>4&&(9>n||n%2===0)&&(i=4),5>=n)return 0;for(var r=13>n?2:3,o=1+r,s=(1+n)/2,h=n-r,a=0;i>a;a++){switch(i%2===1&&i>4&&a===i-1&&(a=8),a){case 0:var u=o,c=o;break;case 1:u=h,c=h;break;case 2:u=o,c=h;break;case 3:u=h,c=o;break;case 4:u=o,c=s;break;case 5:u=h,c=s;break;case 6:u=s,c=o;break;case 7:u=s,c=h;break;case 8:u=s,c=s}t.sb(u,c,e.Ca)}return i}},{"./Grid":9,"./main":38}],12:[function(t,i,n){"use strict";function r(){this.level=r.Jd,this.Kd=null,r.prototype.debug=this.Ld(r.Md,e.debug),r.prototype.info=this.Ld(r.Jd,e.info),r.prototype.warn=this.Ld(r.Nd,e.warn),r.prototype.error=this.Ld(r.ERROR,e.error),r.prototype.fatal=this.Ld(r.Od,e.error)}var e=console;i.g=r,r.Od=4,r.ERROR=3,r.Nd=2,r.Jd=1,r.Md=0,r.prototype.Pd=function(t){this.Kd=t},r.prototype.Ld=function(t,i){var n=this;return function(r){n.level>t||n.Kd&&!n.Kd(t,r)||i.call(e,r)}}},{}],13:[function(t,i,n){"use strict";function r(t){this.Qd=t,this.Rd=new s.Td.Sd(t)}function e(t){return 1!==t?t+" points":"1 point"}var o=t("./constants"),s=t("./main"),h=t("./Grid"),a=o.Ca,u=o.Da;i.g=r,r.prototype.Ud=function(){var t=this.Vd()[0];return t[a]-t[u]},r.prototype.Wd=function(){return this.Xd(this.Vd())},r.prototype.Yd=function(){return this.Vd()},r.prototype.Zd=function(){return this.Rd.Zd()},r.prototype.Vd=function(){var t=this.Qd,i=t.Ja,n=t.La;if(null!==t.Ra)return["resi",1-t.Ra,t.Sa];this.Rd.$d(i);var r=this.Rd._d,e=this.Rd.ae,o=[r[a]+e[u],r[u]+e[a]+n],s=[[r[a],e[u],0],[r[u],e[a],n]];return[o,s]},r.prototype.Xd=function(t){if("resi"===t[0]){var i,n=h.Hc[t[1]],r=h.Hc[1-t[1]];switch(t[2]){case"time":i=r+" ran out of time";break;case null:case void 0:i=r+" resigned";break;default:i=r+" disqualified: "+t[2]}return[n+" won ("+i+")"]}if(!t||2!==t.length)throw new Error("Invalid score info: "+t);var o=t[0],s=t[1];if(o.length!==s.length)throw new Error("Invalid score info");var c=[],f=o[a]-o[u];c.push(this.be(f));for(var l=a;u>=l;l++){var p=s[l],g=p[0],d=p[1],v=p[2],b=0!==d?" "+(0>d?"-":"+")+" "+Math.abs(d)+" prisoners":"",y=v>0?" + "+v+" komi":"",m=d||v?" ("+g+b+y+")":"";c.push(h.Xc(l)+": "+e(o[l])+m)}return c},r.prototype.be=function(t){if(0===t)return"Tie game";var i=t>0?a:u;return h.Xc(i)+" wins by "+e(Math.abs(t))}},{"./Grid":9,"./constants":37,"./main":38}],14:[function(t,i,n){"use strict";function r(){this.text=null,this.Re=null,this.hb=0,this.Se=null,this.Ga=null,this.Na=h,this.Te=null,this.xb=0}function e(t){if(t.Xe("a","z"))return t.charCodeAt()-97;if(t.Xe("A","Z"))return t.charCodeAt()-65;throw new Error("Invalid coordinate value: "+t)}function o(t){for(var i=0;;){var n=t.indexOf("]",i);if(-1===n)return-1;if("\\"!==t[n-1])return n;i=n+1}}var s=t("./main"),h=s.Ca,a=s.Da,u=["B","W"],c=19,f={ce:["int",null],de:["int","fileFormat"],ee:["int","boardSize"],fe:["move",null],ge:["move",null],he:["int","handicap"],ie:["real","komi"],je:["text","rules"],ke:["text","result"],le:["text","playerBlack"],me:["text","playerWhite"],ne:["int","blackSpecies"],oe:["int","whiteSpecies"],pe:["flag","enforceLosingOnTime"],qe:["text","source"],re:["text","gameId"],se:["text","application"],te:["text","blackRank"],ue:["text","whiteRank"],ve:["text","blackTeam"],we:["text","whiteTeam"],xe:["text","timeLimit"],ye:["text","overtimeMethod"],ze:["text","event"],Ae:["text","round"],Be:["text","date"],Ce:["text","place"],De:["text","gameName"],Ee:["text","openingPlayed"],Fe:["text","gameComment"],Ge:["text","comment"],He:["text","nodeName"],Ie:["text","userName"],Je:["text","analyseAuthor"],Ke:["text","copyright"],Le:["text","characterSet"],Me:["text",null]},l={B:"move",W:"move",fe:"move",ge:"move",Ne:null,Oe:null,Ge:null,Pe:null,Qe:null,He:null};i.g=r,r.kb=function(t){return t.trim().startsWith("(;")},r.prototype.gb=function(t,i){if(!r.kb(t))throw new Error("Not an SGF file");return this.text=t,this.Re=[],this.Se=[[],[]],this.Ue(t),this.Ve(),this.We(i),this.Ga},r.prototype.ib=function(){return this.Te};var p="abcdefghjklmnopqrstuvwxyz";r.prototype.Ye=function(t){if(this.hb)throw new Error("Size (SZ) set twice or after the first move");this.hb=t},r.prototype.Ze=function(t){if(this.hb||this.Ye(c),""===t||"tt"===t&&this.hb<=19)return"pass";var i=p[e(t[0])],n=this.hb-e(t[1]);return i+n},r.prototype.$e=function(t,i,n){n||this.xb++;var r=t===this.Na?"":u[t];this.xb?(this.Na=1-t,this.Te.push(r+i)):this.Se[t].push(i)},r.prototype._e=function(t,i){switch(i){case"text":return t;case"int":return parseInt(t);case"real":return parseFloat(t);case"flag":return!0;case"move":return this.Ze(t);default:throw new Error("Invalid tag type: "+i)}},r.prototype.af=function(t,i){var n=l[t];if(void 0===n)return s.log.warn("Unknown property "+t+"["+i+"] ignored");if(n){var r=this._e(i,n);switch(t){case"B":return this.$e(h,r);case"W":return this.$e(a,r);case"AB":return this.$e(h,r,!0);case"AW":return this.$e(a,r,!0)}}},r.prototype.bf=function(t){var i=this.Se[t];return i.length?"hand:"+u[t]+"="+i.join("-")+",":""},r.prototype.We=function(t){this.Te=[],this.xb=0,this.Na=null;for(var i=1;i<this.Re.length;i++)for(var n=this.Re[i],r=0;r<n.length;r+=2){var e=n[r]||e,o=n[r+1];this.af(e,o)}var s=t?t-1:this.Te.length;this.Te=(this.bf(h)+this.bf(a)+this.Te.slice(0,s).join(",")).Fb(",")},r.prototype.cf=function(t,i){var n=f[t];if(void 0===n)return this.Ga[t]=i,s.log.info("Unknown property in SGF header: "+t+"["+i+"]");var r=n[0],e=n[1],o=this._e(i,r);return e&&(this.Ga[e]=o),o},r.prototype.Ve=function(){this.hb=null,this.Ga={hb:c,La:0,Ka:0};for(var t=this.Re[0],i=0;i<=t.length-1;i+=2){var n=t[i],r=t[i+1],e=this.cf(n,r);switch(n){case"GM":if(1!==e)throw new Error("SGF game is not a GO game");break;case"FF":break;case"SZ":this.Ye(e);break;case"AB":this.$e(h,e,!0);break;case"AW":this.$e(a,e,!0)}}},r.prototype.Ue=function(t){for(t=this.df(t),t=this.ef("(",t),t=this.ff(t),this.gf=!1;!this.gf;)t=this.ff(t);return this.ef(")",t)},r.prototype.ff=function(t){if(t=this.df(t),";"!==t[0])return this.gf=!0,t;t=this.ef(";",t);for(var i=[];;){for(var n=0;t[n]&&t[n].Xe("A","Z");)n++;var r=t.substr(0,n);for(""===r&&this.hf("Property name expected",t),i.push(r),t=this.ef(r,t);;){t=this.ef("[",t);var e=o(t);0>e&&this.hf("Missing ']'",t);var s=t.substr(0,e);if(i.push(s),t=this.ef(s+"]",t),"["!==t[0])break;i.push(null)}if(!t[0]||!t[0].Xe("A","Z"))break}return this.Re.push(i),t},r.prototype.df=function(t){return t.trim()},r.prototype.ef=function(t,i){return i.startsWith(t)||this.hf(t+" expected",i),i.replace(t,"").trim()},r.prototype.hf=function(t,i){throw new Error("Syntax error: '"+t+"' at ..."+i.substr(0,20)+"...")}},{"./main":38}],15:[function(t,i,n){"use strict";function r(t,i,n,r){this.Ja=t,this.Dc=i,this.Ec=n,this.color=r,this.group=null,this.rd=[],this.kf=[]}var e=t("./main"),o=t("./Grid"),s=t("./Group"),h=e.EMPTY,a=e.Nb,u=e["if"],c=e.jf;i.g=r;var f=r.lf=[[0,1],[1,0],[0,-1],[-1,0]],l=r.mf=[[1,1],[1,-1],[-1,-1],[-1,1]];r.prototype.clear=function(){this.color=h,this.group=null},r.prototype.Sb=function(){for(var t=this.Ja.Qb,i=c;i>=u;i--){var n=t[this.Ec+f[i][1]][this.Dc+f[i][0]];n!==a&&this.rd.push(n),this.kf.push(n),n=t[this.Ec+l[i][1]][this.Dc+l[i][0]],this.kf.push(n)}},r.prototype.toString=function(){return this.color===h?this.nd():(this.color?"W":"B")+"-"+this.nd()},r.prototype.nd=function(){return o.ed(this.Dc,this.Ec)},r.prototype.nf=function(){return this.pf().map(function(t){return t.nd()}).sort().join(",")},r.prototype.nc=function(){return this.color===h},r.prototype.qf=function(){return 2===this.rd.length},r.prototype.rf=function(){var t=this.Ja,i=t.Xa-1;
return t.lc(1===this.Dc?2:i,1===this.Ec?2:i)},r.prototype.sf=function(){return this.rd.length<=3},r.prototype.tf=function(){var t=this.Ja.Xa,i=this.Dc,n=this.Ec;return Math.min(Math.min(i-1,t-i),Math.min(n-1,t-n))},r.prototype.gc=function(t){for(var i=this.rd.length-1;i>=0;i--){var n=this.rd[i];if(n.color===h)return!1;if(n.color!==t){if(1===n.group.Cc)return!1}else if(n.group.Cc>1)return!1}return!0},r.prototype.kc=function(t){for(var i=null,n=this.rd.length-1;n>=0;n--){var r=this.rd[n].group;if(r&&r.color===1-t&&1===r.Cc){if(i)return!1;i=r}}if(!i)return!1;if(1!==i.wc.length)return!1;var e=i.wc[0];if(this.Ja.uc()!==e)return!1;var o=this.Ja.tc();if(!o||o.hd!==e||1!==o.wc.length)return!1;var s=o.wc[0];return s.Dc===this.Dc&&s.Ec===this.Ec},r.prototype.Ed=function(){this.color=h,this.group=null},r.prototype.Gd=function(t){this.group=t,this.color=t.color},r.prototype.rc=function(t){this.color=t;var i=this.Bc(t);0===i.length?this.group=this.Ja.Yb(this,this.uf()):(this.group=i[0],this.group.ud(this));for(var n=this.Bc(1-t),r=n.length-1;r>=0;r--)n[r].wd(this);for(var e=1;e<i.length;e++)this.group.Ad(i[e],this)},r.prototype.qc=function(){this.group.Dd(this),this.group.vd(this);for(var t=this.Bc(1-this.color),i=t.length-1;i>=0;i--)t[i].zd(this);this.group=null,this.color=h,s.Hd(this)},r.prototype.Bd=function(t){this.group=t},r.prototype.Bc=function(t){for(var i=[],n=this.rd,r=n.length-1;r>=0;r--){var e=n[r];e.color===t&&i.indexOf(e.group)<0&&i.push(e.group)}return i},r.prototype.pf=function(){for(var t=[],i=this.rd,n=i.length-1;n>=0;n--){var r=i[n];r.color===h&&t.push(r)}return t},r.prototype.uf=function(){for(var t=0,i=this.rd,n=i.length-1;n>=0;n--)i[n].color===h&&t++;return t},r.prototype.vf=function(t,i){for(var n=0,r=this.rd,e=r.length-1;e>=0;e--)r[e].color===t&&(i&&i.push(r[e]),n++);return n},r.prototype.wf=function(t){for(var i=this.rd,n=i.length-1;n>=0;n--)if(i[n].group===t)return!0;return!1}},{"./Grid":9,"./Group":10,"./main":38}],16:[function(t,i,n){"use strict";function r(t){o.call(this,t),this.xf=this.yf("infl",.07,.01,.5),this.zf=t.Cf.Bf.Af.Rb,this.Df=t.Cf.Ef}var e=t("../../main"),o=(t("../../Grid"),t("./Heuristic")),s=t("util").inherits,h=e.EMPTY,a=e.Nb,u=e.ALWAYS,c=e.NEVER;s(r,o),i.g=r,r.prototype.Ff=function(t,i,n){var r=this.Ja.lc(t,i);return this.zf[i][t]<0&&!this.Df.Gf(r)?(e.debug,0):this.Hf(r,n)+this.Hf(r,1-n)},r.prototype.Hf=function(t,i){var n=this.If(t,i);return n?n:this.Jf(t,i)},r.prototype.Jf=function(t,i){for(var n=!0,r=null,e=null,o=null,s=!1,c=0,f=0;8>f;f++){var l=t.kf[f];if(n=!n,l!==a)switch(l.color){case h:continue;case i:if(l.group.ld===u)continue;if(r){if(l.group===r)continue;if(!n&&o&&l.group!==o)return 0;n||o||(o=l.group),e=l.group,s=s||n}else r=l.group,n||(o=l.group),s=n;break;default:if(l.group.ld===u)continue;if(l.group.Cc<2)continue;c++}}return e&&s?c>=3?0:this.Vd(t,i,[r,e],c,"diagonal"):0},r.prototype.If=function(t,i){for(var n,r,o,s,a,u=0,f=0,l=t.rd.length-1;l>=0;l--){var p=t.rd[l];switch(p.color){case h:continue;case i:u++,n?o?p.group!==o.group?a=p:s=p:p.group!==n.group?o=p:r=p:n=p;break;default:f++}}if(!o)return 0;if(4===u)return 0;var g=a?3:2,d=a?[n.group,o.group,a.group]:[n.group,o.group];if(3===u)return 0===f&&n.group.Cc>1&&o.group.Cc>1&&(!a||a.group.Cc>1)?this.Lf.Kf?this.Mf:0:this.Vd(t,i,d,f,"direct3");if(2===g&&3===u){if(s){r=s;var v=n;n=o,o=v}n.Dc!==o.Dc&&n.Ec!==o.Ec||(n=r)}if(n.Dc!==o.Dc&&n.Ec!==o.Ec){if(0===this.Nf(n,o,i))return e.debug,this.Lf.Kf&&(n.group.jd.Of()!==c||o.group.jd.Of()!==c)?this.Mf:0;f++}return this.Vd(t,i,d,f,"direct")},r.prototype.Vd=function(t,i,n,r,o){var s=0;return 0===r?s=this.xf/this.Pf[i][t.Ec][t.Dc]:this.Rf.Qf(n,t,1-i),e.debug,s},r.prototype.Sf=function(t,i){return[this.Ja.lc(t.Dc,i.Ec),this.Ja.lc(i.Dc,t.Ec)]},r.prototype.Nf=function(t,i,n){var r=Math.abs(i.Dc-t.Dc),e=Math.abs(i.Ec-t.Ec);if(r+e===1)return 0;var o,s=1-n,h=0;if(1===r&&1===e){var a=this.Sf(t,i),u=a[0],c=a[1];if(u.color===n||c.color===n)return 0;if(u.color===s&&h++,c.color===s&&h++,0===h)return 0;if(2===h)return 99;var f=u.color===s?0:1,l=a[f],p=a[1-f];return t.sf()||i.sf()?1===p.tf()?l.group.Cc>2?1:0:0!==p.vf(s)?1:0:1===p.tf()?0!==p.vf(s)?1:0:1}if(r+e===2){if(o=this.Ja.lc((t.Dc+i.Dc)/2,(t.Ec+i.Ec)/2),o.color===n)return 0;if(o.color===s)return o.group.Cc;for(var g=o.rd.length-1;g>=0;g--)o.rd[g].color===s&&h++;return h>=1?1:t.sf()&&i.sf()?0:.5}if(r+e===3&&t.sf()&&i.sf()){for(var d=this.betweenStones(t,i),v=0,b=d.length-1;b>=0;b--)o=d[b],o.color===s&&(v+=o.group.Cc),0!==o.vf(s)&&(v+=1);return v}return r+e},r.prototype.Tf=function(t,i){for(var n=[],r=t.rd.length-1;r>=0;r--){var e=t.rd[r];switch(e.color){case h:n.push(e);break;case i:if(e.group.Cc>1&&e.group.ld<u)return e;break;default:if(1===e.group.Cc)return e.group.sd()[0].wc[0]}}for(var o=2,s=n.length-1;s>=0;s--)for(var a=n[s],c=a.rd.length-1;c>=0;c--){var f=a.rd[c];if(f!==t&&f.color===i&&f.group.ld!==u){var l=this.Nf(t,f,i);if(!(l>=2)&&(o-=2-l,.5>=o))return f}}return null}},{"../../Grid":9,"../../main":38,"./Heuristic":19,util:4}],17:[function(t,i,n){"use strict";function r(t){e.call(this,t)}var e=t("./Heuristic"),o=t("util").inherits;o(r,e),i.g=r,r.prototype.Uf=function(){this.Lf.Wf.Vf(),this.Xf()},r.prototype.Xf=function(){var t=this.Lf.Wf.Yf;for(var i in t){var n=~~i,r=t[n],e=r.group;e.md=r.Zf&&r.Zf.group}}},{"./Heuristic":19,util:4}],18:[function(t,i,n){"use strict";function r(t){s.call(this,t),this.Ob=new o(this.Xa,a),this.$f=t.Cf._f}var e=t("../../constants"),o=t("../../Grid"),s=t("./Heuristic"),h=t("util").inherits,a=e.Mb;h(r,s),i.g=r,r.prototype.Uf=function(){var t=this.Ja;this.Lf.Wf.ag(t,this.Ob),this.Xf()},r.prototype.Xf=function(){var t=this.bg,i=t.cg,n=t.dg,r=this.Lf.Wf.Yf;for(var e in r){var o=~~e,s=r[o],h=s.group;h.kd=i[o],h.ld=n[o];for(var a=s.eg.length-1;a>=0;a--)this.$f.fg(s.eg[a],h.color)}}},{"../../Grid":9,"../../constants":37,"./Heuristic":19,util:4}],19:[function(t,i,n){"use strict";function r(t){this.Lf=t,this.name=null,this.Ja=t.Ja,this.Xa=t.Ja.Xa,this.Af=new s(this.Xa,0,h),this.Mf=t.Mf,this.ig=this.yf("spaceInvasion",2,.01,4),this.color=this.jg=null,this.kg()}var e=t("../../constants"),o=t("../../main"),s=t("../../Grid"),h=e.Mb,a=(e.EMPTY,e.gg),u=e.hg;e.ALWAYS;i.g=r,r.prototype.lg=function(t){var i=this.constructor;this.name=i.name||o.mg(i),this.name.length<5&&(this.name+=t)},r.prototype.kg=function(){var t=this.Lf.Cf;this.ng=t.og,this.Rf=t._f,this.bg=t.pg,this.Pf=t.qg?t.qg.Pf:null},r.prototype.rg=function(t){this.color=t,this.jg=1-t},r.prototype.Uf=function(t,i){for(var n=o.debug,r=this.Lf.color,e=this.Af.Rb,s=1;s<=this.Xa;s++)for(var h=1;h<=this.Xa;h++){var c=t[s][h];if(!(a>c)){c===u&&this.name===this.Lf.sg&&(o.debug=!0);var f=e[s][h]=this.Ff(h,s,r);i[s][h]+=f,c===u&&(o.debug=n)}}},r.prototype.yf=function(t,i,n,r){return this.Lf.tg.get(this.name+"-"+t,i,n,r)}},{"../../Grid":9,"../../constants":37,"../../main":38}],20:[function(t,i,n){"use strict";function r(t){o.call(this,t),this.ug=null,this.zf=t.Cf.Bf.Af.Rb}var e=t("../../main"),o=(t("../../Grid"),t("./Heuristic")),s=t("util").inherits,h=e.ALWAYS;s(r,o),i.g=r,r.prototype.vg=function(t,i){for(var n=t.sd(),r=n.length-1;r>=0;r--){var e=n[r];if(!(e.Cc>1)){var o=e.wc.length;if(o>=i)return!0;for(var s=e.sd(),h=s.length-1;h>=0;h--)if(o+=s[h].Cc-1,o>=i)return!0}}return!1};var a=1,u=1.1;r.prototype.wg=function(t,i){for(var n=0,r=0,o=0,s=t.rd.length-1;s>=0;s--){var a=t.rd[s];switch(a.color){case e.EMPTY:o+=.01;break;case i:o+=.01*(a.group.Cc-1),a.group.kd===h&&(o+=2),n+=1e-4;break;default:if(a.group.md)return u;if(a.group.Cc>1)break;r+=a.group.wc.length}}return r+o+n},r.prototype.xg=function(t,i,n){for(var r=!1,e=!1,o=i.length-1;o>=0;o--){var s=i[o];1===s.Cc&&(n||!this.yg(s,n)||this.vg(s,1)?(e=!0,n||this.Rf.zg(s,t)):this.Lf.Kf&&(r=!0))}return r&&this.Rf.Ag(t),e},r.prototype.Bg=function(t,i,n){if(!i.wf(n))return!1;for(var r=i.Bc(n.color),e=r.length-1;e>=0;e--){var o=r[e];if(o.Cc>2)return!1;if(!t.wf(o))return!1}return!0},r.prototype.Cg=function(t,i,n,r,o,s){for(var h,a=!1,u=t.Bc(r),c=i.length-1;c>=0;c--)if(h=i[c],2===h.Cc&&!this.vg(h,2)&&(0!==n.length||1!==u.length||2!==u[0].Cc)){if(1===n.length&&0===u.length){if(!this.Bg(t,n[0],h))continue;a=!0,e.debug}!o&&h.jd.Dg()||(e.debug,s.push(h))}return a},r.prototype.Eg=function(t,i,n){return n&&i.Cc===n.Cc&&n.od()?!(t.wf(n)&&n.td(t)<1):!1},r.prototype.Fg=function(t,i,n,r){for(var e=!1,o=i.length-1;o>=0;o--){var s=i[o],h=s.Cc,a=s.md;h>2&&this.Eg(t,s,a)?(n||this.Rf.Gg(s,t),e=!0):h>=2&&0===n&&!r&&(n||this.Rf.Hg(s,t))}return e},r.prototype.Ig=function(){this.ug=[]},r.prototype.Ff=function(t,i,n){return this.Jg(t,i,n,0),0},r.prototype.Jg=function(t,i,n,r){var o=this.Ja.lc(t,i),s=o.pf(),h=o.Bc(1-n),u=[],c=this.Cg(o,h,s,n,r,u);if(0===r&&c&&this.ug.push(o),!c&&s.length<=1){var f=this.wg(o,n);if(f!==a&&(.02>f||f>1&&1.01>f))return!1}var l=this.xg(o,h,r),p=!c&&this.zf[i][t]<0,g=this.Fg(o,h,r,p);if(!u.length)return l||g;this.Ja.pc(t,i,n);for(var d=[!1,!1,!1],v=u.length-1;v>=0;v--)if(!this.yg(u[v],r)){if(1===u.length){u.pop();break}d[v]=!0}this.Ja.sc();var b=this.Kg(o,u,d,r);return e.debug&&(l||g||b),l||g||b},r.prototype.Kg=function(t,i,n,r){switch(i.length){case 0:return!1;case 1:return n[0]?!1:(r||this.Rf.zg(i[0],t),!0);case 3:case 2:return r||(n[1]?this.Rf.zg(i[0],t):this.Rf.zg(i[1],t)),!0;default:throw new Error("Unexpected in Hunter#getMultipleChaseThreat")}},r.prototype.yg=function(t,i){var n=t.qd();if(1!==n.length)throw new Error("Unexpected: hunter #1: "+n.length);var r=n[0],o=this.Ja.pc(r.Dc,r.Ec,t.color),s=this.Lg(o,i);return this.Ja.sc(),e.debug,s},r.prototype.Mg=function(t){for(var i=1-t.color,n=t.rd,r=n.length-1;r>=0;r--){var e=n[r];if(e.color===i){var o=e.group;if(1===o.Cc){var s=o.qd()[0];return s.wf(t.group)?this.yg(o,1)?1:-1:1}}}return 0},r.prototype.Lg=function(t,i){var n=t.group;if(n.Cc<=1)return!0;if(n.Cc>2)return!1;var r=this.Mg(t);if(0!==r)return 0>r;var o=t.pf();if(2!==o.length&&(o=n.qd()),2!==o.length)throw new Error("Unexpected: hunter #2");var s=o[0],h=o[1];e.debug;var a=1-n.color;return this.Jg(s.Dc,s.Ec,a,i+1)||this.Jg(h.Dc,h.Ec,a,i+1)},r.prototype.Ng=function(t){return this.Lg(t,1)},r.prototype.Og=function(t,i,n){return this.Jg(t,i,n,1)},r.prototype.Gf=function(t){return-1!==this.ug.indexOf(t)}},{"../../Grid":9,"../../main":38,"./Heuristic":19,util:4}],21:[function(t,i,n){"use strict";function r(t){s.call(this,t),this.Pg=[new o(this.Xa,a),new o(this.Xa,a)],this.Pf=[this.Pg[c].Rb,this.Pg[f].Rb]}var e=t("../../constants"),o=t("../../Grid"),s=t("./Heuristic"),h=t("util").inherits,a=e.Mb,u=e.EMPTY,c=e.Ca,f=e.Da,l=2,p=1;h(r,s),i.g=r,r.prototype.Uf=function(){this.Pg[c].init(0),this.Pg[f].init(0);for(var t=1;t<=this.Xa;t++)for(var i=1;i<=this.Xa;i++){var n=this.Ja.lc(i,t),r=n.color;if(r!==u)for(var e,o=this.Pf[r],s=n.rd,h=0;e=s[h],h<s.length;h++)if(e.color===u){o[e.Ec][e.Dc]+=l;for(var a,g=e.rd,d=0;a=g[d],d<g.length;d++)a.color===u&&a!==n&&(o[a.Ec][a.Dc]+=p)}}}},{"../../Grid":9,"../../constants":37,"./Heuristic":19,util:4}],22:[function(t,i,n){"use strict";function r(t){u.call(this,t),this.Ob=new a(this.Xa,null),this.Qg=[],this.Rg="",this.Sg=this.yf("pressure",1,.01,2),this.Tg=this.yf("eyeCloser",1,.01,1)}function e(){this.Wg=null,this.Xg=0,this.Yg=[],this.Zg=[],this.$g=[]}function o(t,i,n){this.name=t,this.Xg=i,this.group=n,this.dh=1/0}var s=t("../../main"),h=t("../../constants"),a=t("../../Grid"),u=t("./Heuristic"),c=t("util").inherits,f=h.ALWAYS;c(r,u),i.g=r,r.prototype.Uf=function(){this.Ob.init(null),this.Qg.length=0},r.prototype.Ug=function(t,i){u.prototype.Uf.call(this,t,i)},r.prototype.Ff=function(t,i){var n=this.Ob.Rb[i][t];return n?n.Vg():0},e.prototype.Vg=function(){var t=this.Xg,i=this.Yg;if(!i.length)return t;for(var n=i.length-1;n>=0;n--){var r=i[n];t+=r.Xg*this.Zg[n]}return t},r.prototype._g=function(t,i){return this.Ob.Rb[i][t]},r.prototype.ah=function(t,i){var n=this.Ob.Rb[i][t];return n?n:(this.Ob.Rb[i][t]=n=new e,n)},r.prototype.fg=function(t,i){this.ah(t.Dc,t.Ec).Wg=i},r.prototype.bh=function(t,i){var n=this._g(t.Dc,t.Ec);return n&&n.Wg===i},o.prototype.toString=function(){return this.name+" (on: #"+this.group._b+(this.dh!==1/0?", minMoves:"+this.dh:"")+", score:"+this.Xg.toFixed(2)+")"},r.prototype.eh=function(t,i,n){this.Rg=t+"#"+i._b+"-"+n},r.prototype.fh=function(t){var i=this.Qg[t._b];if(i)return i;for(var n=2*t.wc.length,r=t.qd(),e=0,s=r.length-1;s>=0;s--)e+=r[s].uf();return n+=this.ig*Math.max(0,e-1),this.Qg[t._b]=i=new o(this.Rg||"death",n,t),i},r.prototype.gh=function(t,i,n,r){if(!i)throw new Error("Unexpected");n=n||1,r=r||1,s.debug;var e=this.ah(i.Dc,i.Ec),o=e.Yg,h=e.Zg,a=e.$g,u=o.indexOf(t);return 0>u?(o.push(t),h.push(n),a.push(r)):(h[u]=Math.max(h[u],n),a[u]=Math.min(a[u],r)),t.dh=Math.min(t.dh,r),t},r.prototype.hh=function(t,i,n,r,e){r=r||1;for(var o=0,s=e||0,h=t.length-1;h>=0;h--){var a=t[h];o+=a.ih(),s+=a.group.Cc}for(o>=2.5&&(r/=(o-1.5)*(o-1.5)*s/5),h=t.length-1;h>=0;h--)this.jh(t[h].group,i,n,r,s)},r.prototype.jh=function(t,i,n,r,e){var o=this.fh(t);return n||this.kh(t,i,r,e),this.gh(o,i,r,e)},r.prototype.kh=function(t,i,n,r){if(1!==t.wc.length||!t.wc[0].qf()){r=r||1;for(var e=t.sd(),o=e.length-1;o>=0;o--){var s=e[o];s.Cc<r||s.kd!==f&&this.lh(s,i,n,r)}}},r.prototype.lh=function(t,i,n,r){for(var e=t.jd.mh(),o=e.length-1;o>=0;o--)this.hh(e[o],i,!0,n,r);this.jh(t,i,!0,n,r)},r.prototype.Hg=function(t,i){var n=1/(t.Cc+1)*this.Sg;this.ah(i.Dc,i.Ec).Xg+=n},r.prototype.Ag=function(t){this.ah(t.Dc,t.Ec).Xg+=this.Mf},r.prototype.Gg=function(t,i){s.debug&&this.eh("race",t,i);var n=t.jd,r=n.nh?n.nh.oh:[n];this.hh(r,i,!1)},r.prototype.ph=function(t,i,n){s.debug&&this.eh("eye",t,i);var r=t.jd,e=r.qh();if(1.5>e)return!1;s.debug;var o=r.nh?r.nh.oh:[r];return this.hh(o,i,n===t.color),!0},r.prototype.Qf=function(t,i,n){var r=t[0];s.debug&&this.eh("cut",r,i);for(var e=n===r.color,o=r.jd.rh(i),h=o.length-1;h>=0;h--)this.hh(o[h],i,e)},r.prototype.zg=function(t,i){s.debug&&this.eh("kill",t,i);for(var n=t.jd.mh(),r=n.length-1;r>=0;r--)this.hh(n[r],i,!1);this.jh(t,i,!1,1,t.Cc)},r.prototype.sh=function(t,i){s.debug&&this.eh("rescue",t,i),this.lh(t,i)}},{"../../Grid":9,"../../constants":37,"../../main":38,"./Heuristic":19,util:4}],23:[function(t,i,n){"use strict";function r(t){s.call(this,t),this.Df=null}var e=t("../../main"),o=t("../../Grid"),s=t("./Heuristic"),h=t("util").inherits;h(r,s),i.g=r,r.prototype.Ig=function(){this.Df||(this.Df=this.Lf.Cf.Ef)},r.prototype.Ff=function(t,i,n){if(this.Pf[1-n][i][t]<2&&this.Pf[n][i][t]<2&&0===this.Ja.lc(t,i).vf(n))return 0;var r,s=this.Ja.pc(t,i,n),h=s.group,a=0;return e.debug&&(r=o.ed(t,i)),1===h.Cc?1===h.wc.length&&s.pf()[0].kc(this.jg)?e.debug:(a-=2*h.wc.length,e.debug):2===h.Cc&&(e.debug,this.Df.Ng(s)&&(a-=2*h.wc.length,e.debug)),this.Ja.sc(),a}},{"../../Grid":9,"../../main":38,"./Heuristic":19,util:4}],24:[function(t,i,n){"use strict";function r(t){h.call(this,t),this.vh=[new s(this.Xa,u),new s(this.Xa,u)],this.$f=t.Cf._f}var e=t("../../constants"),o=t("../../main"),s=t("../../Grid"),h=t("./Heuristic"),a=t("util").inherits,u=e.Mb,c=e.EMPTY,f=e.Ca,l=e.Da,p=e.th,g=e.uh;a(r,h),i.g=r,r.prototype.Uf=function(){this.wh()},r.prototype.wh=function(){this.vh[p].init(c),this.vh[g].init(c);for(var t=this.Xa;t>=1;t--)for(var i=this.Xa;i>=1;i--){var n=this.Ja.lc(i,t);if(n.color===c){var r=this.xh(i,t,n);if(null!==r){var e=this.Lf.Wf.yh(n);if(!e.zh&&!this.$f.bh(n,r)){for(var s=n.rd,h=null,a=this.Pf[1-r],u=1,f=s.length-1;f>=0;f--){var l=s[f];l.color===r&&(h=l.group),1!==u||l.sf()||0!==a[l.Ec][l.Dc]||l.uf()!==l.rd.length||(u=2)}if(!h){if(!n.qf())continue;if(h=n.rf().group,!h)continue}var d=(i+t)%2,v=this.vh[d].Rb;v[t][i]=r,h.jd.Ah(d,u),o.debug}}}}},r.prototype.xh=function(t,i,n){var r=this.Pf[f][i][t],e=this.Pf[l][i][t],o=r>e?f:l,s=Math.max(r,e),h=Math.min(r,e);if(h>1)return null;var a=0,u=this.Xa;if(1===h){if(this.ng.Tf(n,1-o)&&n.uf()>1)return null;n.qf()&&n.rf().color===c&&a++}return 1!==t&&t!==u&&1!==i&&i!==u||a++,0>s+a-3-h?null:o}},{"../../Grid":9,"../../constants":37,"../../main":38,"./Heuristic":19,util:4}],25:[function(t,i,n){"use strict";function r(t){a.call(this,t),this.Fh=new h(this.Xa,f),this.Gh=this.Fh.Rb,this.Hh=new h(this.Xa,f),this.Pg=[new h(this.Xa,f),new h(this.Xa,f)],this.Ih=new h(this.Xa,f),this.Jh(),this.Kh=null,this.cg=[],this.dg=[]}function e(t,i,n){switch(t){case v:return[i,1];case b:return[1,i];case y:return[i,n];case m:return[n,i]}}var o=t("../../constants"),s=t("../../main"),h=t("../../Grid"),a=t("./Heuristic"),u=t("util").inherits,c=t("../../Stone"),f=o.Mb,l=o.EMPTY,p=o.Ca,g=o.Da,d=o.NEVER,v=o.Bh,b=o.Ch,y=o.Dh,m=o.Eh,w=o["if"],k=o.jf,x=h.Vc,j=h.Uc,E=c.lf,C=c.mf;u(r,a),i.g=r,r.prototype.Uf=function(){this.Lh(),this.Fh.Wc(this.Ja),this.Mh(p),this.Mh(g),this.Nh()},r.prototype.Lh=function(){this.Kh=this.Ja.dc(),this.cg.length=0,this.dg.length=0;for(var t in this.Kh){var i=~~t;this.cg[i]=this.dg[i]=d}},r.prototype.Oh=function(){for(var t in this.Kh){for(var i=this.Kh[~~t],n=i;n.fd;)n=n.fd;n.hd||n.jd.Ph?this.dg[i._b]++:n.jd.Qh&&this.cg[i._b]++}},r.prototype.Rh=function(t,i,n){var r=n===p?-1:1,e=d;return h.Uc[2+this.Pg[p].Rb[i][t]]===r&&e++,h.Uc[2+this.Pg[g].Rb[i][t]]===r&&e++,e},r.prototype.Sh=function(t,i,n){return this.Ih.Rb[i][t]*(n===p?1:-1)},r.prototype.Th=function(t,i,n){var r=h.Uc[2+this.Pg[1-n].Rb[i][t]];return r*(n===p?1:-1)},r.prototype.toString=function(){return"\n+1=white, -1=black, 0=no one or both\n"+this.Ih.fc(function(t){return 0===t?"    0":"%+.1f".format(t)})+this.Ih.fc(function(t){return x[2+2*t]})},r.prototype.ac=function(){return this.Ih.bc(function(t){return x[2+2*t]})},r.prototype.Uh=function(t){return this.Pg[t]},r.prototype.Mh=function(t){var i=this.Ja.xb(),n=this.Pg[t];for(this.Vh(n,t),this.Lf.Wf.Wh(this.Ja,n,t),this.Oh(),i=this.Ja.xb()-i;i-- >0;)this.Ja.sc()},r.prototype.Nh=function(){for(var t=this.Pg[p].Rb,i=this.Pg[g].Rb,n=this.Ih.Rb,r=this.Xa;r>=1;r--)for(var e=this.Xa;e>=1;e--)n[r][e]=(j[2+t[r][e]]+j[2+i[r][e]])/2;s.debug},r.prototype.Vh=function(t,i){this.Xh=null,this.Yh(this.Fh,t.K(this.Fh),i),s.debug,this.Zh(t.Rb,i),s.debug,this.reduce(this.Hh.K(t)),this.Xh=this.Hh.Rb,s.debug,this.Yh(this.Fh,t.K(this.Fh),i),s.debug,this.Zh(t.Rb,i),s.debug},r.prototype.Yh=function(t,i,n){s.debug;for(var r=t.Rb,e=i.Rb,o=this.Xa;o>=1;o--)for(var h=r[o],a=this.Xa;a>=1;a--)h[a]===l&&this.$h(r,e,a,o,n,1-n)},r.prototype.reduce=function(t){for(var i=t.Rb,n=1;n<=this.Xa;n++)for(var r=1;r<=this.Xa;r++)if(this.Gh[n][r]===l){var e=i[n][r];if(e!==l){var o=this._h(i,r,n,1-e);0===o&&(i[n][r]=l)}}},r.prototype.$h=function(t,i,n,r,e,o){switch(this._h(t,n,r,e)){case 0:if(!this.ai(t,n,r,e,o))return;break;case 4:return;case 3:if(0===this._h(t,n,r,o))return}return this.bi(i,n,r,e)},r.prototype.bi=function(t,i,n,r,e){if(this.Xh){if(!e&&this.Xh[n][i]===l)return;var o=this.Ja.lc(i,n);if(o.gc(r))return;this.Ja.pc(i,n,r)}t[n][i]=r},r.prototype._h=function(t,i,n,r){for(var e=0,o=w;k>=o;o++){var s=E[o];t[n+s[1]][i+s[0]]===r&&e++}return e},r.prototype.ai=function(t,i,n,r,e){for(var o=w;k>=o;o++){var s=C[o];if(t[n+s[1]][i+s[0]]===r)return!0}return!1},r.prototype.Jh=function(){for(var t=[],i=w;k>=i;i++)for(var n=E[i][0],r=E[i][1],o=this.Xa-1;o>=2;o--){var s=e(i,o,this.Xa);t.push([s[0],s[1],n,r])}this.ci=t},r.prototype.Zh=function(t,i){for(var n,r,e,o,s,h,a=this.ci,u=a.length-1;u>=0;u--){var c=a[u],f=c[0],p=c[1];if(t[p][f]===l){var g=c[2],d=c[3],v=f+g,b=p+d,y=t[b][v];if(y===l){var m=v+g,w=b+d;if(y=t[w][m],y===l){var k=m+g,x=w+d;if(y=t[x][k],y===l);else{if(y!==i)continue;if(n=t[p-g][f-d],r=t[p+g][f+d],e=t[b-g][v-d],o=t[b+g][v+d],s=t[w-g][m-d],h=t[w+g][m+d],n===y&&e===y&&s===y)continue;if(r===y&&o===y&&h===y)continue;if(this.bi(t,m,w,y,!0),n===y&&e===y)continue;if(r===y&&o===y)continue;if(this.bi(t,v,b,y,!0),n===y||r===y)continue;this.bi(t,f,p,y,!0)}}else{if(y!==i)continue;if(n=t[p-g][f-d],r=t[p+g][f+d],e=t[b-g][v-d],o=t[b+g][v+d],n!==1-y&&e===y)continue;if(r!==1-y&&o===y)continue;if(this.bi(t,v,b,y,!0),n===y||r===y)continue;this.bi(t,f,p,y,!0)}}else{if(y!==i)continue;if(n=t[p-g][f-d],r=t[p+g][f+d],e=t[b-g][v-d],o=t[b+g][v+d],n===y&&e!==1-y)continue;if(r===y&&o!==1-y)continue;this.bi(t,f,p,y,!0)}}}}},{"../../Grid":9,"../../Stone":15,"../../constants":37,"../../main":38,"./Heuristic":19,util:4}],26:[function(t,i,n){"use strict";function r(t){s.call(this,t),this.di=[],this.ei=this.yf("allyInfl",.03,.01,1),this.fi=this.yf("enemyInfl",.13,.01,1),this.zf=t.Cf.Bf.Af.Rb}var e=t("../../constants"),o=t("../../main"),s=(t("../../Grid"),t("./Heuristic")),h=t("util").inherits,a=t("../../Stone"),u=e.EMPTY,c=e.Nb,f=a.lf,l=e["if"],p=e.jf;h(r,s),i.g=r,r.prototype.Uf=function(t,i){var n=this.di;n.length=0,s.prototype.Uf.call(this,t,i);for(var r=n.length-1;r>=0;r--)this.gi(n[r],i)},r.prototype.Ff=function(t,i,n){return this.hi(t,i,1-n,!0),this.hi(t,i,n)},r.prototype.gi=function(t,i){for(var n,r=t[0],e=t[1],s=t[2],h=e.group,a=h.color,f=0;8>f;f++){var l=r.kf[f];if(l!==c){if(l.color===a){n=r;break}if(l.color===u&&l.wf(h)&&!(this.zf[l.Ec][l.Dc]<0)){n=l;break}}}return n?(o.debug,i[n.Ec][n.Dc]+=s,void(this.Af.Rb[n.Ec][n.Dc]+=s)):void o.debug},r.prototype.hi=function(t,i,n,r){var e=this.Pf[1-n][i][t];if(0===e)return 0;var s=this.Pf[n][i][t];if(!r&&this.zf[i][t]<0)return 0;var h=this.Ja.lc(t,i);if(0===h.uf())return 0;var a=this.ng.Tf(h,n);if(!a)return 0;var u=this.ii(t,i,n),c=u+this.fi*e-this.ei*s;return o.debug,r&&this.di.push([h,a,c]),c},s.prototype.ji=function(t,i,n,r,e){var o=this.Ja.lc(t,i);if(o===c||o.color!==u)return 0;var s=this.bg.Th(t,i,r);if(o.sf()&&(s/=2),0>=s)return 0;if(0===--e)return s;var h=f[n][0],a=f[n][1],l=f[(n+3)%4],p=l[0],g=l[1];return s+=this.ji(t+h+p,i+a+g,n,r,e),s+=this.ji(t+h-p,i+a-g,n,r,e)};var g=1;s.prototype.ii=function(t,i,n){for(var r=Math.max(0,this.bg.Th(t,i,n)),e=l;p>=e;e++)r+=this.ji(t+f[e][0],i+f[e][1],e,n,g);var o=this.Ja.lc(t,i);return o.qf()?r=Math.max(r-1,0):o.sf()&&(r=Math.max(r-.85,0)),r}},{"../../Grid":9,"../../Stone":15,"../../constants":37,"../../main":38,"./Heuristic":19,util:4}],27:[function(t,i,n){"use strict";function r(t){s.call(this,t),this.Df=null}var e=t("../../main"),o=t("../../constants"),s=(t("../../Grid"),t("./Heuristic")),h=t("util").inherits,a=o.ALWAYS,u=o.EMPTY,c=o.Nb;h(r,s),i.g=r,r.prototype.Ig=function(){this.Df||(this.Df=this.Lf.Cf.Ef)},r.prototype.Ff=function(t,i){var n=this.Ja.lc(t,i);return this.ki(t,i,n),0},r.prototype.ki=function(t,i,n){for(var r,o,s=[],h=0,u=n.Bc(this.color),c=0;o=u[c],c<u.length;c++)1===o.Cc?s.push(o):2===o.Cc?s.push(o):o.ld<a&&(h+=o.Cc-1);if(!s.length)return!1;if(h+=n.uf(),e.debug,!this.Df.Og(t,i,this.jg))return!1;if(2===h)for(var f=n.pf(),l=s.length-1;l>=0;l--)for(o=s[l],r=f.length-1;r>=0;r--)f[r].wf(o)&&h--;var p=h>2;if(2===h){if(1===s.length&&n.sf()){e.debug;var g=this.li(s[0],t,i);void 0!==g&&(p=!!g)}p||(e.debug,this.Ja.pc(t,i,this.color),p=!this.Df.Ng(n),this.Ja.sc())}if(!p)return e.debug,!1;for(r=s.length-1;r>=0;r--)o=s[r],this.Rf.sh(o,n),e.debug;return!0},r.prototype.li=function(t,i,n){var r=0,e=0,o=this.Xa;if(1===i||i===o)e=1;else{if(1!==n&&n!==o)throw new Error("not along border");r=1}var s=e,h=r;if(this.Ja.lc(i+s,n+h)===c&&(s=-s,h=-h),this.Ja.lc(i+s,n+h).group!==t){var a=t.color,f=this.Ja.lc(i+r,n+e);for(f!==c&&f.group===t&&(r=-r,e=-e);;){if(i+=r,n+=e,f=this.Ja.lc(i,n),f===c)return null;switch(f.color){case a:return f.group.Cc>2?f.group:null;case u:var l=this.Ja.lc(i+s,n+h);if(l.color===u)continue;return l.color===1-a?null:l.group.Cc>2?l.group:null;default:return null}}}}},{"../../Grid":9,"../../constants":37,"../../main":38,"./Heuristic":19,util:4}],28:[function(t,i,n){"use strict";function r(t){s.call(this,t),this.vh=t.Cf.ni.vh,this.zf=t.Cf.Bf.Af.Rb}var e=t("../../constants"),o=t("../../main"),s=(t("../../Grid"),t("./Heuristic")),h=t("util").inherits,a=e.EMPTY,u=e.NEVER,c=e.mi,f=e.ALWAYS,l=e.th,p=e.uh;h(r,s),i.g=r,r.prototype.Uf=function(t,i){s.prototype.Uf.call(this,t,i);var n=this.bg.Kh;for(var r in n){var e=n[~~r];e.ld!==f&&e.kd!==f&&this.oi(i,e)}},r.prototype.oi=function(t,i){var n=[],r=i.jd.pi(n);if(r===c){var e=this.Ja.lc(n[0],n[1]);o.debug,this.Rf.ph(i,e,this.color)}},r.prototype.Ff=function(t,i,n){var r=this.Ja.lc(t,i);return this.qi(r,n),this.qi(r,1-n),0},r.prototype.qi=function(t,i){if(this.bg.Rh(t.Dc,t.Ec,i)!==u&&this.ng.Tf(t,1-i)){var n=this.Lf.Wf.yh(t);n.zh&&n.zh.group.color===i?this.ri(t,i,n):this.si(t,i)}},r.prototype.ri=function(t,i,n){if(!(n.ti>2))for(var r=t.rd.length-1;r>=0;r--){var e=t.rd[r];if(e.color===i&&1===e.group.Cc){o.debug,this.Rf.ph(e.group,t,i);break}}},r.prototype.si=function(t,i){for(var n=this.vh[l].Rb,r=this.vh[p].Rb,e=null,o=null,s=t.rd.length-1;s>=0;s--){var h=t.rd[s];switch(h.color){case a:n[h.Ec][h.Dc]!==i&&r[h.Ec][h.Dc]!==i||(e=h);break;case i:o=h.group}if(e&&o)break}if(e){if(!o){if(this.zf[t.Ec][t.Dc]<0)return;o=this.Lf.Wf.yh(e).ui[i][0]}o.kd!==f&&o.ld!==f&&this.Rf.ph(o,t,i)}}},{"../../Grid":9,"../../constants":37,"../../main":38,"./Heuristic":19,util:4}],29:[function(t,i,n){"use strict";function r(t){o.call(this,t),this.xf=this.yf("infl",1,.5,3),this.vi=this.yf("border",10,0,20),this.wi=this.Xa<=9?[0,.2,.8,.95,1]:[0,.2,.8,1,.95,.8]}var e=t("../../main"),o=t("./Heuristic"),s=t("util").inherits;s(r,o),i.g=r,r.prototype.Ff=function(t,i){var n=0,r=0,o=this.Ja.lc(t,i),s=this.Pf[this.jg],h=this.Pf[this.color];n+=s[i][t],r+=h[i][t];for(var a=o.rd.length-1;a>=0;a--){var u=o.rd[a];if(u.color!==e.EMPTY)return 0;n+=s[u.Ec][u.Dc],r+=h[u.Ec][u.Dc]}var c=1+this.xf*Math.max(n+r-3,0)*(this.Xa/9),f=this.wi.length-1,l=Math.min(this.tf(t),f),p=Math.min(this.tf(i),f),g=this.wi[l]*this.wi[p]*this.vi,d=0;return this.Lf.Kf||(d=this.bg.Sh(t,i,this.color),d>0&&(d=0)),d+g/c},r.prototype.tf=function(t){return Math.min(t-1,this.Xa-t)}},{"../../main":38,"./Heuristic":19,util:4}],30:[function(t,i,n){"use strict";function r(t){this.xi=t.group._b,this.oh=[t],t.nh=this}function e(t){return"#"+t.group._b}var o=t("../../../main");i.g=r,r.prototype.toString=function(){return this.oh.map(e).toString()},r.prototype.yi=function(t){if(!t.nh)return o.debug,this.oh.push(t),void(t.nh=this);if(t.nh.xi!==this.xi){o.debug;for(var i=t.nh.oh,n=i.length-1;n>=0;n--)this.oh.push(i[n]),i[n].nh=this}},r.prototype.remove=function(t){var i=this.oh.indexOf(t);if(0>i)throw new Error("Band.remove on wrong Band");this.oh.splice(i,1),t.nh=null,o.debug},r.zi=function(t){if(1===t.length)throw new Error("add Band of 1");for(var i=null,n=0;n<t.length;n++)if(t[n].jd.nh){i=t[n].jd.nh;break}var e=0;for(i||(i=new r(t[e++].jd)),n=e;n<t.length;n++)i.yi(t[n].jd)}},{"../../../main":38}],31:[function(t,i,n){"use strict";function r(t){this.Qd=t,this.version="chuckie",this.mode=null,this.Kf=!1,this.Ja=null,this.Ei=null,this.Af=null,this.Fi=[],this.Yf=null,this._d=[0,0],this.ae=[0,0],this.Gi=null}function e(t){return t>1&&2>t?t-1:t}function o(t){return t[b]===t[y]||t[b]>=m&&t[y]>=m?void 0:(t[b]=e(t[b]),t[y]=e(t[y]),t[b]>t[y]?b:y)}function s(t,i){for(var n=0;n<i.length;n++){var r=i[n];c.debug,r.Zi()!==w&&(i[n]=null)}var e=0;for(n=0;n<i.length;n++)i[n]&&(i[n].$i(t.name+": liveliness="+i[n]._i.toFixed(4)),e++);return e}function h(t,i){for(var n=0;n<i.length;n++)i[n].$i(t.name);return i.length}function a(){return 0}var u=t("../../../constants"),c=t("../../../main"),f=t("../../../Grid"),l=t("./GroupInfo"),p=t("./Void"),g=t("./ZoneFiller"),d=u.EMPTY,v=u.Mb,b=u.Ca,y=u.Da,m=l.Ai,w=l.Bi,k=l.Ci,x=l.Di,j=0,E=1,C=2;i.g=r,r.prototype.$d=function(t){c.debug,this._d[b]=this._d[y]=0,this.ae[b]=this.ae[y]=0,this.Af&&this.Af.Xa===t.Xa||(this.Af=new f(t.Xa,v)),this.Hi(j,t,this.Af)&&(this.Ii(),this.Kf||t.vc(this.ae))},r.prototype.Zd=function(){return this.Af},r.prototype.yh=function(t){return this.Ei.Rb[t.Ec][t.Dc]},r.prototype.ag=function(t,i){this.Hi(C,t,i)},r.prototype.Vf=function(){this.Ii()},r.prototype.Wh=function(t,i,n){this.Hi(E,t,i)&&this.Ii(n)},r.prototype.ac=function(){return this.Ei.ac()},r.prototype.ec=function(){for(var t,i="Grid:\n"+this.Ei.fc()+"Voids:\n",n=this.Fi,r=0;t=n[r],r<n.length;r++)i+=t.toString()+"\n";i+="Groups:\n";for(var e in this.Yf)i+=this.Yf[~~e].toString()+"\n";return this._d&&(i+="Score:"+this._d.map(function(t,i){return" player "+i+": "+t+" points"})),i},r.prototype.Hi=function(t,i,n){return this.mode=t,this.Kf=this.Qd.ya&&t===j,this.Ja=i,this.Ei=n,this.Gi=new g(i,n),0===i.xb()?!1:(n.Wc(i),this.Ji(),this.Ki(),this.Li(),!0)},r.prototype.Ii=function(t){this.mode===C?this.Mi():(this.Ni(),this.Mi(t),this.Oi(),this.Pi())},r.prototype.Qi=function(t,i){var n=this.Yf[t._b];n||(t.jd&&t.jd.Wf===this?t.jd.Ri():t.jd=new l(t,this),n=this.Yf[t._b]=t.jd),n.Si.push(i)},r.prototype.Ji=function(){c.debug;var t=f.Pc;this.Yf={},this.Fi.clear();for(var i,n,r=this.Ja,e=new p(r,t++),o=1;o<=r.Xa;o++)for(var s=1;s<=r.Xa;s++){var h=this.Gi.Ti(s,o,d,e);if(0!==h){this.Fi.push(e);for(var a=b;y>=a;a++)for(n=e.ui[a],i=n.length-1;i>=0;i--)this.Qi(n[i],e);e=new p(r,t++)}}},r.prototype.Ki=function(){for(var t in this.Yf)this.Yf[~~t].Ui()},r.prototype.Li=function(){c.debug;for(var t=this.Fi.length-1;t>=0;t--)this.Fi[t].Vi()},r.prototype.Ni=function(){if(!this.Kf){var t=this.Ja;if(!(t.xb()<2*t.Xa))for(var i=[0,0],n=[0,0];;){for(var r=!1,e=this.Fi.length-1;e>=0;e--){var s=this.Fi[e];if(void 0===s.color&&!(s.ti>2*t.Xa)){i[b]=i[y]=n[b]=n[y]=0;for(var h=b;y>=h;h++)for(var a=s.ui[h].length-1;a>=0;a--){var u=s.ui[h][a].jd;i[h]+=u.Wi(),n[h]+=u.Xi()}if(!(n[b]>4&&n[y]>4)){var f=o(i);void 0!==f?(c.debug,s.Yi(f),r=!0):c.debug}}}if(!r)break}}};var D={name:"brothers",l:l.prototype.aj},S={name:"singleEye",l:l.prototype.bj,cj:s},X={name:"race",l:l.prototype.Zi,cj:a},R={name:"atari",l:function(){return this.group.Cc<=1?w:x}},M={name:"final",l:function(){return this.dj(2)}},B=[];B[j]=[D,R,S,M],B[E]=[D,S],B[C]=[D,S,X],r.prototype.ej=function(t,i){c.debug;var n=0,r=0,e=[];for(var o in this.Yf){var s=this.Yf[~~o];if(!s.Qh&&!s.Ph)switch(r++,t.l.call(s,i)){case w:e.push(s);break;case k:n++}}return e.length&&(n+=t.cj?t.cj(t,e):h(t,e)),c.debug&&n,n===r?0:0===n?r:-n},r.prototype.Mi=function(t){if(!this.Kf){for(var i,n=B[this.mode],r=0;r<n.length;){if(i=this.ej(n[r++],t),0===i)return void this.Li();0>i&&(r=0,this.Li())}c.debug&&i>0}},r.prototype.Oi=function(){for(var t=[],i=this.Fi.length-1;i>=0;i--){var n=this.Fi[i];t[b]=t[y]=!1;for(var r=b;y>=r;r++)for(var e,o=n.ui[r],s=0;e=o[s],s<o.length;s++)if(this.Kf||e.jd.Wi()>=2){t[r]=!0;break}t[b]&&t[y]?n.fj():this.Kf&&(n.color=t[b]?b:y)}},r.prototype.Pi=function(){this.gj(),this.hj(),this.ij()},r.prototype.gj=function(){if(this.Kf)for(var t in this.Yf){var i=this.Yf[~~t].group;this._d[i.color]+=i.wc.length}},r.prototype.hj=function(){if(!this.Kf)for(var t in this.Yf){var i=this.Yf[~~t];if(i.Ph){for(var n=!1,r=i.jj.length-1;r>=0;r--)if(!i.jj[r].jd.Ph){n=!0;break}var e=i.group.color;if(!i.jj.length||n){var o=i.group.wc[0],s=this.Gi.Ti(o.Dc,o.Ec,e,f.Sc+e);this.ae[e]+=s,this._d[1-e]+=s}else for(var h=i.Si.length-1;h>=0;h--)i.Si[h].Yi(e)}}},r.prototype.ij=function(){for(var t=this.Ei.Rb,i=[],n=this.Fi.length-1;n>=0;n--){var r=this.Fi[n],e=r.kj(this.Kf?null:i);if(e){this._d[r.color]+=e-i.length,this.Gi.Ti(r.Dc,r.Ec,r,f.Tc+r.color);for(var o=i.length-1;o>=0;o--){var s=i[o];t[s.Ec][s.Dc]=f.Rc}}else this.Gi.Ti(r.Dc,r.Ec,r,f.Rc)}}},{"../../../Grid":9,"../../../constants":37,"../../../main":38,"./GroupInfo":32,"./Void":33,"./ZoneFiller":34}],32:[function(t,i,n){"use strict";function r(t,i){this.Wf=i,this.lj=[],this.Si=[],this.mj=[],this.jj=[],this.nj=[0,0],this.eg=[],this.oj=[],this.pj=[],this.group=t,this.Ri()}function e(t,i,n){for(var r=i.length-1;r>=0;r--)for(var e=i[r].jd,o=t.length-1;o>=0;o--)if(!(t[o].indexOf(e)<0)){-1!==n&&n!==o?(t[n]=t[n].concat(t[o]),t.splice(o,1),n>o&&n--):n=o;break}return n}function o(t,i,n,r){var o=-1;o=e(t,n,o),o=e(t,r,o),0>o?t.push([i]):t[o].push(i)}var s=t("../../../constants"),h=t("../../../main"),a=t("./Band"),u=s.EMPTY,c=s.NEVER,f=s.mi,l=s.ALWAYS,p=s.th,g=s.uh;i.g=r;var d=r.Bi=-1,v=r.Ci=1,b=r.Di=0,y=r.Ai=1e3;r.prototype.Ri=function(){this.qj=this._i=0,this.lj.length=0,this.Si.length=0,this.nh=null,this.Qh=this.Ph=!1,this.Zf=null,this.mj.length=0,this.jj.length=0,this.nj[p]=this.nj[g]=0,this.eg.length=0,this.oj.length=0,this.pj.length=0,this.rj=0},r.sj=function(t){return"#"+t.group._b;
},r.prototype.toString=function(){var t=this.nh?this.nh.toString():"";return this.group.toString()+" (isAlive:"+this.Qh+" isDead:"+this.Ph+" voids:"+this.lj.length+" brothers:["+t+"] deadEnemies:["+this.mj.map(r.sj)+"])"},r.prototype.tj=function(t,i){return h.debug,this.lj.push(t),this.qj++,i&&i.length>1&&a.zi(i),this},r.prototype.uj=function(t){var i=this.lj.indexOf(t);if(-1===i)throw new Error("remove unknown void");h.debug,this.lj.splice(i,1),this.qj--},r.prototype.Ui=function(){for(var t=this.group,i=t.color,n=[],r=[],e=[],o=t.qd(),s=o.length-1;s>=0;s--)for(var h=o[s],u=h.rd,c=null,f=u.length-1;f>=0;f--){var l=u[f];if(l.color===i&&l.group!==t){c=l.group;var p=n.indexOf(c);p>=0?e[p]!==h&&(r[p]=!1):(n.push(c),r.push(!0),e.push(h))}}if(n.length){for(var g=n.length-1;g>=0;g--)if(r[g]){var d=e[g];this.eg.push(d),this.oj.push(n[g]),this.Wf.yh(d).vj()}else this.pj.push(n[g]);n.push(t),a.zi(n)}},r.prototype.wj=function(t){for(var i=[],n=this.oj.length-1;n>=0;n--)this.eg[n]!==t&&i.push(this.oj[n]);return i},r.prototype.rh=function(t){var i=this.nh;if(!i)return[this];for(var n=[],r=i.oh.length-1;r>=0;r--){var e=i.oh[r];o(n,e,e.pj,e.wj(t))}return n},r.prototype.mh=function(){var t=this.nh;if(!t)return[];for(var i=[],n=t.oh.length-1;n>=0;n--){var r=t.oh[n];r!==this&&o(i,r,r.pj,r.oj)}return i},r.prototype.Of=function(){if(this.qj>=2)return c;var t=this.ih();return t>=3?c:0===t?l:f},r.prototype.xj=function(t,i,n){if(this.Of()!==c&&!this.mj.length){for(var r=this.group.color,e=0,o=this.Si.length-1;o>=0;o--){var s=this.Si[o];s.color===r&&e++}if(!(e>=2||n&&e===this.Si.length))for(o=this.eg.length-1;o>=0;o--){var h=this.eg[o];this.Wf.yh(h)===t&&i.indexOf(h)<0&&i.push(h)}}},r.prototype.$i=function(t){this.Ph=!0;for(var i=this.jj=this.group.sd(),n=i.length-1;n>=0;n--)i[n].jd.mj.push(this);i.length>1&&a.zi(i),h.debug},r.prototype.Wi=function(t,i){if(this.Qh||this.qj>=2)return y;for(var n,r=0,e=this.group.color,o=this.group.Cc,s=this.Si.length-1;s>=0;s--){var h=this.Si[s],a=Math.min(o,h.ti);if(h.zh)h.zh===this&&(r+=a);else{var u=h.ui[e];if(1===u.length)r+=a;else{var c=this.group._b,f=c;for(n=u.length-1;n>=0;n--)f=Math.min(u[n]._b,f);c===f&&(r+=a)}}}if(r/=100,i||(r+=o/1e4),this.Ph)return 0+r;var l=0;if(!i&&this.nh){var p=this.nh.oh;for(n=p.length-1;n>=0;n--)p[n]!==this&&(l+=p[n].Wi(t,!0))}var g=t?this.yj():this.mj.length;return this.qj+g+l+r},r.prototype.pi=function(t){if(this.qj>1)return l;if(0===this.qj)return c;var i=this.lj[0],n=i.ti;if(n>6)return l;h.debug;for(var r=this.group,e=r.color,o=null,s=0,a=0,p=0,g=i.zj,d=!1,v=[0,0,0,0,0],b=0;n>b;b++){for(var y=g[b],m=0,w=0,k=0,x=y.rd.length-1;x>=0;x--){var j=y.rd[x];switch(j.color){case u:k++;break;case e:w++;break;default:j.group.Cc>1?m++:k++}}if(m){if(2>k+(w?1:0))continue}else{if(2>k)continue;v[k]++}if(h.debug,p++,y.qf()&&(d=!0),o&&!o.qf()){if(a>m)continue;if(s+a>=k+m)continue}o=y,a=m,s=k}if(d&&p>1&&p--,h.debug,!o)return c;if(p>=2){var E=5===n&&0===a&&1===v[3]&&3===v[2],C=6===n&&0===a&&2===v[3]&&4===v[2];if(!E&&!C)return l}return t[0]=o.Dc,t[1]=o.Ec,f},r.prototype.yj=function(){for(var t=this.mj.length,i=t-1;i>=0;i--)for(var n=this.mj[i].Si,r=n.length-1;r>=0;r--)if(n[r].zh===this){t--;break}return t},r.prototype.aj=function(){if(!this.nh)return b;for(var t=this.nh.oh,i=0,n=!1,r=t.length-1;r>=0;r--){var e=t[r];e!==this&&(n||e.Qh?n=e.Qh=!0:(i+=e.qj,i>=2&&(n=e.Qh=!0)))}return n?(h.debug,this.Qh=!0,v):b},r.prototype.Aj=function(){return this.nh?!1:this.Si[0].color===this.group.color?!1:!(this.group.wc.length>=6)},r.prototype.bj=function(t){if(this.qj>=2)return this.Qh=!0,h.debug,v;if(this.Aj())return d;var i=[],n=this.pi(i);if(n===f){if(this.rj=.5,void 0===t)return b;t!==this.group.color&&(n=c)}return n===c?(this.rj=0,this.nh||this.mj.length?b:this.qh()>=1.5?b:(this._i=this.Wi(),d)):(this.Qh=!0,this.rj=1,h.debug,v)},r.prototype.Zi=function(){for(var t=this._i||this.Wi(),i=this.group.sd(),n=null,r=0;r<i.length;r++){var e=i[r].jd,o=t-e.Wi();if(h.debug,o>0)return h.debug,b;0===o&&(h.debug,n=e)}return n?(this.Zf=n,n.Zf=this,b):d},r.prototype.dj=function(t){var i=this._i=this.Wi(!0);return i>=2?(this.Qh=!0,h.debug,v):t>i?(this._i=i,d):b},r.prototype.Bj=function(t,i){if(this.nh){for(var n=this.nh.oh,r=0,e=n.length-1;e>=0;e--)r+=t.call(n[e],i);return r}return t.call(this,i)},r.prototype.Ah=function(t,i){this.nj[t]+=i},r.prototype.Dg=function(){for(var t=1-this.group.color,i=this.Si.length-1;i>=0;i--){var n=this.Si[i];if(n.color!==t)return!1}return!0},r.prototype.Cj=function(){for(var t=this.group.color,i=this.Si.length-1;i>=0;i--){var n=this.Si[i];if(void 0===n.color){for(var r=n.ui[1-t],e=!0,o=r.length-1;o>=0;o--){var s=r[o];if(s.wc.length>=6||r.kd===l){e=!1;break}}if(e)return 1}}return 0},r.prototype.ih=function(){return this.qj+this.rj+this.Cj()+Math.max(this.nj[p],this.nj[g])/2},r.prototype.qh=function(){return this.Bj(this.ih)},r.prototype.Dj=function(){return this.group.wc.length},r.prototype.Xi=function(){return this.Bj(this.Dj)}},{"../../../constants":37,"../../../main":38,"./Band":30}],33:[function(t,i,n){"use strict";function r(t,i){this.Ja=t,this.code=i,this.Dc=this.Ec=0,this.ti=0,this.ui=null,this.zj=null,this.Ej=void 0,this.color=void 0,this.zh=void 0,this.Fj=!1,this.Gj=!1,this.eg=[]}function e(t){return t?g[t]:g[0]}function o(t){for(var i=t.length-1;i>=0;i--)if(!t[i].jd.Ph)return!1;return!0}function s(t){return"#"+t._b}var h=t("../../../constants"),a=t("../../../main"),u=t("../../../Grid"),c=h.Ca,f=h.Da,l=1,p=2,g=["void","eye","dame"];i.g=r,r.prototype.Hj=function(t,i){return this.Dc=t,this.Ec=i,this.ui=[[],[]],this.zj=[],this.ui},r.prototype.Ij=function(t,i){this.ti++,this.zj.push(this.Ja.lc(t,i))},r.prototype.Vi=function(){var t=this.ui[c],i=this.ui[f],n=o(t),r=o(i);if(n&&r)return void(this.Fj||void 0===this.color||this.Jj());if(this.Ej!==l&&(n||r)){var e=n?f:c;if(!this.Kj(e))return t.length&&i.length?void this.Yi(e):this.Lj(e)}},r.prototype.vj=function(){a.debug&&!this.Gj,this.Gj=!0},r.prototype.Mj=function(t,i,n){i||(i=[]);for(var r=this.ui[t],e=r.length-1;e>=0;e--)r[e].jd.xj(this,i,n);return i.length},r.prototype.Kj=function(t){if(!this.Gj)return!1;var i=this.ti-this.Mj(t);return i===this.ti?(a.debug,this.Gj=!1,!1):(a.debug,0===i?(this.zh&&(this.zh.uj(this),this.zh=null),this.color=t,!0):!1)},r.prototype.Lj=function(t){a.debug,this.Ej=l,this.color=t;var i=this.ui[t];this.zh=i[0].jd.tj(this,i)},r.prototype.Yi=function(t){if(t!==this.color){a.debug,this.zh&&(this.zh.uj(this),this.zh=null),this.color=t;for(var i=this.ui[1-t],n=i.length-1;n>=0;n--)for(var r=i[n].jd.Si,e=r.length-1;e>=0;e--)if(r[e]!==this&&r[e].color===t)return;var o=this.ui[t];this.zh=o[0].jd.tj(this,o)}},r.prototype.fj=function(){a.debug,this.zh&&(this.zh.uj(this),this.zh=null),this.Ej=p,this.color=void 0},r.prototype.Jj=function(){a.debug;var t=this.color;if(void 0===t)throw new Error("dead group's eye of undefined owner");this.Fj=!0,this.Gj=!1,this.zh&&(this.zh.uj(this),this.zh=null),this.Ej=l,this.color=1-t;for(var i=this.ui[t],n=i.length-1;n>=0;n--){var r=i[n].jd;if(r.jj.length)return void(this.zh=r.jj[0].jd.tj(this))}},r.prototype.kj=function(t){return void 0===this.color?0:(t&&(t.length=0,this.Gj&&this.Mj(this.color,t,!0)),this.ti)},r.prototype.Nj=function(t){var i=t.group;return this.ui[i.color].indexOf(i)>-1},r.prototype.toString=function(){return"{"+e(this.Ej)+"-"+u.ed(this.Dc,this.Ec)+" vcount:"+this.ti+" black:"+(this.ui[c].map(s).toString()||"-")+" white:"+(this.ui[f].map(s).toString()||"-")+"}"}},{"../../../Grid":9,"../../../constants":37,"../../../main":38}],34:[function(t,i,n){"use strict";function r(t,i){this.Ja=t,this.Rb=i.Rb,this.ui=null,this.Oj=null}var e=t("../../../main"),o=e.Mb,s=e.Nb;i.g=r,r.prototype.Ti=function(t,i,n,r){if(this.Rb[i][t]!==n)return 0;this.Oj=n;var e="number"!=typeof r?r:null;this.ui=e&&e.Hj(t,i);for(var o,s,h,a=0,u=this.Rb,c=[[t,i,i]];o=c.pop();)if(s=o[0],i=o[1],h=o[2],u[i][s]===n){for(;this.Pj(s,i-1);)i--;for(;this.Pj(s,h+1);)h++;a+=h-i+1;for(var f=s-1;s+1>=f;f+=2){for(var l=null,p=i;h>=p;p++)s>f&&(u[p][s]=r,e&&e.Ij(s,p)),this.Pj(f,p)?l||(l=p):l&&(c.push([f,l,p-1]),l=null);l&&c.push([f,l,h])}}return a},r.prototype.Pj=function(t,i){var n=this.Rb[i][t];if(n===o||n===s)return!1;if(n===this.Oj)return!0;if(!this.ui)return!1;if("number"!=typeof n)return!1;var r=this.Ja.lc(t,i).group;if(!r)throw new Error("Unexpected: ZoneFiller replacing a group");var e=this.ui[n];return-1===e.indexOf(r)&&e.push(r),!1}},{"../../../main":38}],35:[function(t,i,n){"use strict";function r(t,i,n){this.name="Chuckie",this.Rj=this.name,this.Sj=R,this.Qd=t,this.Ja=t.Ja,this.Wf=new s(t),this.tg=n||new a,this.Xa=this.Ja.Xa,this.Kf=t.ya,this.Tj=new u(this.Xa,E),this.Af=new u(this.Xa,0,E),this.Mf=this.yf("smallerMove",.03,.01,.1),this.Uj(),this.setColor(i),this.Vj()}function e(t,i){return i[1]-t[1]}var o=t("../../main"),s=t("./boan/BoardAnalyser"),h=t("../../constants"),a=t("../../Genes"),u=t("../../Grid"),c=t("./boan/ZoneFiller"),f=t("./Connector"),l=t("./GroupAnalyser"),p=t("./GroupsAndVoids"),g=t("./Hunter"),d=t("./Influence"),v=t("./MoveInfo"),b=t("./NoEasyPrisoner"),y=t("./PotentialEyes"),m=t("./PotentialTerritory"),w=t("./Pusher"),k=t("./Savior"),x=t("./Shaper"),j=t("./Spacer"),E=h.Mb,C=h.gg,D=h.Qj,S=h.hg,X=-1,R="0.1";i.g=r,r.Sd=s,r.Wj=c,r.prototype.Xj=function(t){var i=new t(this);return i.lg(this.Yj.length),this.Yj.push(i),i},r.prototype.Uj=function(){var t=this.Cf={};this.Yj=[],t._f=this.Xj(v),t.pg=this.Xj(m),t.Zj=this.Xj(p),t.qg=this.Xj(d),t.ni=this.Xj(y),t.$j=this.Xj(l),t.Bf=this.Xj(b),t._j=this.Xj(k),t.Ef=this.Xj(g),t.og=this.Xj(f),t.ak=this.Xj(j),t.bk=this.Xj(w),t.ck=this.Xj(x);for(var i=0;i<this.Yj.length;i++)this.Yj[i].kg()},r.prototype.setColor=function(t){this.color=t;for(var i=0;i<this.Yj.length;i++)this.Yj[i].rg(t)},r.prototype.Vj=function(t){t&&(this.tg=t),this.dk=this.ek=0,this.fk=this.gk=this.hk=0,this.ik=!1,this.jk=this.kk=X,this.sg=null},r.prototype.lk=function(t){for(var i=0;i<this.Yj.length;i++){var n=this.Yj[i];if(n.name===t)return n}return null},r.prototype.yf=function(t,i,n,r){return void 0===n&&(n=null),void 0===r&&(r=null),this.tg.get(this.name+"-"+t,i,n,r)},r.prototype.mk=function(t,i,n){this.fk=n,this.gk=t,this.hk=i,this.ik=1!==this.nk},r.prototype.pk=function(t,i,n){if(n>this.fk)this.nk=1,this.mk(t,i,n);else{if(this.nk++,Math.random()*this.nk>=1)return;this.mk(t,i,n)}},r.prototype.qk=function(){this.dk++;var t=this.Tj.Rb,i=this.Af.Rb;this.rk(),this.sk(t,i),this.tk(t,i);var n=this.uk(t,i);return o.debug=this.vk,n},r.prototype.rk=function(){this.fk=this.Mf-.001,this.gk=X,this.vk=o.debug,o.debug=!1},r.prototype.sk=function(t,i){for(var n=1;n<=this.Xa;n++)for(var r=1;r<=this.Xa;r++)this.Ja.rb(r,n,this.color)?(t[n][r]=C,i[n][r]=0):t[n][r]=D;if(this.jk!==X){if(t[this.kk][this.jk]===D)throw new Error("Invalid test move: "+this.jk+","+this.kk);t[this.kk][this.jk]=S}},r.prototype.tk=function(t,i){for(var n=0;n<this.Yj.length;n++){var r=this.Yj[n];o.debug=this.vk&&this.sg===r.name;var e=Date.now();r.Ig&&r.Ig(),r.Uf(t,i);var s=Date.now()-e;s>=3&&!o.wk}this.Cf._f.Ug(t,i)},r.prototype.uk=function(t,i){for(var n=1;n<=this.Xa;n++)for(var r=1;r<=this.Xa;r++)t[n][r]<C||i[n][r]<this.fk||this.pk(r,n,i[n][r]);return this.fk<this.Mf?"pass":(this.ik&&this.ek++,u.ed(this.gk,this.hk))},r.prototype.xk=function(){var t=this.Cf.pg;return t.Uf(),t.Ih.Rb},r.prototype.yk=function(t,i){this.jk=t,this.kk=i,this.qk(),this.jk=X},r.prototype.zk=function(t,i){for(var n={},r=0;r<this.Yj.length;r++){var e=this.Yj[r],o=e.Af.Rb[i][t];o&&(n[e.name]=o)}return n},r.prototype.Ak=function(t,i){return this.yk(t,i),this.Af.Rb[i][t]},r.prototype.Bk=function(t,i,n){this.yk(t,i);var r=this.lk(n);return r.Af.Rb[i][t]},r.prototype.Ck=function(t){this.sg=t},r.prototype.Dk=function(t,i){var n=this.Qd.qb(t);if(!n)return"";var r=n[0],o=n[1];if(i){if(!this.Ja.rb(r,o,this.Qd.Na))return"Invalid move: "+t;this.yk(r,o)}var s=this.zk(r,o),h=this.Af.Rb[o][r],a=[];for(var u in s)0!==s[u]&&a.push([u,s[u]]);a.sort(e);for(var c=t+" ("+h.toFixed(2)+")\n",f=0;f<a.length;f++)c+="- "+a[f][0]+": "+a[f][1].toFixed(2)+"\n";return c}},{"../../Genes":7,"../../Grid":9,"../../constants":37,"../../main":38,"./Connector":16,"./GroupAnalyser":17,"./GroupsAndVoids":18,"./Hunter":20,"./Influence":21,"./MoveInfo":22,"./NoEasyPrisoner":23,"./PotentialEyes":24,"./PotentialTerritory":25,"./Pusher":26,"./Savior":27,"./Shaper":28,"./Spacer":29,"./boan/BoardAnalyser":31,"./boan/ZoneFiller":34}],36:[function(t,i,n){"use strict";var r=t("./main"),e=[{name:"Chuckie",Ek:t("./ai/chuckie")}];r.Fk(e),t("./ui/style.less");var o=t("./ui/Ui"),s=new o;s.Gk()},{"./ai/chuckie":35,"./main":38,"./ui/Ui":43,"./ui/style.less":44}],37:[function(t,i,n){"use strict";function r(){this.th=0,this.uh=1,this.Nb=null,this.Mb=-99,this.EMPTY=-1,this.Ca=0,this.Da=1,this.gg=0,this.hg=1,this.Qj=-1,this.Hk=-2,this.NEVER=0,this.mi=1,this.ALWAYS=2,this["if"]=0,this.jf=3,this.Bh=0,this.Ch=1,this.Dh=2,this.Eh=3,this.Ea="Japanese",this.Ik="Chinese"}i.g=new r,r.prototype.Jk=function(t){t.Nb=null,t.Mb=-99,t.EMPTY=-1,t.Ca=0,t.Da=1,t.gg=0,t.hg=1,t.Qj=-1,t.Hk=-2,t.NEVER=0,t.mi=1,t.ALWAYS=2,t["if"]=0,t.jf=3,t.Bh=0,t.Ch=1,t.Dh=2,t.Eh=3}},{}],38:[function(t,i,n){"use strict";function r(){h.Jk(this),this.debug=!1,this.zb=this.Ab=this.Kk=!1,this.appName=o.name,this.appVersion=o.version,this.Lk=this.wk=!1,this.Mk=null,this.Td=this.Nk=this.Ok=this.Pk=null,this.Qk=null,this.Rk=null,this.Sk=null,this.Tk=null,this.log=new s}function e(t){return"\n"!==t.slice(-1)?0:"\r\n"!==t.slice(-2)?1:2}var o=t("../package.json"),s=t("./Logger"),h=t("./constants"),a=new r;i.g=a,r.prototype.Fk=function(t){this.Mk={};for(var i=0;i<t.length;i++){var n=t[i];this.Mk[n.name]=n.Ek}var r=t.length-1;this.Td=this.Nk=t[r].Ek,this.Ok=r>=1?t[r-1].Ek:null,this.Pk=r>=2?t[r-2].Ek:null},r.prototype.Uk=function(t,i){this.Sk=new t,i(this.Sk)},a.mg=function(t){return t.name||t.toString().split(/ |\(/,2)[1]},a.clone=function(t){if(null===t||void 0===t)return t;var i;if(t instanceof Array){i=[];for(var n=0,r=t.length;r>n;n++)i[n]=t[n]}else{if("object"!=typeof t)throw new Error("main.clone called on "+typeof t);if("function"==typeof t.clone)return t.clone();i={};for(var e in t){var o=t[e];"function"!=typeof o&&(i[e]=o)}}return i},String.prototype.Fb=function(t){if(void 0===t)return this.substr(0,this.length-e(this));var i=this.length-t.length;return this.substr(i)===t?this.substr(0,i):this.toString()},String.prototype._c=function(t){if(void 0===t)t=e(this)||1;else if("number"!=typeof t)throw new Error("Invalid parameter type for String.count: "+typeof t);return this.substr(0,this.length-t)},String.prototype.startsWith||(String.prototype.startsWith=function(t){return this.substr(0,t.length)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(t){return this.substr(this.length-t.length)===t}),String.prototype.format=function(t){if("%"!==this[0])throw new Error("Invalid format: "+this.toString());var i,n=this.slice(1,-1),r=0,e=this.slice(-1);switch(e){case"d":case"x":var o=" ";"0"===n[r]&&(r++,o="0");var s=parseInt(n.substr(r));i=t.toString("x"===e?16:10);for(var h=s-i.length;h>0;h--)i=o+i;return i;case"f":var a="";if("+"===n[r]&&(r++,t>0&&(a="+")),"."!==n[r++])break;var u=parseInt(n.substr(r));return a+t.toFixed(u)}throw new Error("Unknown format: "+this.toString())},String.prototype.Xe=function(t,i){return this>=t&&i>=this},a.Vk=function(t,i){for(var n=new Array(t),r=t-1;r>=0;r--)n[r]=i;return n},a.Gc=function(t,i,n){for(var r=new Array(t),e=r[0]=a.Vk(i,n),o=t-1;o>=1;o--)r[o]=e.concat();return r},Array.Wk=function(t,i){if(void 0===t)return[];if(void 0===i)return new Array(t);var n,r=[];if("function"==typeof i)for(n=0;t>n;n++)r[n]=i(n);else for(n=0;t>n;n++)r[n]=i;return r},Array.prototype.Xk=function(t){for(var i=this.length,n=0;n<t.length;n++){var r=t[n];-1===this.indexOf(r)&&this.push(r)}return this.length-i},Array.prototype.clear=function(){this.length=0}},{"../package.json":49,"./Logger":12,"./constants":37}],39:[function(t,i,n){"use strict";function r(){this.Yk=null,this.Zk=null,this.Ja=null,this.Xa=0,this.$k=null,this.cursor={type:"CR",x:0,y:0},this._k=!1,this.al={type:null,x:0,y:0}}function e(t){switch(t){case-1:return{type:"mini",c:c.B};case-.5:return{type:"outline",c:c.B};case 0:return null;case.5:return{type:"outline",c:c.W};case 1:return{type:"mini",c:c.W};default:return null}}function o(t){switch(t){case a.Tc+l:case a.Sc+f:return{type:"mini",c:c.B};case a.Tc+f:case a.Sc+l:return{type:"mini",c:c.W};case a.Rc:return{type:"SL",c:"grey"};default:return null}}function s(t){if(null===t)return null;var i=1,n=0,r=2,e=0;if(void 0!==b&&(n=b),void 0!==y&&(r=y),void 0!==m&&(e=m),t===e)return null;for(var o=t.toFixed(r),s=n;r>s;s++)o=o.Fb("0");if(o=o.Fb("."),"0."===o.substr(0,2)&&(o=o.slice(1)),0===e){if("0"===o||".0"===o)return null;i=1>t?.6:1}return{type:"LB",text:o,scale:i}}var h=t("../main"),a=t("../Grid"),u=t("./touchManager.js"),c=window.WGo,f=h.Da,l=h.Ca,p=h.EMPTY,g=window.devicePixelRatio||1,d={};d[c.B]=l,d[c.W]=f;var v={};v[p]=null,v[l]=c.B,v[f]=c.W,i.g=r,r.prototype.create=function(t,i,n,r){var e=n.Xa;if(this.Ja=n,!this.Yk||this.Xa!==e){this.Xa=e,r=r||{};var o=r.noCoords?0:-.23,s={size:e,width:i,section:{top:o,left:o,right:o,bottom:o},coordFontSize:.6};switch(r.background){case"wood":s.background=(window.rootDir||".")+"/lib/wood1.jpg";break;default:s.background="#c75"}t.clear(),this.Yk=new c.Board(t.bl(),s),this.cl=60+this.Yk.stoneRadius,r.noCoords||this.Yk.addCustomObject(c.Board.coordinates),this.dl()}},r.prototype.dl=function(){var t=this;u.el(this.Yk.element,function(i,n,r){if("dragCancel"===i)return t.fl(-1,-1);"drag"===i.substr(0,4)&&(r-=t.cl);var e=t.gl(n,r);switch(n=e[0],r=e[1],i){case"dragStart":return t.fl(n,r);case"drag":return t.fl(n,r);case"dragEnd":return t.fl(-1,-1),t.hl(n,r);case"tap":return t.hl(n,r)}})},r.prototype.il=function(t){this.jl=v[t]},r.prototype.fl=function(t,i){var n=this.kl(t,i);if(this._k){if(t===this.cursor.x&&i===this.cursor.y)return;this.Yk.removeObject(this.cursor)}this._k=n,n&&(this.cursor.x=t,this.cursor.y=i,this.Yk.obj_arr[t][i][0]?(this.cursor.type="CR",this.cursor.c=void 0):(this.cursor.type=void 0,this.cursor.c=this.jl),this.Yk.addObject(this.cursor))},r.prototype.ll=function(t,i,n){this.al.type&&this.Yk.removeObject(this.al),this.al.type=t,t&&(this.al.x=i-1,this.al.y=this.Xa-n,this.Yk.addObject(this.al))},r.prototype.kl=function(t,i){return t>=0&&i>=0&&t<this.Xa&&i<this.Xa},r.prototype.hl=function(t,i){var n=t+1,r=this.Xa-i;if(!this.kl(t,i))return this.Zk("!"+(n>=1&&n<=this.Xa?a.$c(n):r));if(this.Ja.mc(n,r)===p){var e=a.ed(n,r);this.Zk(e)}},r.prototype.ml=function(t){this.Zk=t},r.prototype.gl=function(t,i){var n=this.Yk;return t=Math.round((t*g-n.left)/n.fieldWidth),i=Math.round((i*g-n.top)/n.fieldHeight),[t,i]},r.prototype.refresh=function(){var t=!1;"regular"!==this.$k&&(this.$k="regular",t=!0);for(var i=0;i<this.Xa;i++)for(var n=0;n<this.Xa;n++){var r=this.Ja.mc(n+1,this.Xa-i),e=v[r],o=this.Yk.obj_arr[n][i][0];t&&(o=null,this.Yk.removeObjectsAt(n,i)),null===e?o&&this.Yk.removeObjectsAt(n,i):o&&o.c===e||this.Yk.addObject({x:n,y:i,c:e})}},r.prototype.show=function(t,i,n){this.refresh(),this.$k=t;for(var r=0;r<this.Xa;r++)for(var e=0;e<this.Xa;e++){var o=n(i[this.Xa-r][e+1]);o&&(o.x=e,o.y=r,this.Yk.addObject(o))}};var b,y,m;r.prototype.nl=function(t,i,n){b=t,y=i,m=n};var w={Ih:e,ol:o,value:s};r.prototype.pl=function(t,i){var n=w[t];return n?void this.show(t,i,n):h.log.error("invalid display type:",t)},r.prototype.ql=function(t){this.show("scoring",t,o)}},{"../Grid":9,"../main":38,"./touchManager.js":45}],40:[function(t,i,n){"use strict";function r(t,i,n,e){this.type=i,t instanceof r&&(t=t.rl);var s=this.rl=t.appendChild(document.createElement(i));e&&"#"===e[0]&&(o.add(e.substr(1),this),"#"===n[0]&&(n=n.substr(1))),n&&(s.className=n)}function e(){this.Kl={}}var o=null,s=1;i.g=r,r.prototype.sl=function(t){return this.rl.textContent=t,this},r.prototype.tl=function(t){return this.rl.innerHTML=t,this},r.prototype.setAttribute=function(t,i){return this.rl.setAttribute(t,i),this},r.prototype.ul=function(t,i){return this.rl.style[t]=i,this},r.prototype.vl=function(t){return this.rl.style.display=t?"":"none",this},r.prototype.wl=function(t){return this.rl.disabled=!t,this.xl("disabled",!t),this},r.prototype.text=function(){return this.rl.textContent},r.prototype.yl=function(){return this.rl.innerHTML},r.prototype.value=function(){return this.rl.value},r.prototype.zl=function(){return this.rl.checked},r.prototype.bl=function(){return this.rl},r.prototype.clear=function(){this.rl.innerHTML=""},r.prototype.v=function(t,i){var n=this;this.rl.addEventListener(t,function(t){i.call(n,t)})},r.prototype.xl=function(t,i){var n=this.rl,r=n.className.split(" "),e=r.indexOf(t);if(i){if(e>=0)return;n.className+=" "+t}else{if(0>e)return;r.splice(e,1),n.className=r.join(" ")}},r.prototype.Al=function(){this.rl.scrollTop=this.rl.scrollHeight},r.Bl=function(t,i,n){return new r(t,"div",i,n||i)},r.prototype.Bl=function(t,i){return new r(this,"div",t,i||t)},r.removeChild=function(t,i){t instanceof r&&(t=t.rl),t.removeChild(i.rl)},r.prototype.removeChild=function(t){this.rl.removeChild(t.rl)},r.Cl=function(t,i,n,e){var o=new r(t,"button",i+"Button",i);return o.rl.innerText=n,o.v("click",e),o},r.Dl=function(t,i,n,e){var o=new r(t,"a",i+"Link",i);return o.setAttribute("href",e),o.sl(n),o},r.El=function(t,i,n){return new r(t,"span",i,i).sl(n)},r.Fl=function(t,i,n,e){var o=i+"Label";r.El(t,o+" inputLbl",n,o);var s=new r(t,"input",i+"Input inputBox",i);return void 0!==e&&(s.rl.value=e),s},r.Gl=function(t,i,n,e,o){var h=new r(t,"div",i+"Div chkBoxDiv"),a=new r(h,"input",i+"ChkBox chkBox",i),u=a.rl;return u.type="checkbox",u.name=i,void 0!==e&&(u.value=e),u.id=i+"ChkBox"+(void 0!==e?e:s++),o&&(u.checked=!0),new r(h,"label",i+"ChkLabel chkLbl",i).sl(n).setAttribute("for",u.id),a},r.Hl=function(t,i,n,e,o){e||(e=n);for(var s=[],h=0;h<n.length;h++){var a=s[h]=new r(t,"input",i+"RadioBtn radioBtn",i),u=a.rl;u.type="radio",u.name=i,u.value=e[h],u.id=i+"Radio"+e[h],e[h]===o&&(u.checked=!0),new r(t,"label",i+"RadioLabel radioLbl",i).sl(n[h]).setAttribute("for",u.id)}return s},r.Il=function(t){for(var i=0;i<t.length;i++)if(t[i].rl.checked)return t[i].rl.value},r.Jl=function(t,i,n,e,o){e||(e=n);var s=new r(t,"select",i+"DropDwn dropDwn",i);s.values=e;for(var h=0,a=0;a<n.length;a++){var u=new r(s,"option").rl;u.value=e[a],u.textContent=n[a],e[a]===o&&(h=a)}return s.rl.selectedIndex=h,s},r.prototype.select=function(t){var i=this.values.indexOf(t);-1!==i&&(this.rl.selectedIndex=i)},r.Yb=function(){return o=new e},e.prototype.add=function(t,i){this.Kl[t]=i},e.prototype.get=function(t){return this.Kl[t]},e.prototype.wl=function(t,i,n){"ALL"===t&&(t=Object.keys(this.Kl));for(var r=0;r<t.length;r++)if(!n||-1===n.indexOf(t[r])){var e=this.Kl[t[r]];e?e.wl(i):console.error("Invalid control name:",t[r])}},e.prototype.vl=function(t,i,n){"ALL"===t&&(t=Object.keys(this.Kl));for(var r=0;r<t.length;r++)if(!n||-1===n.indexOf(t[r])){var e=this.Kl[t[r]];e?e.vl(i):console.error("Invalid control name:",t[r])}},r.Ll=function(t){document.head.getElementsByTagName("title")[0].textContent=t},r.Ml=function(){var t=window.getSelection();if(!t.rangeCount)return null;var i=t.getRangeAt(0),n=i.startContainer.data;return n?n.substring(i.startOffset,i.endOffset):null}},{}],41:[function(t,i,n){"use strict";function r(t,i){var n=o.Bl(document.body,"newGameBackground"),r=n.Bl("newGameDialog dialog");r.Bl("dialogTitle").sl("Start a new game");var s=new o(r,"form").setAttribute("action"," "),h=s.Bl();o.El(h,"inputLbl","Size:");var a=o.Hl(h,"size",[5,7,9,13,19],null,t.Xa);o.El(s,"inputLbl","Handicap:");var u=o.Jl(s,"handicap",[0,2,3,4,5,6,7,8,9],null,t.Ka),c=s.Bl();o.El(c,"inputLbl","AI plays:");var f=o.Hl(c,"aiColor",["white","black","both","none"],null,t.Nl),l=o.Fl(s,"moves","Moves to load:",t.Te),p=s.Bl();o.El(p,"inputLbl","Black AI:");var g=o.Jl(p,"defaultAi",Object.keys(e.Mk),null,e.Td.name);o.El(p,"defAiInfo","(White AI always uses latest AI version)"),o.El(s,"inputLbl","Rules:");var d=o.Jl(s,"rules",["Japanese","Chinese"],["jp","ch"],t.rules),v=o.Cl(s.Bl("btnDiv"),"start","Play",function(r){return r.preventDefault(),t.Xa=~~o.Il(a),t.Ka=~~u.value(),t.Nl=o.Il(f),t.Te=l.value(),e.Td=e.Mk[g.value()],t.rules=d.value(),i(t)?o.removeChild(document.body,n):void 0});v.setAttribute("type","submit")}var e=t("../main"),o=t("./Dome");i.g=r},{"../main":38,"./Dome":40}],42:[function(t,i,n){"use strict";function r(){var t=this.Ol;t.options&&(t.options.Pl=this.id),s.removeChild(t.parent,t.Ql),t.Rl&&t.Rl(t.options)}function e(t,i,n,e){var o=s.Cl(t,"popupDlg",n,r);o.Ol=i,o.id=e}function o(t,i,n,r,o){this.parent=t||document.body,this.options=r,this.Rl=o,this.Ql=s.Bl(this.parent,"popupBackground");var h=this.Ql.rl.parentElement;this.Ql.ul("left",h.offsetLeft+"px"),this.Ql.ul("top",h.offsetTop+"px"),this.Ql.ul("width",h.scrollWidth+"px"),this.Ql.ul("height",h.scrollHeight+"px");var a=this.Ql.Bl("popupDlg dialog");a.Bl("dialogTitle").sl(n||"Problem");var u=a.Bl("content");s.El(u,"message",i);for(var c=r&&r.buttons||["OK"],f=a.Bl("btnDiv"),l=0;l<c.length;l++)e(f,this,c[l],l)}var s=t("./Dome");i.g=o},{"./Dome":40}],43:[function(t,i,n){"use strict";function r(t){this.Xa=this.Ka=0,this.Nl="",this.Qd=new u(t),this.Sl=new p(this.Qd),this.Yk=null,this.initDev?this.initDev():this.Tl=!0}function e(t,i,n){var r=this.rl=t.Bl("oneMove "+i);r.Bl("label").sl(n);var e=r.Bl("icon");this.text=e.Bl("text")}var o=t("../constants"),s=t("../main"),h=t("./Board"),a=t("./Dome"),u=t("../GameLogic"),c=t("../Grid"),f=t("./NewGameDlg"),l=t("./PopupDlg"),p=t("../ScoreAnalyser"),g=t("../userPreferences"),d=o.Da,v=o.Ca,b=document.documentElement.clientWidth;i.g=r,r.prototype.Gk=function(){window.addEventListener("beforeunload",this.Ul.bind(this)),this.Xa=g.Vl("lastGameSize",9),this.Ka=g.Vl("lastGameHandicap",0),this.Nl=g.Vl("lastGameAiPlays","white"),this.rules=g.Vl("lastGameRules","jp");var t=g.Vl("lastGameHistory");this.Wl(t)},r.prototype.Xl=function(){g.Yl("lastGameSize",this.Xa),g.Yl("lastGameHandicap",this.Ka),g.Yl("lastGameAiPlays",this.Nl),g.Yl("lastGameRules",this.rules),g.Yl("lastGameHistory",this.Qd.history)},r.prototype.Ul=function(){this.Xl(),g.close()},r.prototype.Zl=function(){this.Yk.refresh(),this.inDevMode&&this.devDisplay()},r.prototype.$l=function(t,i,n){this._l("compact",t,i,n),this.Nl="both",this.am(null,!0),this.Qd.Pa&&this.bm()},r.prototype._l=function(t,i,n,r){var e=this.cm="compact"===t,o=this.dm=a.Bl(i,"gameUi");n&&o.Bl(e?"testTitle":"pageTitle").sl(n),this.em=o.Bl("board"),r&&(this.fm=o.Bl("boardDesc").tl(r)),this.gm(o),this.hm(o),this.Tl||this.createDevControls();var s=this.Qd.Ja.Xa+2;this.im=e?28*s:Math.min(60*s+10,b-15);var u=this;this.Yk=new h,this.Yk.ml(function(t){return"!"===t[0]?!u.Tl&&u.onDevKey(t.substr(1)):u.inEvalMode||u.jm?u.showDevData(t,null,!0):void u.km(t)})},r.prototype.lm=function(){this.dm&&(a.removeChild(document.body,this.dm),this.dm=null,this.Yk=null)},r.prototype.Wl=function(t){a.Ll(s.appName),this.lm();var i={Xa:this.Xa,Ka:this.Ka,Nl:this.Nl,Te:t,rules:this.rules},n=this;new f(i,function(t){return n.Xa=t.Xa,n.Ka=t.Ka,n.Nl=t.Nl,n.rules=t.rules,n.Qd.Ia("jp"===n.rules?o.Ea:o.Ik),n.am(t.Te)})},e.prototype.mm=function(t,i){this.rl.vl(null!==t),this.rl.xl("black",i===v),this.rl.xl("white",i===d),this.text.sl(t)},r.prototype.gm=function(t){var i=this.nm=t.Bl("statusBar");this.om=new e(i,"lastMove","Last:"),this.pm=i.Bl("gameInfo"),this.qm=i.Bl("message"),this.rm=new e(i,"nextPlayer","Next:")},r.prototype.sm=function(){var t=this.Qd.Ha[d]+" VS "+this.Qd.Ha[v]+" (B)";t+=", komi: "+this.Qd.La,this.Ka&&(t+=", hand: "+this.Ka),this.Qd.rules&&(t+=", rules: "+this.Qd.rules),this.pm.sl(t)},r.prototype.tm=function(){var t=this.Qd.history;if(t.length){var i=t[t.length-1];this.om.mm(i,1-this.Qd.Na);var n=this.Qd.qb(i);n?this.Yk.ll("CR",n[0],n[1]):this.Yk.ll(null)}else this.om.mm(null);this.um(),this.qm.sl("")},r.prototype.um=function(t){return null===t?this.rm.mm(null):void this.rm.mm(t||"",this.Qd.Na)},r.prototype.statusMessage=function(t){this.qm.sl(t),this.um(),this.vm.vl(!1)},r.prototype.wm=function(t){this.vm.tl(t),this.vm.vl(!0)},r.prototype.hm=function(t){var i=t.Bl("mainControls"),n=this;this.xm=a.Yb(),a.Cl(i,"#review","Review",function(){n.ym()}),a.Cl(i,"#back10","<<",function(){n.zm(-10)}),a.Cl(i,"#back1","<",function(){n.zm(-1)}),a.Cl(i,"#forw1",">",function(){n.zm(1)}),a.Cl(i,"#forw10",">>",function(){n.zm(10)}),this.controls=a.Yb(),a.Cl(i,"#pass","Pass",function(){n.km("pass")}),a.Cl(i,"#next","Next",function(){n.Am(1)}),a.Cl(i,"#next10","Next 10",function(){n.Am(10)}),a.Cl(i,"#nextAll","Finish",function(){n.Am()}),a.Cl(i,"#undo","Undo",function(){n.Bm()}),a.Cl(i,"#accept","Accept",function(){n.Cm(!0)}),a.Cl(i,"#refuse","Refuse",function(){n.Cm(!1)}),a.Cl(i,"#newg","New game",function(){n.Wl()}),this.vm=i.Bl("logBox outputBox").vl(!1),a.Cl(i,"#resi","Resign",function(){n.Dm()}),this.Em=i.Bl("#aiVsAiFlags"),this.Fm=a.Gl(this.Em,"animated","Animated")},r.prototype.ym=function(){this.jm=!this.jm,this.xm.get("review").xl("toggled",this.jm),this.Gm(),this.jm?(this.Hm=this.Qd.history.concat(),this.Im=this.Hm.length,this.zm(0)):(this.zm(this.Hm.length-this.Im),this.um())},r.prototype.Gm=function(){var t=this.jm,i=this.Qd.Qa,n=this.Qd.Pa,r=!(i||n||t),e="both"===this.Nl;this.nm.vl(!i),this.xm.vl(["review"],r||t),this.xm.vl(["back1","back10","forw1","forw10"],t),this.controls.vl(["accept","refuse"],n),this.controls.vl(["undo","pass","resi"],r&&!e),this.controls.vl(["next","next10","nextAll","aiVsAiFlags"],r&&e),this.controls.vl(["newg"],i&&!this.cm),this.Tl||this.toggleDevControls(r,t,e)},r.prototype.Jm=function(t){this.Km=[],this.Lm=[!1,!1];for(var i=v;d>=i;i++)if(this.Nl===c.Hc[i]||"both"===this.Nl){var n=this.Mm(i);this.Lm[i]=!0,t||this.Qd.Ta(i,n.Rj+"-"+n.Sj)}else t||this.Qd.Ta(i,"human")},r.prototype.Mm=function(t){var i=this.Km[t];if(i)return i;var n=t===v?s.Td:s.Nk;return i=this.Km[t]=new n(this.Qd,t)},r.prototype.Nm=function(){this.sm(),this.tm(),this.um(),this.Gm(),this.Zl()},r.prototype.Ya=function(t){var i=[];return this.Qd.jb(t,i)?!0:(new l(this.dm,i.join("\n")),!1)},r.prototype.am=function(t,i){var n=this.Qd;if(i||n.Wa(this.Xa,this.Ka),this.Jm(i),t&&!this.Ya(t))return!1;this.Xa=n.Ja.Xa,this.Ka=n.Ka,this.Tl||this.initDev(),this.dm||this._l("main",document.body);var r=this.cm?void 0:{background:"wood"};return this.Yk.create(this.em,this.im,n.Ja,r),this.Nm(),i||t||this.statusMessage("Game started. Your turn..."),this.Om()||this.Pm(),!0},r.prototype.Om=function(){return this.Qd.Pa?(this.bm(),!0):this.Qd.Qa?(this.Vg(),this.Qm(),!0):!1},r.prototype.Vg=function(){var t=this.Sl.Wd();this.Rm=t.join("<br>")},r.prototype.bm=function(){this.Vg(),this.statusMessage("Do you accept this score?"),this.wm(this.Rm),this.Gm(),this.Yk.ql(this.Sl.Zd().Rb)},r.prototype.Cm=function(t){var i=this.Qd.Na;return this.Lm[i]&&!this.Lm[1-i]&&(i=1-i),this.Qd.wb(t,i),t?this.Qm():(this.statusMessage("Score in dispute. Continue playing..."),this.Gm(),this.Zl(),void("both"!==this.Nl&&this.Pm()))},r.prototype.Qm=function(){this.wm(this.Rm+"<br><br>"+this.Qd.yb()),this.Gm()},r.prototype.Sm=function(t){var i=this.Tm=this.Km[this.Qd.Na];this.Um=i.ek;var n=i.qk();return this.Qd.cb(n),t||(this.tm(),this.inDevMode&&this.showDevData(n,i,!1)),this.Om()?n:(t||this.Zl(),n)},r.prototype.km=function(t){return this.Qd.cb(t)?void(this.Om()||(this.Zl(),this.tm(),this.Pm())):this.statusMessage(this.Qd.eb().join(". "))},r.prototype.Dm=function(){var t=this,i={buttons:["YES","NO"]};new l(this.dm,"Do you really want to resign?","Confirm",i,function(i){0===i.Pl&&(t.Qd.cb("resi"),t.Om())})},r.prototype.Bm=function(){var t="undo";return("none"===this.Nl||"both"===this.Nl||this.inEvalMode)&&(t="half_undo"),this.Qd.cb(t)?(this.Zl(),this.tm(),void this.statusMessage('Performed "'+t+'"')):this.statusMessage(this.Qd.eb().join(". "))},r.prototype.Vm=function(){this.Yk.il(this.Qd.Na);var t=c.Xc(this.Qd.Na);return"("+t+"'s turn)"},r.prototype.Pm=function(t){this.Lm[this.Qd.Na]?this.Sm(t):t||this.um();
},r.prototype.Am=function(t){var i=1===t,n=this.Fm.zl(),r=!i&&!n;if(this.Pm(r),!i&&!this.Qd.Pa){var e=this;window.setTimeout(function(){e.Am(t-1)},n?100:0)}},r.prototype.zm=function(t){for(var i=this.Hm,n=this.Im,r=0;t>r&&n!==i.length;r++)this.Qd.cb(i[n]),n++;for(r=0;r>t&&0!==n;r--)this.Qd.cb("half_undo"),n--;if(this.Im=n,this.Zl(),this.xm.wl(["forw1","forw10"],n!==i.length),this.xm.wl(["back1","back10"],0!==n),this.tm(),n<i.length?this.um(i[n]):this.um(null),this.inEvalMode){var e=n>0?i[n-1]:null;e&&e.length<=3&&this.afterReplay(e)}}},{"../GameLogic":6,"../Grid":9,"../ScoreAnalyser":13,"../constants":37,"../main":38,"../userPreferences":46,"./Board":39,"./Dome":40,"./NewGameDlg":41,"./PopupDlg":42}],44:[function(t,i,n){var r='body {\n  background-color: #AB8274;\n  font-family: "Arial";\n  margin: 0px;\n}\n::-webkit-scrollbar {\n  -webkit-appearance: none;\n  width: 7px;\n  height: 7px;\n}\n::-webkit-scrollbar-track {\n  -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.2);\n  -webkit-border-radius: 10px;\n  border-radius: 7px;\n  margin: 1px;\n}\n::-webkit-scrollbar-thumb {\n  border-radius: 7px;\n  background-color: rgba(0, 0, 0, 0.5);\n  -webkit-box-shadow: 0 0 1px rgba(255, 255, 255, 0.5);\n}\n.pageTitle {\n  margin-top: 7px;\n  margin-bottom: 7px;\n  font-size: 40px;\n  font-weight: bold;\n}\n.subTitle {\n  font-size: 30px;\n  margin-top: 0.5em;\n  margin-bottom: 5px;\n}\n.logBox {\n  font-size: 28px;\n  font-family: "Arial";\n  background-color: white;\n  border: solid #cca 1px;\n  border-radius: 8px;\n  padding: 5px;\n  overflow-y: auto;\n  word-wrap: break-word;\n}\n.inputLbl {\n  margin-left: 10px;\n  font-size: 28px;\n}\n.inputBox {\n  margin: 17px 13px 17px 13px;\n  min-height: 1cm;\n  text-align: left;\n  font-size: 42px;\n}\nbutton {\n  margin-right: 10px;\n  margin-bottom: 10px;\n  border-radius: 13px;\n  width: 160px;\n  height: 120px;\n  font-size: 28px;\n  border-color: #987;\n  background-color: #765;\n  color: #fed;\n}\nbutton.toggled {\n  background-color: #AD4343;\n}\nbutton.disabled {\n  color: #888;\n  opacity: 0.6;\n}\n.chkBoxDiv {\n  display: inline-block;\n  margin-right: 10px;\n}\n.chkBox {\n  margin: 5px 3px 14px 2px;\n  width: 29px;\n  height: 1.5em;\n}\n.chkLbl {\n  font-size: 28px;\n}\n.dropDwn {\n  font-size: 42px;\n  margin: 17px 13px 17px 13px;\n}\n.radioBtn {\n  margin: 17px 0px 17px 13px;\n  width: 29px;\n  height: 1.5em;\n}\n.radioLbl {\n  margin-right: 13px;\n}\n.dialog {\n  z-index: 1000;\n  position: relative;\n  margin: 0 auto;\n  top: 200px;\n  width: 45%;\n  padding: 10px;\n  background-color: #ffe;\n  border: solid #cca 1px;\n  border-radius: 10px;\n  font-family: Arial;\n  font-size: 42px;\n}\n.dialogTitle {\n  font-size: 50px;\n  background-color: #ffebce;\n  border: solid 1px rgba(195, 50, 50, 0.2);\n  border-radius: 10px;\n  margin: -6px;\n  margin-bottom: 15px;\n  padding: 10px 0px 10px 12px;\n}\n.popupBackground {\n  z-index: 2000;\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.5);\n}\n.popupDlg {\n  position: relative;\n  top: 150px;\n  margin: 0 auto;\n  width: 50%;\n}\n.popupDlg .content {\n  padding: 20px;\n  white-space: pre-wrap;\n}\n.popupDlg .btnDiv {\n  width: 100%;\n  display: inline-block;\n}\n.popupDlg .btnDiv .popupDlgButton {\n  min-width: 220px;\n  height: 100%;\n  min-height: 80px;\n  font-size: 30px;\n  float: right;\n  margin-right: 0;\n  margin-left: 10px;\n}\n.gameUi {\n  padding: 2px;\n}\n.gameUi .board {\n  background-color: #402F23;\n  border-radius: 7px;\n}\n.gameUi .board .wgo-board {\n  margin: 0 auto;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n  /* disables grey shade on long-tap for Safari */\n  /* Below avoid issues when tap-hold on Android */\n  -webkit-user-select: none;\n  -webkit-touch-callout: none;\n}\n.gameUi .boardDesc {\n  margin-top: 3px;\n  font-weight: bold;\n  font-style: italic;\n}\n.gameUi button {\n  min-width: 160px;\n  height: 80px;\n}\n.gameUi a {\n  color: #a63;\n}\n.gameUi .statusBar {\n  position: relative;\n  box-sizing: border-box;\n  margin-top: 7px;\n  background-color: #B9A698;\n  border: rgba(0, 0, 0, 0.35) 1px solid;\n  border-radius: 5px;\n}\n.gameUi .statusBar .gameInfo {\n  display: inline-block;\n  box-sizing: border-box;\n  margin: 4px 10px 0;\n  padding: 1px 3px;\n  width: 280px;\n  height: 44px;\n  overflow-y: auto;\n  font-size: 16px;\n  font-family: tahoma;\n  background-color: #EDDDCE;\n  border-radius: 7px;\n  border: rgba(0, 0, 0, 0.35) 1px solid;\n}\n.gameUi .statusBar .message {\n  display: inline-block;\n  position: relative;\n  top: -3px;\n  width: 415px;\n  height: 31px;\n  overflow-y: auto;\n  font-size: 22px;\n}\n.gameUi .statusBar .oneMove {\n  height: 44px;\n}\n.gameUi .statusBar .oneMove .icon .text {\n  color: #C12A04;\n}\n.gameUi .statusBar .oneMove.black .icon {\n  background-image: url("js/ui/stoneBlack.png");\n}\n.gameUi .statusBar .oneMove.black .text {\n  color: white;\n}\n.gameUi .statusBar .oneMove.white .icon {\n  background-image: url("js/ui/stoneWhite.png");\n}\n.gameUi .statusBar .oneMove.white .text {\n  color: black;\n}\n.gameUi .statusBar .oneMove .label {\n  display: inline-block;\n  position: relative;\n  top: -12px;\n  font-size: 20px;\n  margin-right: 2px;\n}\n.gameUi .statusBar .oneMove .icon {\n  display: inline-block;\n  position: relative;\n  top: 3px;\n  background-repeat: no-repeat;\n  background-size: 100%;\n  width: 42px;\n  height: 42px;\n}\n.gameUi .statusBar .oneMove .icon .text {\n  position: absolute;\n  width: 100%;\n  text-align: center;\n  top: 8px;\n  font-size: 20px;\n  font-weight: bold;\n}\n.gameUi .statusBar .lastMove {\n  display: inline-block;\n  position: relative;\n  top: -1px;\n  padding-left: 3px;\n}\n.gameUi .statusBar .nextPlayer {\n  position: absolute;\n  right: 10px;\n  top: 3px;\n}\n.gameUi .mainControls {\n  margin-top: 10px;\n}\n.gameUi .mainControls .outputBox {\n  width: 410px;\n  min-width: 200px;\n  font-size: 22px;\n  font-weight: bold;\n  margin-right: 10px;\n  margin-bottom: 10px;\n}\n.gameUi .devDiv {\n  min-width: 600px;\n  border: #755;\n  border-width: 1px 2px 2px 1px;\n  border-style: solid;\n  border-radius: 10px;\n  background-color: #FAEBD7;\n  padding: 7px;\n}\n.gameUi .devDiv .devControls {\n  height: 90px;\n  font-size: 24px;\n}\n.gameUi .devDiv .options {\n  display: inline-block;\n  vertical-align: top;\n  max-width: 252px;\n  margin-right: 5px;\n}\n.gameUi .devDiv .options .emailGameLink {\n  display: inline-block;\n  margin-right: 10px;\n}\n.gameUi .devDiv .options .dropDwn {\n  font-size: 24px;\n  margin: 0px 10px 5px 0px;\n}\n.gameUi .devDiv .devLogBox {\n  display: inline-block;\n  height: 102px;\n  width: 460px;\n  font-size: 20px;\n  font-weight: bold;\n}\n.testTitle {\n  margin-top: 40px;\n  margin-bottom: 10px;\n  font-size: 20px;\n  font-weight: bold;\n}\n.testOutputBox {\n  height: 160px;\n  font-size: 14px;\n}\n.testErrorBox {\n  word-wrap: break-word;\n  height: 250px;\n  font-size: 14px;\n  font-family: \'Courier\';\n}\n.boardDesc {\n  font-family: \'Courier\';\n}\n.newGameBackground {\n  background-image: url("js/ui/photo.jpg");\n  background-repeat: repeat-y;\n  background-size: cover;\n  height: 1500px;\n}\n.newGameDialog {\n  min-width: 800px;\n}\n.newGameDialog .handicapInput {\n  width: 20px;\n  text-align: center;\n}\n.newGameDialog .movesInput {\n  width: 50%;\n}\n.newGameDialog .defAiInfo {\n  font-size: 50%;\n  font-style: italic;\n  width: 400px;\n  display: inline-block;\n}\n.newGameDialog .btnDiv {\n  width: 100%;\n  height: 100px;\n}\n.newGameDialog .btnDiv .startButton {\n  width: 240px;\n  height: 100%;\n  font-size: 30px;\n  float: right;\n  margin-right: 0;\n}\n';t("lessify")(r),i.g=r},{lessify:48}],45:[function(t,i,n){"use strict";function r(){this.Wm=this.Xm=0,this.Ym=this.Zm=!1,this.target=null,this.$m=this.startTime=this._m=0}function e(t){var i=t.currentTarget;return v.$m+=t.changedTouches.length,v.$m>1?v.an(i):void v.bn(t.changedTouches[0],i)}function o(t){return v.$m-=t.changedTouches.length,v.$m>0?console.warn("Extra touchend count?",t):void(v.cn(t.changedTouches[0],v.target)&&t.preventDefault())}function s(t){return t.changedTouches.length>1?v.an(v.target):void(v.dn(t.changedTouches[0],v.target)&&t.preventDefault())}function h(t){v.$m-=t.changedTouches.length,v.an(v.target)}function a(t){t.button===d&&v.bn(t,t.currentTarget)}function u(t){t.button===d&&v.cn(t,v.target)&&t.preventDefault()}function c(t){v.dn(t,v.target)&&t.preventDefault()}var f=10,l=50,p=300,g=500,d=0,v=i.g=new r;r.prototype.en=function(t,i){if(i)null!==this.target&&console.error("Forgot to stop listening on",this.target),this.Ym=!0,this.target=t,t.addEventListener("touchmove",s),t.addEventListener("touchend",o),t.addEventListener("touchcancel",h),document.addEventListener("mousemove",c),document.addEventListener("mouseup",u);else{if(null===this.target)return console.warn("Not listening anyway");this.Ym=!1,this.target=null,t.removeEventListener("touchmove",s),t.removeEventListener("touchend",o),t.removeEventListener("touchcancel",h),document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",u)}},r.prototype.bn=function(t,i){this.en(i,!0),this.Ym=!0,this.Wm=t.clientX,this.Xm=t.clientY,this.startTime=Date.now();var n=this;this.fn&&window.clearTimeout(this.fn),this.fn=window.setTimeout(function(){n.fn=null,n.Ym&&!n.Zm&&n.gn(t,i)},p)},r.prototype.gn=function(t,i){this.Zm=!0,this.startTime=Date.now(),i.hn("dragStart",t.pageX-i.offsetLeft,t.pageY-i.offsetTop)},r.prototype.an=function(t){return this.$m=0,this.en(t,!1),this.Zm&&(this.Zm=!1,t.hn("dragCancel")),!0},r.prototype.dn=function(t,i){var n=Date.now();return n-this._m<l?!0:(this._m=n,this.Zm?(i.hn("drag",t.pageX-i.offsetLeft,t.pageY-i.offsetTop),!0):Math.abs(t.clientX-this.Wm)+Math.abs(t.clientY-this.Xm)<f?!1:n-this.startTime<p?(this.en(i,!1),!1):this.gn(t,i))},r.prototype.cn=function(t,i){if(this.Zm&&Date.now()-this.startTime<g)return this.an(i);var n=this.Zm?"dragEnd":"tap";return i.hn(n,t.pageX-i.offsetLeft,t.pageY-i.offsetTop),this.en(i,!1),this.Zm=!1,!0},r.prototype.el=function(t,i){t.hn=i,t.addEventListener("touchstart",e),t.addEventListener("mousedown",a)}},{}],46:[function(t,i,n){"use strict";function r(){this["in"]=null,this.jn=0,this.kn=null,this.ln={},this.mn()}var e=t("./main"),o=e.appName,s=180,h="all";r.prototype.close=function(){this.nn(null)},r.prototype.nn=function(t){this["in"]&&this.on(),this.kn=t},r.prototype.mn=function(){try{var t=window.localStorage.getItem(o);t&&(this.ln=JSON.parse(t))}catch(i){}},r.prototype.pn=function(t){var i=this;t||(t=s);var n=Date.now()+1e3*t;this["in"]&&this.jn<=n||(this["in"]&&window.clearTimeout(this["in"]),this.jn=n,this["in"]=window.setTimeout(function(){i["in"]=null,i.on()},1e3*t))},r.prototype.on=function(){try{this["in"]&&(window.clearTimeout(this["in"]),this["in"]=null),window.localStorage.setItem(o,JSON.stringify(this.ln))}catch(t){}},r.prototype.Vl=function(t,i,n){t=(this.kn&&!n?this.kn:h)+"#"+t;var r=this.ln[t];return void 0===r?i:r},r.prototype.Yl=function(t,i,n){t=(this.kn?this.kn:h)+"#"+t,this.ln[t]=i,this.pn(n)};var a=new r;i.g=a},{"./main":38}],47:[function(t,i,n){i.g=function(t,i){var n=i||document;if(n.createStyleSheet){var r=n.createStyleSheet();return r.cssText=t,r.ownerNode}var e=n.getElementsByTagName("head")[0],o=n.createElement("style");return o.type="text/css",o.styleSheet?o.styleSheet.cssText=t:o.appendChild(n.createTextNode(t)),e.appendChild(o),o},i.g.qn=function(t){if(document.createStyleSheet)return document.createStyleSheet(t).ownerNode;var i=document.getElementsByTagName("head")[0],n=document.createElement("link");return n.rel="stylesheet",n.href=t,i.appendChild(n),n}},{}],48:[function(t,i,n){i.g=t("cssify")},{cssify:47}],49:[function(t,i,n){i.g={name:"rubigolo",version:"0.2.0",description:"",rn:"Olivier Lombart (kubicle)",sn:"MIT",scripts:{tn:"browserify js/app.js -t lessify | uglifyjs -o build/bld.js -m --mangle-props --reserved-file build/reserved.json --reserve-domprops --mangle-regex=\"/^[^.]/\" -c pure_funcs=['main.log.debug','main.log.warn']",un:"watchify js/test/testApp.js -o build/devBuild.js -t lessify -v",test:"node js/test/ciTestMain.js --ci"},vn:"js/app.js",wn:{type:"git",url:"https://github.com/kubicle/rubigolo"},xn:{url:"https://github.com/kubicle/rubigolo/issues"},yn:["baduk","go","igo","weiqi"],zn:{An:"=1.2.1"},Bn:{Cn:"~0.3.22",Dn:"~0.1.1",En:"~10.2.4",lessify:"~1.0.1",Fn:"~3.2.2",Gn:"~2.6.2"}}},{}]},{},[36]);