<!DOCTYPE html>
<html>
    <head>
        <title>Rubigolo - Tests</title>
        <script src="./build.js" type="text/JavaScript"></script>
    </head>
    <body>
        <h1>Rubigolo - Tests</h1>
        <button id="startBtn">Start</button>
        <h2>Result</h2>
        <div id="output" style="margin-top:20px"></div>
        <h2>Errors</h2>
        <div id="errors" style="margin-top:20px"></div>
<script>
  startBtn.addEventListener('click', function () {
    var Logger = main.Logger;
    output.textContent = 'Running unit tests...';
    errors.textContent = '';
    this.hidden = true;
    window.setTimeout(function () {
      output.textContent = '';
      window.main.tests.run(function (lvl, msg) {
        var firstLine = msg.indexOf('\n');
        if (firstLine > 0) msg = msg.substr(0, firstLine);
        msg += '<br>';
        if (lvl >= Logger.WARN) errors.innerHTML += msg;
        else if (lvl == Logger.INFO) output.innerHTML += msg;
        return true; // also log in console
      });
      startBtn.hidden = false;
    });
  });
</script>
    </body>
</html>
